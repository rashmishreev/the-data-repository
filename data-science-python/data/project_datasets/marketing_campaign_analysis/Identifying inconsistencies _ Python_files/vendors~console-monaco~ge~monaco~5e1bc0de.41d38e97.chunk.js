(this["webpackJsonpcampus-app-v2"]=this["webpackJsonpcampus-app-v2"]||[]).push([[14],{2091:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i(2138);class s extends n.a{}},2428:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(1957),s=i(1976);class o extends s.b{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(128);this._canUseLayerHinting=!t.get(26),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._domNode=Object(n.b)(document.createElement("div")),this._domNode.setClassName(o.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Object(n.b)(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(o.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(128);return this._canUseLayerHinting=!t.get(26),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const i=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)}}o.CLASS_NAME="glyph-margin",o.OUTER_CLASS_NAME="margin"},2841:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i(2842);var n=i(2297);class s extends n.b{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport();let i=[],s=0;for(let o=0,r=t.length;o<r;o++){const e=t[o],r=e.options.marginClassName;r&&(i[s++]=new n.a(e.range.startLineNumber,e.range.endLineNumber,r))}return i}prepareRender(e){const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,n=this._render(t,i,this._getDecorations(e)),s=[];for(let o=t;o<=i;o++){const e=o-t,i=n[e];let r="";for(let t=0,n=i.length;t<n;t++)r+='<div class="cmdr '+i[t]+'" style=""></div>';s[e]=r}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}},2842:function(e,t,i){},2843:function(e,t,i){},2844:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i(2845);var n=i(1957),s=i(1976);class o extends s.b{constructor(e){super(e);const t=this._context.configuration.options.get(128);this._widgets={},this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,this._domNode=Object(n.b)(document.createElement("div")),s.a.write(this._domNode,4),this._domNode.setClassName("overlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options.get(128);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}addWidget(e){const t=Object(n.b)(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),this._domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const i=this._widgets[e.getId()];return i.preference!==t&&(i.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const e=this._widgets[t].domNode.domNode;delete this._widgets[t],e.parentNode.removeChild(e),this.setShouldRender()}}_renderWidget(e){const t=e.domNode;if(null!==e.preference)if(0===e.preference)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(1===e.preference){const e=t.domNode.clientHeight;t.setTop(this._editorHeight-e-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else 2===e.preference&&(t.setTop(0),t.domNode.style.right="50%");else t.unsetTop()}prepareRender(e){}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let i=0,n=t.length;i<n;i++){const e=t[i];this._renderWidget(this._widgets[e])}}}},2845:function(e,t,i){},2846:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i(1957),s=i(1971),o=i(1976),r=i(1941),a=i(1951),h=i(1993);class d{constructor(e,t){const i=e.options;this.lineHeight=i.get(56),this.pixelRatio=i.get(126),this.overviewRulerLanes=i.get(71),this.renderBorder=i.get(70);const n=t.getColor(h.l);this.borderColor=n?n.toString():null,this.hideCursor=i.get(48);const o=t.getColor(h.f);this.cursorColor=o?o.transparent(.7).toString():null,this.themeType=t.type;const r=i.get(62),d=r.enabled,l=r.side,c=d?t.getColor(h.k)||a.D.getDefaultBackground():null;this.backgroundColor=null===c||"left"===l?null:s.a.Format.CSS.formatHex(c);const m=i.get(128).overviewRuler;this.top=m.top,this.right=m.right,this.domWidth=m.width,this.domHeight=m.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[u,g]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=u,this.w=g}_initLanes(e,t,i){const n=t-e;if(i>=3){const t=Math.floor(n/3),i=Math.floor(n/3),s=n-t-i,o=e+t;return[[0,e,o,e,e+t+s,e,o,e],[0,t,s,t+s,i,t+s+i,s+i,t+s+i]]}if(2===i){const t=Math.floor(n/2),i=n-t;return[[0,e,e,e,e+t,e,e,e],[0,t,t,t,i,t+i,t+i,t+i]]}return[[0,e,e,e,e,e,e,e],[0,n,n,n,n,n,n,n]]}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&this.backgroundColor===e.backgroundColor&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class l extends o.b{constructor(e){super(e),this._domNode=Object(n.b)(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=a.D.onDidChange(e=>{e.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new d(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(t))&&(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}onConfigurationChanged(e){return this._updateSettings(!1)}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(r.a.compare),!0}onDecorationsChanged(e){return!!e.affectsOverviewRuler}onFlushed(e){return!0}onScrollChanged(e){return e.scrollHeightChanged}onZonesChanged(e){return!0}onThemeChanged(e){return this._context.model.invalidateOverviewRulerColorCache(),this._updateSettings(!1)}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render()}_render(){if(0===this._settings.overviewRulerLanes)return void this._domNode.setBackgroundColor(this._settings.backgroundColor?this._settings.backgroundColor:"");const e=this._settings.canvasWidth,t=this._settings.canvasHeight,i=this._settings.lineHeight,n=this._context.viewLayout,s=t/this._context.viewLayout.getScrollHeight(),o=this._context.model.getAllOverviewRulerDecorations(this._context.theme),r=6*this._settings.pixelRatio|0,a=r/2|0,h=this._domNode.domNode.getContext("2d");null===this._settings.backgroundColor?h.clearRect(0,0,e,t):(h.fillStyle=this._settings.backgroundColor,h.fillRect(0,0,e,t));const d=this._settings.x,l=this._settings.w,c=Object.keys(o);c.sort();for(let m=0,u=c.length;m<u;m++){const e=c[m],u=o[e];h.fillStyle=e;let g=0,_=0,p=0;for(let o=0,c=u.length;o<c;o++){const e=u[3*o],c=u[3*o+1],m=u[3*o+2];let C=n.getVerticalOffsetForLineNumber(c)*s|0,f=(n.getVerticalOffsetForLineNumber(m)+i)*s|0;if(f-C<r){let e=(C+f)/2|0;e<a?e=a:e+a>t&&(e=t-a),C=e-a,f=e+a}C>p+1||e!==g?(0!==o&&h.fillRect(d[g],_,l[g],p-_),g=e,_=C,p=f):f>p&&(p=f)}h.fillRect(d[g],_,l[g],p-_)}if(!this._settings.hideCursor&&this._settings.cursorColor){const e=2*this._settings.pixelRatio|0,i=e/2|0,o=this._settings.x[7],r=this._settings.w[7];h.fillStyle=this._settings.cursorColor;let a=-100,d=-100;for(let l=0,c=this._cursorPositions.length;l<c;l++){const c=this._cursorPositions[l];let m=n.getVerticalOffsetForLineNumber(c.lineNumber)*s|0;m<i?m=i:m+i>t&&(m=t-i);const u=m-i,g=u+e;u>d+1?(0!==l&&h.fillRect(o,a,r,d-a),a=u,d=g):g>d&&(d=g)}h.fillRect(o,a,r,d-a)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,t),h.stroke(),h.moveTo(0,0),h.lineTo(e,0),h.stroke())}}},2847:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(1957),s=i(2431),o=i(2138);class r extends o.a{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=Object(n.b)(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new s.b(e=>this._context.viewLayout.getVerticalOffsetForLineNumber(e)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(56)),this._zoneManager.setPixelRatio(i.get(126)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(56)&&(this._zoneManager.setLineHeight(t.get(56)),this._render()),e.hasChanged(126)&&(this._zoneManager.setPixelRatio(t.get(126)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(0===this._zoneManager.getOuterHeight())return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),n=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(s,i,n,e),!0}_renderOneLane(e,t,i,n){let s=0,o=0,r=0;for(const a of t){const t=a.colorId,h=a.from,d=a.to;t!==s?(e.fillRect(0,o,n,r-o),s=t,e.fillStyle=i[s],o=h,r=d):r>=h?r=Math.max(r,d):(e.fillRect(0,o,n,r-o),o=h,r=d)}e.fillRect(0,o,n,r-o)}}},2848:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i(2849);var n=i(1957),s=i(1976),o=i(1993),r=i(1944);class a extends s.b{constructor(e){super(e),this.domNode=Object(n.b)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(89),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.model.getTextModelOptions(),s=i;let o=t-e;for(;o>0;){const e=Object(n.b)(document.createElement("div"));e.setClassName("view-ruler"),e.setWidth(s),this.domNode.appendChild(e),this._renderedRulers.push(e),o--}return}let i=e-t;for(;i>0;){const e=this._renderedRulers.pop();this.domNode.removeChild(e),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const i=this._renderedRulers[t],n=this._rulers[t];i.setBoxShadow(n.color?`1px 0 0 0 ${n.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(n.column*this._typicalHalfwidthCharacterWidth)}}}Object(r.f)((e,t)=>{const i=e.getColor(o.m);i&&t.addRule(`.monaco-editor .view-ruler { box-shadow: 1px 0 0 0 ${i} inset; }`)})},2849:function(e,t,i){},2850:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i(2851);var n=i(1957),s=i(1976),o=i(1966),r=i(1944);class a extends s.b{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const t=this._context.configuration.options.get(90);this._useShadows=t.useShadows,this._domNode=Object(n.b)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}getDomNode(){return this._domNode}_updateWidth(){const e=this._context.configuration.options.get(128);0===e.minimap.renderMinimap||e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?this._width=e.width:this._width=e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}onConfigurationChanged(e){const t=this._context.configuration.options.get(90);return this._useShadows=t.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}Object(r.f)((e,t)=>{const i=e.getColor(o.Ub);i&&t.addRule(`.monaco-editor .scroll-decoration { box-shadow: ${i} 0 6px 6px -6px inset; }`)})},2851:function(e,t,i){},2852:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));i(2853);var n=i(2091),s=i(1966),o=i(1944);class r{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class a{constructor(e,t){this.lineNumber=e,this.ranges=t}}function h(e){return new r(e)}function d(e){return new a(e.lineNumber,e.ranges.map(h))}class l extends n.a{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(56),this._roundedSelection=t.get(88),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(56),this._roundedSelection=t.get(88),this._typicalHalfwidthCharacterWidth=t.get(40).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,i=e.length;t<i;t++){if(e[t].ranges.length>1)return!0}return!1}_enrichVisibleRangesWithStyle(e,t,i){const n=this._typicalHalfwidthCharacterWidth/4;let s=null,o=null;if(i&&i.length>0&&t.length>0){const n=t[0].lineNumber;if(n===e.startLineNumber)for(let e=0;!s&&e<i.length;e++)i[e].lineNumber===n&&(s=i[e].ranges[0]);const r=t[t.length-1].lineNumber;if(r===e.endLineNumber)for(let e=i.length-1;!o&&e>=0;e--)i[e].lineNumber===r&&(o=i[e].ranges[0]);s&&!s.startStyle&&(s=null),o&&!o.startStyle&&(o=null)}for(let r=0,a=t.length;r<a;r++){const e=t[r].ranges[0],i=e.left,h=e.left+e.width,d={top:0,bottom:0},l={top:0,bottom:0};if(r>0){const e=t[r-1].ranges[0].left,s=t[r-1].ranges[0].left+t[r-1].ranges[0].width;c(i-e)<n?d.top=2:i>e&&(d.top=1),c(h-s)<n?l.top=2:e<h&&h<s&&(l.top=1)}else s&&(d.top=s.startStyle.top,l.top=s.endStyle.top);if(r+1<a){const e=t[r+1].ranges[0].left,s=t[r+1].ranges[0].left+t[r+1].ranges[0].width;c(i-e)<n?d.bottom=2:e<i&&i<s&&(d.bottom=1),c(h-s)<n?l.bottom=2:h<s&&(l.bottom=1)}else o&&(d.bottom=o.startStyle.bottom,l.bottom=o.endStyle.bottom);e.startStyle=d,e.endStyle=l}}_getVisibleRangesWithStyle(e,t,i){const n=(t.linesVisibleRangesForRange(e,!0)||[]).map(d);return!this._visibleRangesHaveGaps(n)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,n,i),n}_createSelectionPiece(e,t,i,n,s){return'<div class="cslr '+i+'" style="top:'+e.toString()+"px;left:"+n.toString()+"px;width:"+s.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,i,n){if(0===n.length)return;const s=!!n[0].ranges[0].startStyle,o=this._lineHeight.toString(),r=(this._lineHeight-1).toString(),a=n[0].lineNumber,h=n[n.length-1].lineNumber;for(let d=0,c=n.length;d<c;d++){const c=n[d],m=c.lineNumber,u=m-t,g=i&&(m===h||m===a)?r:o,_=i&&m===a?1:0;let p="",C="";for(let e=0,t=c.ranges.length;e<t;e++){const t=c.ranges[e];if(s){const e=t.startStyle,i=t.endStyle;if(1===e.top||1===e.bottom){p+=this._createSelectionPiece(_,g,l.SELECTION_CLASS_NAME,t.left-l.ROUNDED_PIECE_WIDTH,l.ROUNDED_PIECE_WIDTH);let i=l.EDITOR_BACKGROUND_CLASS_NAME;1===e.top&&(i+=" "+l.SELECTION_TOP_RIGHT),1===e.bottom&&(i+=" "+l.SELECTION_BOTTOM_RIGHT),p+=this._createSelectionPiece(_,g,i,t.left-l.ROUNDED_PIECE_WIDTH,l.ROUNDED_PIECE_WIDTH)}if(1===i.top||1===i.bottom){p+=this._createSelectionPiece(_,g,l.SELECTION_CLASS_NAME,t.left+t.width,l.ROUNDED_PIECE_WIDTH);let e=l.EDITOR_BACKGROUND_CLASS_NAME;1===i.top&&(e+=" "+l.SELECTION_TOP_LEFT),1===i.bottom&&(e+=" "+l.SELECTION_BOTTOM_LEFT),p+=this._createSelectionPiece(_,g,e,t.left+t.width,l.ROUNDED_PIECE_WIDTH)}}let i=l.SELECTION_CLASS_NAME;if(s){const e=t.startStyle,n=t.endStyle;0===e.top&&(i+=" "+l.SELECTION_TOP_LEFT),0===e.bottom&&(i+=" "+l.SELECTION_BOTTOM_LEFT),0===n.top&&(i+=" "+l.SELECTION_TOP_RIGHT),0===n.bottom&&(i+=" "+l.SELECTION_BOTTOM_RIGHT)}C+=this._createSelectionPiece(_,g,i,t.left,t.width)}e[u][0]+=p,e[u][1]+=C}}prepareRender(e){const t=[],i=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;for(let o=i;o<=n;o++){t[o-i]=["",""]}const s=[];for(let o=0,r=this._selections.length;o<r;o++){const n=this._selections[o];if(n.isEmpty()){s[o]=null;continue}const r=this._getVisibleRangesWithStyle(n,e,this._previousFrameVisibleRangesWithStyle[o]);s[o]=r,this._actualRenderOneSelection(t,i,this._selections.length>1,r)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map(e=>{let[t,i]=e;return t+i})}render(e,t){if(!this._renderResult)return"";const i=t-e;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}function c(e){return e<0?-e:e}l.SELECTION_CLASS_NAME="selected-text",l.SELECTION_TOP_LEFT="top-left-radius",l.SELECTION_BOTTOM_LEFT="bottom-left-radius",l.SELECTION_TOP_RIGHT="top-right-radius",l.SELECTION_BOTTOM_RIGHT="bottom-right-radius",l.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",l.ROUNDED_PIECE_WIDTH=10,Object(o.f)((e,t)=>{const i=e.getColor(s.C);i&&t.addRule(`.monaco-editor .focused .selected-text { background-color: ${i}; }`);const n=e.getColor(s.y);n&&t.addRule(`.monaco-editor .selected-text { background-color: ${n}; }`);const o=e.getColor(s.D);o&&!o.isTransparent()&&t.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${o}; }`)})},2853:function(e,t,i){},2854:function(e,t,i){},2855:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i(1957),s=i(1945),o=i(1976),r=i(1941);const a=()=>{throw new Error("Invalid change accessor")};class h extends o.b{constructor(e){super(e);const t=this._context.configuration.options,i=t.get(128);this._lineHeight=t.get(56),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,this.domNode=Object(n.b)(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Object(n.b)(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const n of e)t.set(n.id,n);let i=!1;return this._context.model.changeWhitespace(e=>{const n=Object.keys(this._zones);for(let s=0,o=n.length;s<o;s++){const o=n[s],r=this._zones[o],a=this._computeWhitespaceProps(r.delegate),h=t.get(o);!h||h.afterLineNumber===a.afterViewLineNumber&&h.height===a.heightInPx||(e.changeOneWhitespace(o,a.afterViewLineNumber,a.heightInPx),this._safeCallOnComputedHeight(r.delegate,a.heightInPx),i=!0)}}),i}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(128);return this._lineHeight=t.get(56),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,e.hasChanged(56)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return"undefined"!==typeof e.afterColumn?e.afterColumn:1e4}_computeWhitespaceProps(e){if(0===e.afterLineNumber)return{afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t,i;if("undefined"!==typeof e.afterColumn)t=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const i=this._context.model.validateModelPosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new r.a(i,this._context.model.getModelLineMaxColumn(i))}i=t.column===this._context.model.getModelLineMaxColumn(t.lineNumber)?this._context.model.validateModelPosition({lineNumber:t.lineNumber+1,column:1}):this._context.model.validateModelPosition({lineNumber:t.lineNumber,column:t.column+1});const n=this._context.model.coordinatesConverter.convertModelPositionToViewPosition(t),s=this._context.model.coordinatesConverter.modelPositionIsVisible(i);return{afterViewLineNumber:n.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.model.changeWhitespace(i=>{const n={addZone:e=>(t=!0,this._addZone(i,e)),removeZone:e=>{e&&(t=this._removeZone(i,e)||t)},layoutZone:e=>{e&&(t=this._layoutZone(i,e)||t)}};!function(e,t){try{e(t)}catch(i){Object(s.e)(i)}}(e,n),n.addZone=a,n.removeZone=a,n.layoutZone=a}),t}_addZone(e,t){const i=this._computeWhitespaceProps(t),s={whitespaceId:e.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(t),i.heightInPx,i.minWidthInPx),delegate:t,isVisible:!1,domNode:Object(n.b)(t.domNode),marginDomNode:t.marginDomNode?Object(n.b)(t.marginDomNode):null};return this._safeCallOnComputedHeight(s.delegate,i.heightInPx),s.domNode.setPosition("absolute"),s.domNode.domNode.style.width="100%",s.domNode.setDisplay("none"),s.domNode.setAttribute("monaco-view-zone",s.whitespaceId),this.domNode.appendChild(s.domNode),s.marginDomNode&&(s.marginDomNode.setPosition("absolute"),s.marginDomNode.domNode.style.width="100%",s.marginDomNode.setDisplay("none"),s.marginDomNode.setAttribute("monaco-view-zone",s.whitespaceId),this.marginDomNode.appendChild(s.marginDomNode)),this._zones[s.whitespaceId]=s,this.setShouldRender(),s.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t];return delete this._zones[t],e.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const i=this._zones[t],n=this._computeWhitespaceProps(i.delegate);return e.changeOneWhitespace(i.whitespaceId,n.afterViewLineNumber,n.heightInPx),this._safeCallOnComputedHeight(i.delegate,n.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return"number"===typeof e.heightInPx?e.heightInPx:"number"===typeof e.heightInLines?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return"number"===typeof e.minWidthInPx?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if("function"===typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(i){Object(s.e)(i)}}_safeCallOnDomNodeTop(e,t){if("function"===typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(i){Object(s.e)(i)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,i={};let n=!1;for(let o=0,r=t.length;o<r;o++)i[t[o].id]=t[o],n=!0;const s=Object.keys(this._zones);for(let o=0,r=s.length;o<r;o++){const t=s[o],n=this._zones[t];let r=0,a=0,h="none";i.hasOwnProperty(t)?(r=i[t].verticalOffset-e.bigNumbersDelta,a=i[t].height,h="block",n.isVisible||(n.domNode.setAttribute("monaco-visible-view-zone","true"),n.isVisible=!0),this._safeCallOnDomNodeTop(n.delegate,e.getScrolledTopFromAbsoluteTop(i[t].verticalOffset))):(n.isVisible&&(n.domNode.removeAttribute("monaco-visible-view-zone"),n.isVisible=!1),this._safeCallOnDomNodeTop(n.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),n.domNode.setTop(r),n.domNode.setHeight(a),n.domNode.setDisplay(h),n.marginDomNode&&(n.marginDomNode.setTop(r),n.marginDomNode.setHeight(a),n.marginDomNode.setDisplay(h))}n&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}},2859:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n,s=i(2059),o=i(1936),r=i(2012),a=i(2010);const h=null===(n=window.trustedTypes)||void 0===n?void 0:n.createPolicy("domLineBreaksComputer",{createHTML:e=>e});class d{static create(){return new d}constructor(){}createLineBreaksComputer(e,t,i,n){t|=0,i=+i;let d=[];return{addRequest:(e,t)=>{d.push(e)},finalize:()=>function(e,t,i,n,d){var m;if(-1===n){const t=[];for(let i=0,n=e.length;i<n;i++)t[i]=null;return t}const u=Math.round(n*t.typicalHalfwidthCharacterWidth);2!==d&&3!==d||(d=1);const g=document.createElement("div");r.a.applyFontInfoSlow(g,t);const _=Object(s.a)(1e4),p=[],C=[],f=[],N=[],b=[];for(let s=0;s<e.length;s++){const n=e[s];let r=0,a=0,h=u;if(0!==d)if(r=o.u(n),-1===r)r=0;else{for(let t=0;t<r;t++){const e=9===n.charCodeAt(t)?i-a%i:1;a+=e}const e=Math.ceil(t.spaceWidth*a);e+t.typicalFullwidthCharacterWidth>u?(r=0,a=0):h=u-e}const c=n.substr(r),m=l(c,a,i,h,_);p[s]=r,C[s]=a,f[s]=c,N[s]=m[0],b[s]=m[1]}const L=_.build(),D=null!==(m=null===h||void 0===h?void 0:h.createHTML(L))&&void 0!==m?m:L;g.innerHTML=D,g.style.position="absolute",g.style.top="10000",g.style.wordWrap="break-word",document.body.appendChild(g);let S=document.createRange();const v=Array.prototype.slice.call(g.children,0);let w=[];for(let s=0;s<e.length;s++){const e=v[s],t=c(S,e,f[s],N[s]);if(null===t){w[s]=null;continue}const i=p[s],n=C[s],o=b[s],r=[];for(let s=0,a=t.length;s<a;s++)r[s]=o[t[s]];if(0!==i)for(let s=0,a=t.length;s<a;s++)t[s]+=i;w[s]=new a.b(t,r,n)}return document.body.removeChild(g),w}(d,e,t,i,n)}}}function l(e,t,i,n,s){s.appendASCIIString('<div style="width:'),s.appendASCIIString(String(n)),s.appendASCIIString('px;">');const r=e.length;let a=t,h=0,d=[],l=[],c=0<r?e.charCodeAt(0):0;s.appendASCIIString("<span>");for(let m=0;m<r;m++){0!==m&&m%16384===0&&s.appendASCIIString("</span><span>"),d[m]=h,l[m]=a;const t=c;c=m+1<r?e.charCodeAt(m+1):0;let n=1,u=1;switch(t){case 9:n=i-a%i,u=n;for(let e=1;e<=n;e++)e<n?s.write1(160):s.appendASCII(32);break;case 32:32===c?s.write1(160):s.appendASCII(32);break;case 60:s.appendASCIIString("&lt;");break;case 62:s.appendASCIIString("&gt;");break;case 38:s.appendASCIIString("&amp;");break;case 0:s.appendASCIIString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.write1(65533);break;default:o.D(t)&&u++,t<32?s.write1(9216+t):s.write1(t)}h+=n,a+=u}return s.appendASCIIString("</span>"),d[e.length]=h,l[e.length]=a,s.appendASCIIString("</div>"),[d,l]}function c(e,t,i,n){if(i.length<=1)return null;const s=Array.prototype.slice.call(t.children,0),o=[];try{!function e(t,i,n,s,o,r,a,h){if(s===r)return;if(o=o||m(t,i,n[s],n[s+1]),a=a||m(t,i,n[r],n[r+1]),Math.abs(o[0].top-a[0].top)<=.1)return;if(s+1===r)return void h.push(r);const d=s+(r-s)/2|0,l=m(t,i,n[d],n[d+1]);e(t,i,n,s,o,d,l,h),e(t,i,n,d,l,r,a,h)}(e,s,n,0,null,i.length-1,null,o)}catch(r){return console.log(r),null}return 0===o.length?null:(o.push(i.length),o)}function m(e,t,i,n){return e.setStart(t[i/16384|0].firstChild,i%16384),e.setEnd(t[n/16384|0].firstChild,n%16384),e.getClientRects()}},3002:function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));i(2843);var n=i(1935),s=i(1957),o=i(2176),r=i(1931),a=i(1940),h=i(1936),d=i(2296),l=i(1976),c=i(1967),m=i(1933),u=i(2429),g=i(2430),_=i(2010),p=i(1966),C=i(1944),f=i(1949),N=i(2023);const b=(()=>{const e=[];for(let t=32;t<=126;t++)e.push(t);return e.push(65533),e})();var L=i(2168);class D{constructor(e,t){this.scale=t,this.charDataNormal=D.soften(e,.8),this.charDataLight=D.soften(e,50/60)}static soften(e,t){let i=new Uint8ClampedArray(e.length);for(let n=0,s=e.length;n<s;n++)i[n]=Object(L.b)(e[n]*t);return i}renderChar(e,t,i,n,s,o,r,a,h){const d=1*this.scale,l=2*this.scale,c=h?1:l;if(t+d>e.width||i+c>e.height)return void console.warn("bad render request outside image data");const m=a?this.charDataLight:this.charDataNormal,u=((e,t)=>(e-=32)<0||e>96?t<=2?(e+96)%96:95:e)(n,r),g=4*e.width,_=o.r,p=o.g,C=o.b,f=s.r-_,N=s.g-p,b=s.b-C,L=e.data;let D=u*d*l,S=i*g+4*t;for(let v=0;v<c;v++){let e=S;for(let t=0;t<d;t++){const t=m[D++]/255;L[e++]=_+f*t,L[e++]=p+N*t,L[e++]=C+b*t,e++}S+=g}}blockRenderChar(e,t,i,n,s,o,r){const a=1*this.scale,h=2*this.scale,d=r?1:h;if(t+a>e.width||i+d>e.height)return void console.warn("bad render request outside image data");const l=4*e.width,c=s.r,m=s.g,u=s.b,g=c+.5*(n.r-c),_=m+.5*(n.g-m),p=u+.5*(n.b-u),C=e.data;let f=i*l+4*t;for(let N=0;N<d;N++){let e=f;for(let t=0;t<a;t++)C[e++]=g,C[e++]=_,C[e++]=p,e++;f+=l}}}var S=i(2185);const v={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},w=e=>{const t=new Uint8ClampedArray(e.length/2);for(let i=0;i<e.length;i+=2)t[i>>1]=v[e[i]]<<4|15&v[e[i+1]];return t},y={1:Object(S.a)(()=>w("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:Object(S.a)(()=>w("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class A{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let i;return i=y[e]?new D(y[e](),e):A.createFromSampleData(A.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=i,i}static createSampleData(e){const t=document.createElement("canvas"),i=t.getContext("2d");t.style.height="16px",t.height=16,t.width=960,t.style.width="960px",i.fillStyle="#ffffff",i.font="bold 16px "+e,i.textBaseline="middle";let n=0;for(const s of b)i.fillText(String.fromCharCode(s),n,8),n+=10;return i.getImageData(0,0,960,16)}static createFromSampleData(e,t){if(61440!==e.length)throw new Error("Unexpected source in MinimapCharRenderer");let i=A._downsample(e,t);return new D(i,t)}static _downsampleChar(e,t,i,n,s){const o=1*s,r=2*s;let a=n,h=0;for(let d=0;d<r;d++){const n=d/r*16,s=(d+1)/r*16;for(let r=0;r<o;r++){const d=r/o*10,l=(r+1)/o*10;let c=0,m=0;for(let i=n;i<s;i++){const n=t+3840*Math.floor(i),s=1-(i-Math.floor(i));for(let t=d;t<l;t++){const i=1-(t-Math.floor(t)),o=n+4*Math.floor(t),r=i*s;m+=r,c+=e[o]*e[o+3]/255*r}}const u=c/m;h=Math.max(h,u),i[a++]=Object(L.b)(u)}}return h}static _downsample(e,t){const i=2*t*1*t,n=96*i,s=new Uint8ClampedArray(n);let o=0,r=0,a=0;for(let h=0;h<96;h++)a=Math.max(a,this._downsampleChar(e,r,s,o,t)),o+=i,r+=40;if(a>0){const e=255/a;for(let t=0;t<n;t++)s[t]*=e}return s}}var H=i(2008);class R{constructor(e,t,i){const n=e.options,s=n.get(126),o=n.get(128),r=o.minimap,a=n.get(40),h=n.get(62);this.renderMinimap=r.renderMinimap,this.size=h.size,this.minimapHeightIsEditorHeight=r.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=n.get(92),this.showSlider=h.showSlider,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.lineHeight=n.get(56),this.minimapLeft=r.minimapLeft,this.minimapWidth=r.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=r.minimapCanvasInnerWidth,this.canvasInnerHeight=r.minimapCanvasInnerHeight,this.canvasOuterWidth=r.minimapCanvasOuterWidth,this.canvasOuterHeight=r.minimapCanvasOuterHeight,this.isSampling=r.minimapIsSampling,this.editorHeight=o.height,this.fontScale=r.minimapScale,this.minimapLineHeight=r.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Object(S.a)(()=>A.create(this.fontScale,a.fontFamily)),this.backgroundColor=R._getMinimapBackground(t,i)}static _getMinimapBackground(e,t){const i=e.getColor(p.Cb);return i?new u.a(i.rgba.r,i.rgba.g,i.rgba.b,i.rgba.a):t.getColor(2)}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)}}class x{constructor(e,t,i,n,s,o,r,a){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=i,this._computedSliderRatio=n,this.sliderTop=s,this.sliderHeight=o,this.startLineNumber=r,this.endLineNumber=a}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}static create(e,t,i,n,s,o,r,a,h,d,l){const c=e.pixelRatio,m=e.minimapLineHeight,u=Math.floor(e.canvasInnerHeight/m),g=e.lineHeight;if(e.minimapHeightIsEditorHeight){const t=a*e.lineHeight+(e.scrollBeyondLastLine?s-e.lineHeight:0),i=Math.max(1,Math.floor(s*s/t)),n=Math.max(0,e.minimapHeight-i),o=n/(d-s),l=h*o,c=n>0,m=Math.floor(e.canvasInnerHeight/e.minimapLineHeight);return new x(h,d,c,o,l,i,1,Math.min(r,m))}let _,p;if(o&&i!==r){const e=i-t+1;_=Math.floor(e*m/c)}else{const e=s/g;_=Math.floor(e*m/c)}p=e.scrollBeyondLastLine?(r-1)*m/c:Math.max(0,r*m/c-_),p=Math.min(e.minimapHeight-_,p);const C=p/(d-s),f=h*C;let N=0;if(e.scrollBeyondLastLine){N=s/g-1}if(u>=r+N){return new x(h,d,p>0,C,f,_,1,r)}{let e=Math.max(1,Math.floor(t-f*c/m));l&&l.scrollHeight===d&&(l.scrollTop>h&&(e=Math.min(e,l.startLineNumber)),l.scrollTop<h&&(e=Math.max(e,l.startLineNumber)));const i=Math.min(r,e+u-1);return new x(h,d,!0,C,(t-e+(h-n)/g)*m/c,_,e,i)}}}class B{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}B.INVALID=new B(-1);class M{constructor(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new d.a(()=>B.INVALID),this._renderedLines._set(e.startLineNumber,i)}linesEquals(e){if(!this.scrollEquals(e))return!1;const t=this._renderedLines._get().lines;for(let i=0,n=t.length;i<n;i++)if(-1===t[i].dy)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class I{constructor(e,t,i,n){this._backgroundFillData=I._createBackgroundFillData(t,i,n),this._buffers=[e.createImageData(t,i),e.createImageData(t,i)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,i){const n=i.r,s=i.g,o=i.b,r=new Uint8ClampedArray(e*t*4);let a=0;for(let h=0;h<t;h++)for(let t=0;t<e;t++)r[a]=n,r[a+1]=s,r[a+2]=o,r[a+3]=255,a+=4;return r}}class T{constructor(e,t){this.samplingRatio=e,this.minimapLines=t}static compute(e,t,i){if(0===e.renderMinimap||!e.isSampling)return[null,[]];const n=e.pixelRatio,s=e.lineHeight,o=e.scrollBeyondLastLine,{minimapLineCount:r}=c.f.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:o,height:e.editorHeight,lineHeight:s,pixelRatio:n}),a=t/r,h=a/2;if(!i||0===i.minimapLines.length){let e=[];if(e[0]=1,r>1){for(let t=0,i=r-1;t<i;t++)e[t]=Math.round(t*a+h);e[r-1]=t}return[new T(a,e),[]]}const d=i.minimapLines,l=d.length;let m=[],u=0,g=0,_=1;let p=[],C=null;for(let c=0;c<r;c++){const e=Math.max(_,Math.round(c*a)),i=Math.max(e,Math.round((c+1)*a));for(;u<l&&d[u]<e;){if(p.length<10){const e=u+1+g;C&&"deleted"===C.type&&C._oldIndex===u-1?C.deleteToLineNumber++:(C={type:"deleted",_oldIndex:u,deleteFromLineNumber:e,deleteToLineNumber:e},p.push(C)),g--}u++}let n;if(u<l&&d[u]<=i)n=d[u],u++;else if(n=0===c?1:c+1===r?t:Math.round(c*a+h),p.length<10){const e=u+1+g;C&&"inserted"===C.type&&C._i===c-1?C.insertToLineNumber++:(C={type:"inserted",_i:c,insertFromLineNumber:e,insertToLineNumber:e},p.push(C)),g++}m[c]=n,_=n}if(p.length<10)for(;u<l;){const e=u+1+g;C&&"deleted"===C.type&&C._oldIndex===u-1?C.deleteToLineNumber++:(C={type:"deleted",_oldIndex:u,deleteFromLineNumber:e,deleteToLineNumber:e},p.push(C)),g--,u++}else p=[{type:"flush"}];return[new T(a,m),p]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e)-1;for(;i>0&&this.minimapLines[i-1]>=e;)i--;let n=this.modelLineToMinimapLine(t)-1;for(;n+1<this.minimapLines.length&&this.minimapLines[n+1]<=t;)n++;if(i===n){const n=this.minimapLines[i];if(n<e||n>t)return null}return[i+1,n+1]}decorationLineRangeToMinimapLineRange(e,t){let i=this.modelLineToMinimapLine(e),n=this.modelLineToMinimapLine(t);return e!==t&&n===i&&(n===this.minimapLines.length?i>1&&i--:n++),[i,n]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let i=this.minimapLines.length,n=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),i=Math.min(i,s),n=Math.max(n,s)):this.minimapLines[s]-=t;return[i,n]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<e.fromLineNumber);i--)this.minimapLines[i]+=t}}class E extends l.b{constructor(e){super(e),this.tokensColorTracker=g.a.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new R(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=T.compute(this.options,this._context.model.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new W(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new R(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);return!!t&&this._actual.onLinesChanged(t[0],t[1])}return this._actual.onLinesChanged(e.fromLineNumber,e.toLineNumber)}onLinesDeleted(e){if(this._samplingState){const[t,i]=this._samplingState.onLinesDeleted(e);return t<=i&&this._actual.onLinesChanged(t+1,i+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._context.model.invalidateMinimapColorCache(),this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(const i of e.ranges){const e=this._samplingState.modelLineRangeToMinimapLineRange(i.fromLineNumber,i.toLineNumber);e&&t.push({fromLineNumber:e[0],toLineNumber:e[1]})}return!!t.length&&this._actual.onTokensChanged(t)}return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),i=this._samplingState.modelLineToMinimapLine(i));const n={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(n)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[t,i]=T.compute(this.options,this._context.model.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const n of i)switch(n.type){case"deleted":this._actual.onLinesDeleted(n.deleteFromLineNumber,n.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(n.insertFromLineNumber,n.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.model.getLineCount()}getRealLineCount(){return this._context.model.getLineCount()}getLineContent(e){return this._samplingState?this._context.model.getLineContent(this._samplingState.minimapLines[e-1]):this._context.model.getLineContent(e)}getMinimapLinesRenderingData(e,t,i){if(this._samplingState){let n=[];for(let s=0,o=t-e+1;s<o;s++)i[s]?n[s]=this._context.model.getViewLineData(this._samplingState.minimapLines[e+s-1]):n[s]=null;return n}return this._context.model.getMinimapLinesRenderingData(e,t,i).data}getSelections(){if(null===this._minimapSelections)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,i]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new f.a(t,e.startColumn,i,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let i;if(this._samplingState){const n=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];i=new m.a(n,1,s,this._context.model.getLineMaxColumn(s))}else i=new m.a(e,1,t,this._context.model.getLineMaxColumn(t));const n=this._context.model.getDecorationsInViewport(i);if(this._samplingState){let e=[];for(const t of n){if(!t.options.minimap)continue;const i=t.range,n=this._samplingState.modelLineToMinimapLine(i.startLineNumber),s=this._samplingState.modelLineToMinimapLine(i.endLineNumber);e.push(new _.f(new m.a(n,i.startColumn,s,i.endColumn),t.options))}return e}return n}getOptions(){return this._context.model.getTextModelOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.model.revealRange("mouse",!1,new m.a(e,1,e,1),1,0)}setScrollTop(e){this._context.model.setScrollPosition({scrollTop:e},1)}}class W extends r.a{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(p.Eb),this._domNode=Object(s.b)(document.createElement("div")),l.a.write(this._domNode,8),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Object(s.b)(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Object(s.b)(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Object(s.b)(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Object(s.b)(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Object(s.b)(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._mouseDownListener=n.l(this._domNode.domNode,"mousedown",e=>{e.preventDefault();if(0===this._model.options.renderMinimap)return;if(!this._lastRenderData)return;if("proportional"!==this._model.options.size){if(e.leftButton&&this._lastRenderData){const t=n.z(this._slider.domNode),i=t.top+t.height/2;this._startSliderDragging(e.buttons,e.posx,i,e.posy,this._lastRenderData.renderedLayout)}return}const t=this._model.options.minimapLineHeight,i=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*e.browserEvent.offsetY;let s=Math.floor(i/t)+this._lastRenderData.renderedLayout.startLineNumber;s=Math.min(s,this._model.getLineCount()),this._model.revealLineNumber(s)}),this._sliderMouseMoveMonitor=new o.a,this._sliderMouseDownListener=n.l(this._slider.domNode,"mousedown",e=>{e.preventDefault(),e.stopPropagation(),e.leftButton&&this._lastRenderData&&this._startSliderDragging(e.buttons,e.posx,e.posy,e.posy,this._lastRenderData.renderedLayout)}),this._gestureDisposable=N.b.addTarget(this._domNode.domNode),this._sliderTouchStartListener=n.g(this._domNode.domNode,N.a.Start,e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(e))},{passive:!1}),this._sliderTouchMoveListener=n.g(this._domNode.domNode,N.a.Change,e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(e)},{passive:!1}),this._sliderTouchEndListener=n.l(this._domNode.domNode,N.a.End,e=>{e.preventDefault(),e.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,i,n,s){this._slider.toggleClassName("active",!0);const r=(e,n)=>{const o=Math.abs(n-t);if(a.j&&o>140)return void this._model.setScrollTop(s.scrollTop);const r=e-i;this._model.setScrollTop(s.getDesiredScrollTopFromDelta(r))};n!==i&&r(n,t),this._sliderMouseMoveMonitor.startMonitoring(this._slider.domNode,e,o.b,e=>r(e.posy,e.posx),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(i)}dispose(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){return"always"===this._model.options.showSlider?"minimap slider-always":"minimap slider-mouseover"}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new I(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,t)}onLinesDeleted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(p.Eb),this._renderDecorations=!0,!0}onTokensChanged(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(0===this._model.options.renderMinimap)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const t=x.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(t.sliderNeeded?"block":"none"),this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight);const i=e.scrollLeft/this._model.options.typicalHalfwidthCharacterWidth,n=Math.min(this._model.options.minimapWidth,Math.round(i*this._model.options.minimapCharWidth/this._model.options.pixelRatio));this._sliderHorizontal.setLeft(n),this._sliderHorizontal.setWidth(this._model.options.minimapWidth-n),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections(),i=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber),{canvasInnerWidth:n,canvasInnerHeight:s}=this._model.options,o=this._model.options.minimapLineHeight,r=this._model.options.minimapCharWidth,a=this._model.getOptions().tabSize,h=this._decorationsCanvas.domNode.getContext("2d");h.clearRect(0,0,n,s);const d=new Map;for(let l=0;l<t.length;l++){const i=t[l];for(let t=i.startLineNumber;t<=i.endLineNumber;t++)this.renderDecorationOnLine(h,d,i,this._selectionColor,e,t,o,o,a,r)}for(let l=0;l<i.length;l++){const t=i[l];if(!t.options.minimap)continue;const n=t.options.minimap.getColor(this._theme);for(let i=t.range.startLineNumber;i<=t.range.endLineNumber;i++)switch(t.options.minimap.position){case H.c.Inline:this.renderDecorationOnLine(h,d,t.range,n,e,i,o,o,a,r);continue;case H.c.Gutter:const s=(i-e.startLineNumber)*o,l=2;this.renderDecoration(h,n,l,s,2,o);continue}}}}renderDecorationOnLine(e,t,i,n,s,o,r,a,d,l){const m=(o-s.startLineNumber)*a;if(m+r<0||m>this._model.options.canvasInnerHeight)return;let u=t.get(o);const g=!u;if(!u){const e=this._model.getLineContent(o);u=[c.h];for(let t=1;t<e.length+1;t++){const i=e.charCodeAt(t-1),n=9===i?d*l:h.D(i)?2*l:l;u[t]=u[t-1]+n}t.set(o,u)}const{startColumn:_,endColumn:p,startLineNumber:C,endLineNumber:f}=i,N=C===o?u[_-1]:c.h,b=f>o?u.length-1:p-1;if(b>0){const t=u[b]-N||2;this.renderDecoration(e,n,N,m,t,r)}g&&this.renderLineHighlight(e,n,m,r)}renderLineHighlight(e,t,i,n){e.fillStyle=t&&t.transparent(.5).toString()||"",e.fillRect(c.h,i,e.canvas.width,n)}renderDecoration(e,t,i,n,s,o){e.fillStyle=t&&t.toString()||"",e.fillRect(i,n,s,o)}renderLines(e){const t=e.startLineNumber,i=e.endLineNumber,n=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const t=this._lastRenderData._get();return new M(e,t.imageData,t.lines)}const s=this._getBuffer();if(!s)return null;let[o,r,a]=W._renderUntouchedLines(s,t,i,n,this._lastRenderData);const h=this._model.getMinimapLinesRenderingData(t,i,a),d=this._model.getOptions().tabSize,l=this._model.options.backgroundColor,c=this._model.tokensColorTracker,m=c.backgroundIsLight(),u=this._model.options.renderMinimap,g=this._model.options.charRenderer(),_=this._model.options.fontScale,p=this._model.options.minimapCharWidth,C=(1===u?2:3)*_,f=n>C?Math.floor((n-C)/2):0;let N=0;const b=[];for(let S=0,v=i-t+1;S<v;S++)a[S]&&W._renderLine(s,l,m,u,p,c,g,N,f,d,h[S],_,n),b[S]=new B(N),N+=n;const L=-1===o?0:o,D=(-1===r?s.height:r)-L;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,L,s.width,D),new M(e,s,b)}static _renderUntouchedLines(e,t,i,n,s){const o=[];if(!s){for(let e=0,n=i-t+1;e<n;e++)o[e]=!0;return[-1,-1,o]}const r=s._get(),a=r.imageData.data,h=r.rendLineNumberStart,d=r.lines,l=d.length,c=e.width,m=e.data,u=(i-t+1)*n*c*4;let g=-1,_=-1,p=-1,C=-1,f=-1,N=-1,b=0;for(let L=t;L<=i;L++){const e=L-t,i=L-h,s=i>=0&&i<l?d[i].dy:-1;if(-1===s){o[e]=!0,b+=n;continue}const r=s*c*4,D=(s+n)*c*4,S=b*c*4,v=(b+n)*c*4;C===r&&N===S?(C=D,N=v):(-1!==p&&(m.set(a.subarray(p,C),f),-1===g&&0===p&&p===f&&(g=C),-1===_&&C===u&&p===f&&(_=p)),p=r,C=D,f=S,N=v),o[e]=!1,b+=n}-1!==p&&(m.set(a.subarray(p,C),f),-1===g&&0===p&&p===f&&(g=C),-1===_&&C===u&&p===f&&(_=p));return[-1===g?-1:g/(4*c),-1===_?-1:_/(4*c),o]}static _renderLine(e,t,i,n,s,o,r,a,d,l,m,u,g){const _=m.content,p=m.tokens,C=e.width-s,f=1===g;let N=c.h,b=0,L=0;for(let c=0,D=p.getCount();c<D;c++){const m=p.getEndOffset(c),g=p.getForeground(c),D=o.getColor(g);for(;b<m;b++){if(N>C)return;const o=_.charCodeAt(b);if(9===o){const e=l-(b+L)%l;L+=e-1,N+=e*s}else if(32===o)N+=s;else{const l=h.D(o)?2:1;for(let h=0;h<l;h++)if(2===n?r.blockRenderChar(e,N,a+d,D,t,i,f):r.renderChar(e,N,a+d,o,D,t,u,i,f),N+=s,N>C)return}}}}}Object(C.f)((e,t)=>{const i=e.getColor(p.Cb);i&&t.addRule(`.monaco-editor .minimap > canvas { opacity: ${i.rgba.a}; will-change: opacity; }`);const n=e.getColor(p.Gb);n&&t.addRule(`.monaco-editor .minimap-slider .minimap-slider-horizontal { background: ${n}; }`);const s=e.getColor(p.Hb);s&&t.addRule(`.monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: ${s}; }`);const o=e.getColor(p.Fb);o&&t.addRule(`.monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: ${o}; }`);const r=e.getColor(p.Ub);r&&t.addRule(`.monaco-editor .minimap-shadow-visible { box-shadow: ${r} -6px 0 6px -6px inset; }`)})},3050:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));i(2854);var n=i(1957),s=i(1943),o=i(1976),r=i(1935),a=i(1936),h=i(2012),d=i(1967),l=i(1941),c=i(1933),m=i(2184);class u{constructor(e,t,i,n,s,o){this.top=e,this.left=t,this.width=i,this.height=n,this.textContent=s,this.textContentClassName=o}}class g{constructor(e){this._context=e;const t=this._context.configuration.options,i=t.get(40);this._cursorStyle=t.get(22),this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(25),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Object(n.b)(document.createElement("div")),this._domNode.setClassName("cursor "+m.a),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),h.a.applyFontInfo(this._domNode,i),this._domNode.setDisplay("none"),this._position=new l.a(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(40);return this._cursorStyle=t.get(22),this._lineHeight=t.get(56),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(25),this._typicalHalfwidthCharacterWidth),h.a.applyFontInfo(this._domNode,i),!0}onCursorPositionChanged(e){return this._position=e,!0}_prepareRender(e){let t="";if(this._cursorStyle===d.i.Line||this._cursorStyle===d.i.LineThin){const i=e.visibleRangeForPosition(this._position);if(!i||i.outsideRenderedLine)return null;let n;if(this._cursorStyle===d.i.Line){if(n=r.r(this._lineCursorWidth>0?this._lineCursorWidth:2),n>2){const e=this._context.model.getLineContent(this._position.lineNumber),i=a.K(e,this._position.column-1);t=e.substr(this._position.column-1,i)}}else n=r.r(1);let s=i.left;n>=2&&s>=1&&(s-=1);const o=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta;return new u(o,s,n,this._lineHeight,t,"")}const i=this._context.model.getLineContent(this._position.lineNumber),n=a.K(i,this._position.column-1),s=e.linesVisibleRangesForRange(new c.a(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column+n),!1);if(!s||0===s.length)return null;const o=s[0];if(o.outsideRenderedLine||0===o.ranges.length)return null;const h=o.ranges[0],l=h.width<1?this._typicalHalfwidthCharacterWidth:h.width;let m="";if(this._cursorStyle===d.i.Block){const e=this._context.model.getViewLineData(this._position.lineNumber);t=i.substr(this._position.column-1,n);const s=e.tokens.findTokenIndexAtOffset(this._position.column-1);m=e.tokens.getClassName(s)}let g=e.getVerticalOffsetForLineNumber(this._position.lineNumber)-e.bigNumbersDelta,_=this._lineHeight;return this._cursorStyle!==d.i.Underline&&this._cursorStyle!==d.i.UnderlineThin||(g+=this._lineHeight-2,_=2),new u(g,h.left,l,_,t,m)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${m.a} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}var _=i(1993),p=i(1944);class C extends o.b{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(78),this._cursorBlinking=t.get(20),this._cursorStyle=t.get(22),this._cursorSmoothCaretAnimation=t.get(21),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new g(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=Object(n.b)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new s.g,this._cursorFlatBlinkInterval=new s.c,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(78),this._cursorBlinking=t.get(20),this._cursorStyle=t.get(22),this._cursorSmoothCaretAnimation=t.get(21),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let i=0,n=this._secondaryCursors.length;i<n;i++)this._secondaryCursors[i].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t){if(this._primaryCursor.onCursorPositionChanged(e),this._updateBlinking(),this._secondaryCursors.length<t.length){const e=t.length-this._secondaryCursors.length;for(let t=0;t<e;t++){const e=new g(this._context);this._domNode.domNode.insertBefore(e.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(e)}}else if(this._secondaryCursors.length>t.length){const e=this._secondaryCursors.length-t.length;for(let t=0;t<e;t++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let i=0;i<t.length;i++)this._secondaryCursors[i].onCursorPositionChanged(t[i])}onCursorStateChanged(e){const t=[];for(let n=0,s=e.selections.length;n<s;n++)t[n]=e.selections[n].getPosition();this._onCursorPositionChanged(t[0],t.slice(1));const i=e.selections[0].isEmpty();return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=t=>{for(let i=0,n=e.ranges.length;i<n;i++)if(e.ranges[i].fromLineNumber<=t.lineNumber&&t.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const i of this._secondaryCursors)if(t(i.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=0===e,i=5===e;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),t||i||(1===e?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},C.BLINK_INTERVAL):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},C.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case d.i.Line:e+=" cursor-line-style";break;case d.i.Block:e+=" cursor-block-style";break;case d.i.Underline:e+=" cursor-underline-style";break;case d.i.LineThin:e+=" cursor-line-thin-style";break;case d.i.BlockOutline:e+=" cursor-block-outline-style";break;case d.i.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return this._cursorSmoothCaretAnimation&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],i=0;const n=this._primaryCursor.render(e);n&&(t[i++]=n);for(let s=0,o=this._secondaryCursors.length;s<o;s++){const n=this._secondaryCursors[s].render(e);n&&(t[i++]=n)}this._renderData=t}getLastRenderData(){return this._renderData}}C.BLINK_INTERVAL=500,Object(p.f)((e,t)=>{const i=e.getColor(_.f);if(i){let n=e.getColor(_.e);n||(n=i.opposite()),t.addRule(`.monaco-editor .cursors-layer .cursor { background-color: ${i}; border-color: ${i}; color: ${n}; }`),"hc"===e.type&&t.addRule(`.monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ${n}; border-right: 1px solid ${n}; }`)}})}}]);
//# sourceMappingURL=vendors~console-monaco~ge~monaco~5e1bc0de.41d38e97.chunk.js.map