(this["webpackJsonpcampus-app-v2"]=this["webpackJsonpcampus-app-v2"]||[]).push([[117],{1804:function(e,t,a){"use strict";a.r(t);a(2681);var n=a(3138),c=a(74),o=a(2121);var i=(e,t)=>({exerciseEntity:t,exerciseId:e,type:o.c}),r=a(2122),s=a(3024),l=a(2262),d=a(2687),u=a(2688),p=a(2689),b=a(2690),g=a(2691),m=a(2692),f=a(2693),y=a(2694),O=a(2695),h=a(2696),j=a(2697);const v=Object(n.a)({config:r.c,requireAuthenticatedUser:!1,sentryInstance:l.a,setExerciseEntity:i,store:j.a,translations:{de:{common:d,translation:u},en:{common:p,translation:b},es:{common:g,translation:m},fr:{common:f,translation:y},pt:{common:O,translation:h}},type:c.a.exercises.VIDEO_EXERCISE,validate:c.b.exerciseTypeVersionAdapter})(s.a);t.default=v},2121:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o}));const n="EXERCISE_ENTITY_UPDATED",c="AI_COACH_CONTENT_FETCH_STARTED",o="AI_COACH_CONTENT_FETCH_ENDED"},2261:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"g",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"h",(function(){return l})),a.d(t,"c",(function(){return d})),a.d(t,"i",(function(){return u})),a.d(t,"e",(function(){return p})),a.d(t,"d",(function(){return b})),a.d(t,"f",(function(){return g}));var n=a(14),c=a.n(n);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}const i="SET_PLAYBACK_RATE",r=e=>{let{playbackRate:t}=e;return{playbackRate:t,type:i}},s="SET_QUALITY",l=e=>{let{quality:t}=e;return{quality:t,type:s}},d="SET_SUBTITLE",u=e=>{let{selectedSubtitle:t}=e;return{selectedSubtitle:t,type:d}},p="TRANSCRIPT_FETCH_STARTED",b="TRANSCRIPT_FETCH_ENDED",g=e=>{let{exerciseId:t,projectorKey:a,projectorUrl:n}=e;return async(e,i)=>{var r;if(null==(null===(r=i().transcript[t])||void 0===r?void 0:r.slides)){e((e=>{let{exerciseId:t}=e;return{exerciseId:t,type:p}})({exerciseId:t}));const i=await fetch("".concat(n,"/api/videos/").concat(a,"/transcript"),{credentials:"include"}),r=await i.json();if(null==r)return;e((e=>{let{exerciseId:t,slides:a}=e;return{exerciseId:t,slides:a,type:b}})(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){c()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({exerciseId:t},r)))}}}},2683:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return i}));var n=a(1),c=a(2073);const o=e=>{const t=Object(n.useContext)(c.a);if(t.loading)return{flags:null,loading:!0};const{client:a,error:o}=t;return{error:o,flags:a.getFeatureFlags(e),loading:!1}},i=e=>{const t=Object(n.useContext)(c.a);if(t.loading)return{flag:null,loading:!0};if(""===e)return{flag:"excluded",loading:!1};const{client:a,error:o}=t;return{error:o,flag:a.getFeatureFlag(e),loading:!1}}},2686:function(e,t,a){},2980:function(e,t,a){"use strict";var n=a(2683),c=a(1),o=a.n(c),i=a(19),r=a(2261),s=a(26);const l=s.z.object({answer:s.z.string(),question:s.z.string()}),d=s.z.object({faqs:s.z.array(l),realLifeExample:s.z.string(),simpleExplanation:s.z.string(),videoSummary:s.z.string()});var u=a(2262),p=a(2121);const b=s.z.object({data:d,derivedCourseContentId:s.z.number()}),g=e=>{let{campusApiUrl:t,exerciseId:a,languageCode:n}=e;return async(e,c)=>{var o,i;const r=c().aiCoachContent;if(!("initial"===r.status||r.exerciseId!==a))return;e((e=>{let{exerciseId:t}=e;return{exerciseId:t,type:p.b}})({exerciseId:a}));const s=await fetch("".concat(t,"/api/exercise/").concat(a,"/aiCoachContent"),{credentials:"include",headers:{"x-dc-lang":n}}),l=await(async e=>{switch(e.ok||u.a.captureError(new Error("Failed to fetch AI Coach content: ".concat(e.statusText))),e.status){case 204:return null;case 200:{const t=await e.json(),a=b.safeParse(t);return a.success?{content:a.data.data,derivedCourseContentId:a.data.derivedCourseContentId}:(u.a.captureError(new Error("Failed to validate AI Coach content response: ".concat(JSON.stringify(a.error)))),null)}default:return u.a.captureError(new Error("Failed to fetch AI Coach content: ".concat(e.statusText))),null}})(s);e((e=>{let{content:t,derivedCourseContentId:a,exerciseId:n}=e;return{content:t,derivedCourseContentId:a,exerciseId:n,type:p.a}})({content:null!==(o=null===l||void 0===l?void 0:l.content)&&void 0!==o?o:null,derivedCourseContentId:null!==(i=null===l||void 0===l?void 0:l.derivedCourseContentId)&&void 0!==i?i:null,exerciseId:a}))}};var m=a(3028),f=a(183),y=a.n(f),O=a(31),h=a.n(O),j=a(70),v=a(1928),C=a(7),S=a.n(C),x=a(0),k=a(11),E=a(2376),I=a(2682),A=a(2684),P=a(2685),T=a(368),w=a(1884),L=a(1885),R=a(1886),D=(a(2686),a(147)),_=a(1742),U=a(5);const N=e=>{let{children:t,className:a,"data-testid":n,icon:c,onClose:o,title:i,visible:r}=e;const{t:s}=Object(k.e)();return Object(x.d)("div",{className:r?a:"dc-u-d-none","data-testid":n},Object(x.d)("div",{className:"dc-u-fx dc-u-fx-jcsb dc-u-fx-aic dc-u-ph-12",css:Object(x.c)({backgroundColor:U.a.colors.grey},"","")},Object(x.d)("div",{className:"dc-u-fx dc-u-fx-jcs dc-u-fx-aic"},c,Object(x.d)("strong",{className:"dc-u-fs-h4 dc-u-ls-0 dc-u-pv-8 dc-u-mh-8"},i)),Object(x.d)(D.a,{"aria-label":s("common:close"),"data-testid":"side-panel-close-button-".concat(n),"data-trackid":"side-panel-close-button-".concat(n),icon:Object(x.d)(_.a,null),onClick:o,size:"small",style:{backgroundColor:"transparent",color:U.a.colors.navy},variant:"plain"})),Object(x.d)("div",{className:"side-panel-body"},t))};var q=a(14),z=a.n(q),F=a(250),H=a(1743),M=a(523);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){z()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const K={alignItems:"end",display:"flex",flexGrow:1,gap:U.a.spacing.small,marginBlock:U.a.spacing.medium,marginInlineStart:U.a.spacing.small};var W=e=>{let{campusApiUrl:t,contentType:a,derivedCourseContentId:n}=e;const{i18n:{language:o},t:i}=Object(k.e)(["translation","common"]),[r,s]=Object(c.useState)({}),l=async e=>{s(B(B({},r),{},{[a]:!0})),await async function(e){let{aiCoachContentProperty:t,campusApiUrl:a,derivedCourseContentId:n,isHelpful:c,language:o}=e;await fetch("".concat(a,"/api/derivedCourseContent/").concat(n,"/rate"),{body:JSON.stringify({aiCoachContentProperty:t,isHelpful:c}),credentials:"include",headers:{"Content-Type":"application/json","x-dc-lang":o},method:"POST"})}({aiCoachContentProperty:a,campusApiUrl:t,derivedCourseContentId:n,isHelpful:e,language:o})};return r[a]?Object(x.d)("div",{css:K},Object(x.d)(F.a,{ratedMessage:i("AiCoach.thanksForFeedbackMessage")})):Object(x.d)("div",{style:K},Object(x.d)("div",{style:{alignItems:"center",display:"flex",flexDirection:"row",flexGrow:1,justifyContent:"space-between"}},Object(x.d)(M.a,{style:{marginBlock:U.a.spacing.small,marginInline:0}},i("AiCoach.feedbackMessage")),Object(x.d)("div",null,Object(x.d)(D.a,{"aria-label":"Yes",css:Object(x.c)({border:"none",fontSize:U.a.fontSizes.medium,fontWeight:U.a.fontWeights.bold,textTransform:"capitalize"},"",""),"data-cy":"ai-coach-".concat(a,"-positive-rate-button"),"data-trackid":"ai-coach-".concat(a,"-positive-rate-button"),onClick:()=>l(!0),size:"medium"},Object(x.d)(H.a,{size:"medium"}),i("common:yes")),Object(x.d)(D.a,{"aria-label":"No",css:Object(x.c)({border:"none",fontSize:U.a.fontSizes.medium,fontWeight:U.a.fontWeights.bold,textTransform:"capitalize"},"",""),"data-cy":"ai-coach-".concat(a,"-negative-rate-button"),"data-trackid":"ai-coach-".concat(a,"-negative-rate-button"),onClick:()=>l(!1),size:"medium"},Object(x.d)(_.a,{color:U.a.colors.red,size:"medium"}),i("common:no")))))};function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){z()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const G={alignItems:"start",borderRadius:S.a.borderRadius.medium,cursor:"pointer",fontWeight:S.a.fontWeights.bold,padding:12},J=Y(Y({},G),{},{backgroundColor:S.a.colors.white,borderColor:S.a.colors.blue,boxShadow:S.a.boxShadow.medium}),X=Y(Y({},G),{},{backgroundColor:S.a.colors.greySubtle}),Z=e=>{let{active:t,"data-testid":a,"data-trackid":n,onClick:c,text:o}=e;return Object(x.d)(D.a,{css:t?J:X,"data-testid":a,"data-trackid":n,onClick:c,size:"medium"},o)};const $={faq:"\u2753",realLifeExample:"\ud83d\udc69\u200d\ud83d\udd2c",simpleExplanation:"\ud83e\udd13",videoSummary:"\ud83d\udcfa"},ee={marginBlock:S.a.spacing.medium,overflow:"unset",whiteSpace:"pre-wrap"},te={fontSize:S.a.fontSizes.large,lineHeight:S.a.lineHeights.relaxed};var ae={name:"1544thh",styles:"display:flex;flex-direction:column;height:100%;overflow-y:scroll"};const ne=e=>{let{campusApiUrl:t,content:a,derivedCourseContentId:n,onClose:i,visible:r}=e;const{t:s}=Object(k.e)(),[l,d]=Object(c.useState)(null),[u,p]=Object(c.useState)(0),b=Object(c.useRef)(null),g=()=>{b.current&&(b.current.scrollTop=0)};return Object(x.d)(N,{className:"side-panel-container-ai-coach","data-testid":"ai-coach",icon:Object(x.d)(w.a,{size:"medium"}),onClose:i,title:s("AiCoach.title"),visible:r},Object(x.d)("div",{css:Object(x.c)({display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between",paddingBlock:S.a.spacing.small},"","")},Object(x.d)("div",{css:ae,ref:b},null!=l?Object(x.d)(o.a.Fragment,null,"faqs"===l?Object(x.d)(L.a,{as:"h2",css:ee,size:650},s("AiCoach.Menu.faq")," - ",a.faqs[u].question):Object(x.d)(L.a,{as:"h2",css:ee,size:650},s("AiCoach.Menu.".concat(l))),Object(x.d)(T.a,{markdown:"faqs"===l?a.faqs[u].answer:a[l],paragraphStyles:te,theme:"LIGHT",ulStyles:te}),Object(x.d)(W,{campusApiUrl:t,contentType:"faqs"===l?"faq-".concat(u):l,derivedCourseContentId:n})):Object(x.d)(o.a.Fragment,null,Object(x.d)(L.a,{as:"h2",css:ee,size:650},s("AiCoach.introHeading")),Object(x.d)(R.a,{css:te},s("AiCoach.intro")),Object(x.d)(R.a,{css:te},s("AiCoach.callToAction")))),Object(x.d)("div",{css:Object(x.c)({"::before":{background:"linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 1))",content:'""',height:"20px",left:0,position:"absolute",top:"-20px",width:"100%",zIndex:1e3},display:"flex",flexDirection:"column",gap:S.a.spacing.xsmall,position:"relative"},"","")},["videoSummary","realLifeExample","simpleExplanation"].map(e=>Object(x.d)(Z,{active:l===e,"data-testid":"ai-coach-menu-item-".concat(e),"data-trackid":"ai-coach-".concat(e),key:e,onClick:()=>{d(e),g()},text:"".concat($[e]," ").concat(s("AiCoach.Menu.".concat(e)))})),a.faqs.map((e,t)=>Object(x.d)(Z,{active:"faqs"===l&&u===t,"data-testid":"ai-coach-menu-item-faq-".concat(t),"data-trackid":"ai-coach-menu-item-faq-".concat(t),key:"faq-".concat(t),onClick:()=>{p(t),d("faqs"),g()},text:"".concat($.faq," ").concat(s("AiCoach.Menu.faq")," - ").concat(e.question)})))))};var ce=a(1836),oe=a(1893);const ie=Object.freeze([13785,14251,14269,14273,14482,14487,14531,14538,14539,15033,15606,15610,15613,15618,15625,15627,15628,15629,15656,15671,15675,15698,38902,38908,38916,38949,38951,38954,38960,40255,40256,40257,40258,40261,38855,38863,38866,38871,38875,38880,38884,38889,38894,38900,40260,46760,42778,42789]);var re={name:"cjhhha",styles:"margin-bottom:0;margin-top:0"};var se=e=>{let{exerciseId:t,hasActiveSubscription:a}=e;const{t:n}=Object(k.e)(),c=a&&ie.includes(t),{isAboveMedium:o}=Object(ce.a)();return c?Object(x.d)("div",{className:"dc-u-fx dc-u-fx-jcfs dc-u-fx-aic dc-u-mr-auto"},Object(x.d)(oe.a,{color:U.a.colors.blue,css:Object(x.c)({marginInline:U.a.spacing.small},"",""),size:"medium"}),o&&Object(x.d)("p",{className:"dc-u-fs-base",css:re},n("AvailableOnMobile.text"))):null},le=a(3102);function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(Object(a),!0).forEach((function(t){z()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const pe=e=>e.toString().padStart(2,"0").slice(0,2),be=e=>{const t=Math.floor(e/60),a=Math.floor(e%60),n=pe(t),c=pe(a);return"".concat(n,":").concat(c)};var ge={name:"f1lufm",styles:"align-items:center;display:flex;flex-direction:row;justify-content:space-between"},me={name:"j51x1x",styles:"font-size:16px;padding-top:4px"},fe={name:"cs1ygt",styles:"border-radius:4px;font-size:10px;font-weight:800;margin:4px;padding-left:4px;padding-right:4px"},ye={name:"rp7i7u",styles:"font-size:16px;margin:0"},Oe={name:"1qb0mst",styles:"list-style-type:none;padding:0"};var he=o.a.forwardRef((e,t)=>{let{active:a,duration:n,nextSlideStartsAt:c=0,setSelectedProgress:o,slide:i}=e;const r=i.startsAtTimestamp*n,s=(c||1)*n,l=be(r),d=be(s);return Object(x.d)("div",{css:Object(x.c)(ue({":hover":{backgroundColor:"#F7F7FC",time:{backgroundColor:"#5EB1FF"}},borderLeft:"4px solid transparent",borderRadius:4,cursor:"pointer",marginBottom:8,marginTop:8,paddingBottom:8,paddingLeft:16,paddingRight:8,paddingTop:8,scrollMarginTop:8,time:{backgroundColor:"#E1E1E8"}},a?{backgroundColor:"#F7F7FC",borderLeft:"4px solid #5EB1FF",time:{backgroundColor:"#5EB1FF"}}:{}),"",""),"data-trackid":"transcript-slide",onClick:()=>{o(i.startsAtTimestamp)},ref:t},Object(x.d)("div",{css:ge},Object(x.d)(L.a,{as:"h2",css:me,size:400},"".concat(i.number,". ").concat(i.title)),Object(x.d)("time",{css:fe},l," - ",d)),Object(x.d)("p",{css:ye},i.script),i.citations&&i.citations.length>0&&Object(x.d)("ol",{css:Oe},i.citations.map((e,t)=>Object(x.d)("li",{key:t},Object(x.d)("sup",null,t+1)," ",e))))});var je=e=>{let{activeSlideIndex:t,duration:a,onClose:n,setSelectedProgress:o,slides:i,visible:r}=e;const s=Object(c.useRef)([]),{t:l}=Object(k.e)(),d=e=>t=>{s.current[e]=t};return Object(c.useEffect)(()=>{var e;s.current[t]&&(null===(e=s.current[t])||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"}))},[t]),Object(x.d)(N,{className:"side-panel-container-dynamic-transcript","data-testid":"dynamic-transcript",icon:Object(x.d)(le.a,{size:"medium"}),onClose:n,title:l("Transcript.title"),visible:r},i.map((e,n)=>{var c;return Object(x.d)(he,{active:e.number===t+1,duration:a,key:e.number,nextSlideStartsAt:null===(c=i[n+1])||void 0===c?void 0:c.startsAtTimestamp,ref:d(n),setSelectedProgress:o,slide:e})}))},ve=a(2263);const Ce=e=>{let{activeSidePanel:t,aiCoachContent:a,className:n,isAiCoachEnabled:c,isTranscriptEnabled:o,isTranscriptLoading:i,isUserGroupSettingsLoading:r,togglePanel:s}=e;const{t:l}=Object(k.e)(),{isAboveSmall:d}=Object(ce.a)(),u=l("TRANSCRIPT"===t?"VideoExercise.hideTranscriptButton":"VideoExercise.showTranscriptButton"),p=l("AI_COACH"===t?"VideoExercise.hideAiCoachButton":"VideoExercise.showAiCoachButton"),b="fetching"===a.status,g=i||b||r,m="fetched"===a.status&&null!==a.content,f=c&&m;return Object(x.d)("div",{className:n,css:Object(x.c)("display:flex;flex-direction:row;gap:",U.a.spacing.small,";","")},f&&Object(x.d)(D.a,{"aria-label":p,"data-cy":"ai-coach-button","data-testid":"ai-coach-button","data-trackid":"ai-coach-button-".concat("AI_COACH"===t?"hide":"show"),iconLeft:Object(x.d)(ve.a,null),isLoading:g,onClick:()=>s("AI_COACH"),variant:"AI_COACH"===t?"regular":"regularOutline"},d?p:l("VideoExercise.aiCoachButton")),o&&Object(x.d)(D.a,{"aria-label":u,"data-cy":"transcript-button","data-testid":"dynamic-transcript-button","data-trackid":"dynamic-transcript-button-".concat("TRANSCRIPT"===t?"hide":"show"),isLoading:g,onClick:()=>s("TRANSCRIPT"),variant:"TRANSCRIPT"===t?"regular":"regularOutline"},d?u:l("VideoExercise.transcriptButton")))};var Se=a(121),xe=a.n(Se),ke=a(45),Ee=a.n(ke);const Ie=["0.5","0.75","1","1.25","1.5","2"];class Ae extends o.a.Component{constructor(){super(...arguments),z()(this,"iframe",o.a.createRef()),z()(this,"handlePostMessage",e=>{const{onEnd:t,onFullScreen:a,onSetPlaybackRate:n,onSetPlaying:c,onSetQuality:o,onSetSubtitle:i,onSetVolume:r,onTimeUpdate:s,onVideoDownloaded:l,playing:d,projectorUrl:u,setDuration:p,trackPlayerEvent:b}=this.props;if(e.origin===u)switch(e.data.type){case"END_PLAYBACK":t();break;case"UPDATE_TIME":null!=s&&s({duration:e.data.duration,time:e.data.time}),d||this.pause();break;case"UPDATE_RATE":n(e.data.rate.slice(0,-1));break;case"UPDATE_QUALITY":o(e.data.quality);break;case"VIDEO_PLAYING":c(e.data.playing);break;case"UPDATE_SUBTITLES":i(e.data.language);break;case"UPDATE_VOLUME":r(e.data.volume);break;case"VIDEO_DOWNLOADED":l();break;case"VIDEO_FULL_SCREEN":a();break;case"VIDEO_DURATION":p(e.data.duration);break;case"TRACK_STRUCT_EVENT":b({action:e.data.action,category:"projector",label:e.data.label,property:e.data.property,value:e.data.value})}})}componentDidMount(){this.setIframeSrc(),window.removeEventListener("message",this.handlePostMessage),window.addEventListener("message",this.handlePostMessage)}componentDidUpdate(e){const{hlsLink:t,mp4Link:a,playing:n,projectorKey:c,selectedProgress:o}=this.props;c!==e.projectorKey||a!==e.mp4Link||t!==e.hlsLink?this.setIframeSrc():y()(o)?(this.setProgress(o),this.props.setSelectedProgress(void 0)):n?this.play():this.pause()}componentWillUnmount(){window.removeEventListener("message",this.handlePostMessage)}setIframeSrc(){const{hlsLink:e,mp4Link:t,playbackRate:a,playing:n,projectorKey:c,projectorUrl:o,quality:i,selectedSubtitle:r}=this.props,s=this.iframe.current;null!=s&&(s.src=(e=>{let{hlsLink:t,mp4Link:a,playbackRate:n,playing:c,projectorKey:o,projectorUrl:i,quality:r,subtitleLanguage:s}=e,l="".concat(i,"/?auto_play=").concat(c?"play":"pause");return h()(o)||(l="".concat(l,"&projector_key=").concat(o)),h()(t)?h()(a)||(l="".concat(l,"&video_link=").concat(a)):l="".concat(l,"&video_hls=").concat(t),h()(n)||(l="".concat(l,"&playback_rate=").concat(n)),h()(r)||(l="".concat(l,"&quality=").concat(r)),s&&(l="".concat(l,"&subtitles=").concat(s)),l})({hlsLink:e,mp4Link:t,playbackRate:a,playing:n,projectorKey:c,projectorUrl:o,quality:i,subtitleLanguage:r}))}play(){var e;const t=null===(e=this.iframe.current)||void 0===e?void 0:e.contentWindow;null!=t&&t.postMessage({type:"PLAY_VIDEO"},"*")}pause(){var e;const t=null===(e=this.iframe.current)||void 0===e?void 0:e.contentWindow;null!=t&&t.postMessage({type:"PAUSE_VIDEO"},"*")}setProgress(e){var t;const a=null===(t=this.iframe.current)||void 0===t?void 0:t.contentWindow;null!=a&&a.postMessage({progress:e,type:"SEEK_VIDEO"},"*")}render(){const{extraClass:e,height:t,title:a,width:n}=this.props;return Object(x.d)("iframe",{allowFullScreen:!0,className:Ee()(e,"dc-u-b-none"),ref:this.iframe,style:{height:t,width:n},title:a})}}z()(Ae,"defaultProps",{extraClass:"",height:"428px",hlsLink:void 0,mp4Link:void 0,onEnd:xe.a,onFullScreen:xe.a,onSetPlaybackRate:xe.a,onSetPlaying:xe.a,onSetQuality:xe.a,onSetSubtitle:xe.a,onSetVolume:xe.a,onTimeUpdate:xe.a,onVideoDownloaded:xe.a,playbackRate:void 0,playing:!1,projectorKey:void 0,projectorUrl:"",quality:void 0,selectedProgress:void 0,selectedSubtitle:void 0,setDuration:xe.a,setSelectedProgress:xe.a,title:"video exercise",trackPlayerEvent:xe.a,width:"760px"});var Pe=Ae;var Te=e=>{var t;let{aiCoachContent:a,assignment:n,campusApiUrl:o,environment:i,hasActiveSubscription:r,id:s,isActive:l,isLoggedIn:d,onComplete:u,onSetPlaybackRate:p,onSetQuality:b,onSetSubtitle:g,playbackRate:m,projectorKey:f,projectorUrl:O,quality:S,setIsComplete:T,setShouldPlay:w,shouldPlay:L,subtitleLanguage:R,title:D,trackPlayerEvent:_,transcriptToShow:U,userId:N,videoHls:q,videoLink:z,xp:F}=e;const{i18n:{language:H},t:M}=Object(k.e)(),[V,B]=Object(c.useState)(void 0),[K,W]=Object(c.useState)(0),[Q,Y]=Object(c.useState)(0),G=Object(c.useCallback)(e=>{T(!1),w(e)},[T,w]),J=Object(P.a)({environment:i,userId:N}),X="fetched"===a.status&&null!=a.content,Z=Object(I.a)({hasAiCoachContent:X,isLoggedIn:d,userGroupSettings:J}),$="fetching"===a.status,ee="fetching"===(null===U||void 0===U?void 0:U.status),{activeSidePanel:te,togglePanel:ae}=Object(A.a)({exerciseId:s,isAiCoachEnabled:Z,isAiCoachLoading:$,isLoggedIn:d,onSetPlaying:G}),ce=e=>{var t;let{time:a}=e;if(!(null===U||void 0===U||null===(t=U.slides)||void 0===t?void 0:t.length))return;let n=U.slides.findIndex(e=>e.startsAtTimestamp-1e-4>a);-1===n&&(n=U.slides.length);const c=n-1;c!==K&&W(c)};Object(c.useEffect)(()=>{y()(V)&&ce({time:V})},[V]);const oe=M("VideoExercise.primaryButton"),ie=H===E.a,re=null!=f&&ie;return Object(x.d)("section",{className:"video-exercise ".concat("AI_COACH"===te?"ai-coach-active":""),"data-cy":"video-exercise-container"},Object(x.d)("div",{className:"video-container"},Object(x.d)("header",{className:"dc-u-mb-16"},Object(x.d)("div",{className:"dc-u-fx dc-u-fx-jcsb dc-u-fx-aic"},Object(x.d)("h1",{className:"dc-u-fs-h4 dc-u-ls-0"},D),y()(F)&&Object(x.d)(v.a,{color:C.colors.yellow,size:"large"},"".concat(F," XP")))),Object(x.d)("div",{className:"video dc-u-pos-relative dc-u-brad-all dc-u-bs-md"},h()(f)&&h()(q)&&!h()(z)?Object(x.d)("iframe",{allowFullScreen:!0,className:"dc-u-stretch",height:"100%",src:z,title:"".concat(D," video"),width:"100%"}):Object(x.d)(Pe,{extraClass:"dc-u-stretch",height:"100%",hlsLink:q,mp4Link:z,onEnd:u,onSetPlaybackRate:e=>{-1!==Ie.indexOf(e)&&p({playbackRate:e})},onSetPlaying:G,onSetQuality:e=>b({quality:e}),onSetSubtitle:e=>g({selectedSubtitle:e}),onTimeUpdate:ce,playbackRate:m,playing:L&&l,projectorKey:f,projectorUrl:O,quality:S,selectedProgress:V,selectedSubtitle:R,setDuration:Y,setSelectedProgress:B,title:"".concat(D," video"),trackPlayerEvent:_,width:"100%"})),n?Object(x.d)("p",{dangerouslySetInnerHTML:{__html:n}}):null,Object(x.d)("div",{className:"dc-u-fx dc-u-fx-jcfe dc-u-mt-16"},Object(x.d)(Ce,{activeSidePanel:te,aiCoachContent:a,className:"dc-u-mr-auto",isAiCoachEnabled:Z,isTranscriptEnabled:re,isTranscriptLoading:ee,isUserGroupSettingsLoading:"loading"===J.type,togglePanel:ae}),Object(x.d)(se,{exerciseId:s,hasActiveSubscription:r}),Object(x.d)(j.f,{appearance:"primary",dataAttributes:{cy:"submit-button"},intent:"success",onClick:u},oe))),(null===U||void 0===U||null===(t=U.slides)||void 0===t?void 0:t.length)&&ie&&Object(x.d)(je,{activeSlideIndex:K,duration:Q,onClose:()=>{ae("TRANSCRIPT")},setSelectedProgress:B,slides:U.slides,visible:"TRANSCRIPT"===te}),Z&&"fetched"===a.status&&null!=a.content&&null!=a.derivedCourseContentId&&Object(x.d)(ne,{campusApiUrl:o,content:a.content,derivedCourseContentId:a.derivedCourseContentId,onClose:()=>{ae("AI_COACH")},visible:"AI_COACH"===te}))};const we=[34814,34856,34842,34442,34849,34850,36924,38866,37237,38444,36779,36775,36928,36772,36753,36951,36931,36944,36949,37901,39187,38380,39120,38144,38563,38890,38375,36934,36939,37206,36937,37055,36961,36554,36926,36930,37694,37722,37739,37727,37741,37745],Le=Object(i.c)(e=>({aiCoachContent:e.aiCoachContent,playbackRate:e.globalSettings.playbackRate,quality:e.globalSettings.quality,selectedSubtitle:e.globalSettings.selectedSubtitle,transcript:e.transcript}),e=>({loadAiCoachContent:t=>{let{campusApiUrl:a,exerciseId:n,languageCode:c}=t;e(g({campusApiUrl:a,exerciseId:n,languageCode:c}))},onLoadTranscript:t=>{let{exerciseId:a,projectorKey:n,projectorUrl:c}=t;e(Object(r.f)({exerciseId:a,projectorKey:n,projectorUrl:c}))},onSetPlaybackRate:t=>{let{playbackRate:a}=t;e(Object(r.g)({playbackRate:a}))},onSetQuality:t=>{let{quality:a}=t;e(Object(r.h)({quality:a}))},onSetSubtitle:t=>{let{selectedSubtitle:a}=t;e(Object(r.i)({selectedSubtitle:a}))}})),Re=e=>{var t;let{aiCoachContent:a,campusApiUrl:o,environment:i,exercise:{assignment:r,id:s,projectorKey:l,title:d,videoHls:u,videoLink:p,xp:b},hasActiveSubscription:g,isActive:f,isLoggedIn:y,language:O,loadAiCoachContent:h,onComplete:j,onLoadTranscript:v,onSetPlaybackRate:C,onSetQuality:S,onSetSubtitle:k,playbackRate:E,projectorUrl:I,quality:A,selectedSubtitle:P,setIsComplete:T,trackPlayerEvent:w,transcript:L,userId:R}=e;const[D,_]=Object(c.useState)(!1),U=null===l||void 0===l?void 0:l.split("_")[1],N="on"===(null!==(t=Object(n.a)("ts--campus-api-use-translated-projector-key").flag)&&void 0!==t?t:"off")&&void 0!==U&&we.includes(parseInt(U,10)),q=Object(m.a)({onSetSubtitle:k,selectedSubtitle:P,userLanguage:O});Object(c.useEffect)(()=>{y&&h({campusApiUrl:o,exerciseId:s,languageCode:O})},[s,O,h,y,o]),Object(c.useEffect)(()=>{null!=l&&v({exerciseId:s,projectorKey:l,projectorUrl:I})},[s,l,I,v]);const z=L[s];return Object(x.d)(Te,{aiCoachContent:a,assignment:r,campusApiUrl:o,environment:i,hasActiveSubscription:g,id:s,isActive:f,isLoggedIn:y,onComplete:j,onSetPlaybackRate:C,onSetQuality:S,onSetSubtitle:k,playbackRate:E,projectorKey:l,projectorUrl:I,quality:A,setIsComplete:T,setShouldPlay:_,shouldPlay:D,subtitleLanguage:N?"none":q,title:d,trackPlayerEvent:w,transcriptToShow:z,userId:R,videoHls:u,videoLink:p,xp:b})};t.a=Le(Re)}}]);
//# sourceMappingURL=vendors~ve~cfba5e8d.cea7316a.chunk.js.map