(this["webpackJsonpcampus-app-v2"]=this["webpackJsonpcampus-app-v2"]||[]).push([[49],{129:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return d}));var r=n(8);const a=e=>e.getIn(["chapter","current"])||Object(r.Map)(),s=e=>a(e).get("title"),o=e=>a(e).get("number"),c=e=>a(e).get("id"),i=e=>e.getIn(["chapter","window"],Object(r.Map)()),u=e=>e.getIn(["chapter","firstTimeCompletedChapters"])||Object(r.Map)(),d=e=>a(e).get("is_last_chapter")},140:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>e.get("learningMode")},153:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));const r={FAILED:"FAILED",SUCCESS:"SUCCESS",NOT_FETCHED:"NOT_FETCHED"},a=e=>e.get("preFetchedData")},190:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return i})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"j",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return h}));var r=n(8),a=n(25);const s=()=>{},o={COURSE_OUTLINE:{code:"course_outline"},KEYBOARD_SHORTCUTS:{code:"keyboard_shortcuts"},ISSUE_REPORTER:{code:"issue_reporter"},IFRAME:{code:"iframe"},FEEDBACK_REPORTER:{code:"feedback_reporter"},LOGIN:{code:"login",onExit:s},SLIDES:{code:"slides"},COURSE_NOTES:{code:"course_notes"},LTI_FAILURE:{code:"ltiFailure",onExit:s},CHAPTER_RATING:{code:"chapter-rating",onExit:s},MOBILE_POPUP:{code:"mobile-popup"},VIDEO:{code:"video"},GUIDES:{code:"guides"},DOWNLOAD_DATASETS:{code:"download_datasets"},SCREEN_LARGER:{code:"screen_larger"},INTERACT_WITH_FLOATING_PANE:{code:"interact_with_floating_pane"},REFERENCE_MATERIAL:{code:"reference_material"},LOADING_WORKBOOKS:{code:"loading_workbooks"},DASHBOARD_SURVEY:{code:"dashboard_survey"},SHOW_LEARN_RECAP:{code:"show_learn_recap"},SHOW_OR_SKIP_RECAP:{code:"show_or_skip_recap"},ARCHIVED_RESOURCE:{code:"archived_resource"},COURSE_REVIEW:{code:"course_review",onExit:s}},c={NO_MODAL:"NO_MODAL",WAFFLES_DIALOG:"WAFFLES_DIALOG"},i=e=>e.get("settings")||Object(r.Map)(),u=e=>i(e).get("shortcutsUsage",0),d=e=>i(e).get("shouldCloseShortcutFrame",!1),l=e=>i(e).get("modal")||Object(r.Map)(),p=e=>i(e).get("shouldStopBackendManager")||!1,g=Object(a.createSelector)(i,e=>e.get("uiTheme")),b=Object(a.createSelector)(g,e=>"DARK"===e),f=Object(a.createSelector)(b,e=>!e),m=Object(a.createSelector)(i,e=>e.get("feedbackRatingStatus")),h=Object(a.createSelector)(i,e=>e.get("mobileView"))},2:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"o",(function(){return r.f})),n.d(t,"p",(function(){return r.g})),n.d(t,"m",(function(){return r.e})),n.d(t,"k",(function(){return r.c})),n.d(t,"j",(function(){return r.b})),n.d(t,"l",(function(){return r.d})),n.d(t,"Rc",(function(){return r.h})),n.d(t,"Mb",(function(){return a})),n.d(t,"c",(function(){return s.b})),n.d(t,"b",(function(){return s.a})),n.d(t,"lb",(function(){return s.d})),n.d(t,"mb",(function(){return s.e})),n.d(t,"kb",(function(){return s.c})),n.d(t,"u",(function(){return o.a})),n.d(t,"x",(function(){return o.d})),n.d(t,"w",(function(){return o.c})),n.d(t,"v",(function(){return o.b})),n.d(t,"y",(function(){return o.e})),n.d(t,"qb",(function(){return o.g})),n.d(t,"F",(function(){return c.b})),n.d(t,"H",(function(){return c.e})),n.d(t,"Cb",(function(){return c.i})),n.d(t,"ec",(function(){return c.k})),n.d(t,"gc",(function(){return c.l})),n.d(t,"Cc",(function(){return c.p})),n.d(t,"Bc",(function(){return c.o})),n.d(t,"Dc",(function(){return c.q})),n.d(t,"G",(function(){return c.c})),n.d(t,"J",(function(){return c.g})),n.d(t,"I",(function(){return c.f})),n.d(t,"kc",(function(){return c.m})),n.d(t,"lc",(function(){return c.n})),n.d(t,"Nc",(function(){return c.r})),n.d(t,"yb",(function(){return c.h})),n.d(t,"bc",(function(){return c.j})),n.d(t,"P",(function(){return i.a})),n.d(t,"X",(function(){return u.r})),n.d(t,"Pb",(function(){return u.G})),n.d(t,"K",(function(){return u.i})),n.d(t,"Zb",(function(){return u.M})),n.d(t,"r",(function(){return u.e})),n.d(t,"f",(function(){return u.a})),n.d(t,"T",(function(){return u.n})),n.d(t,"S",(function(){return u.m})),n.d(t,"zc",(function(){return u.R})),n.d(t,"N",(function(){return u.l})),n.d(t,"L",(function(){return u.j})),n.d(t,"Rb",(function(){return u.I})),n.d(t,"Gc",(function(){return u.S})),n.d(t,"ab",(function(){return u.t})),n.d(t,"Y",(function(){return u.s})),n.d(t,"V",(function(){return u.p})),n.d(t,"cb",(function(){return u.u})),n.d(t,"Nb",(function(){return u.F})),n.d(t,"Db",(function(){return u.C})),n.d(t,"hc",(function(){return u.N})),n.d(t,"D",(function(){return u.h})),n.d(t,"db",(function(){return u.v})),n.d(t,"C",(function(){return u.g})),n.d(t,"Tb",(function(){return u.J})),n.d(t,"ib",(function(){return u.x})),n.d(t,"qc",(function(){return u.Q})),n.d(t,"n",(function(){return u.c})),n.d(t,"ob",(function(){return u.z})),n.d(t,"oc",(function(){return u.O})),n.d(t,"q",(function(){return u.d})),n.d(t,"Hb",(function(){return u.D})),n.d(t,"vb",(function(){return u.B})),n.d(t,"Qb",(function(){return u.H})),n.d(t,"W",(function(){return u.q})),n.d(t,"U",(function(){return u.o})),n.d(t,"pb",(function(){return u.A})),n.d(t,"Ib",(function(){return u.E})),n.d(t,"gb",(function(){return u.w})),n.d(t,"pc",(function(){return u.P})),n.d(t,"Wb",(function(){return u.L})),n.d(t,"jb",(function(){return u.y})),n.d(t,"i",(function(){return u.b})),n.d(t,"s",(function(){return u.f})),n.d(t,"M",(function(){return u.k})),n.d(t,"Qc",(function(){return u.U})),n.d(t,"Pc",(function(){return u.T})),n.d(t,"Xb",(function(){return b})),n.d(t,"Gb",(function(){return f})),n.d(t,"R",(function(){return m})),n.d(t,"cc",(function(){return h})),n.d(t,"ac",(function(){return O})),n.d(t,"dc",(function(){return S})),n.d(t,"Ob",(function(){return v})),n.d(t,"tb",(function(){return I})),n.d(t,"ub",(function(){return x})),n.d(t,"sb",(function(){return E})),n.d(t,"mc",(function(){return w})),n.d(t,"Ub",(function(){return _})),n.d(t,"wb",(function(){return C})),n.d(t,"Vb",(function(){return k})),n.d(t,"g",(function(){return R.a})),n.d(t,"Yb",(function(){return R.b})),n.d(t,"e",(function(){return M.b})),n.d(t,"d",(function(){return M.a})),n.d(t,"fc",(function(){return M.g})),n.d(t,"ic",(function(){return M.h})),n.d(t,"jc",(function(){return M.i})),n.d(t,"Kb",(function(){return M.f})),n.d(t,"nc",(function(){return M.j})),n.d(t,"rb",(function(){return M.d})),n.d(t,"bb",(function(){return M.c})),n.d(t,"Jb",(function(){return M.e})),n.d(t,"Q",(function(){return J})),n.d(t,"fb",(function(){return K})),n.d(t,"Ac",(function(){return W})),n.d(t,"h",(function(){return j.a})),n.d(t,"Fc",(function(){return j.j})),n.d(t,"Oc",(function(){return j.q})),n.d(t,"Hc",(function(){return j.k})),n.d(t,"zb",(function(){return j.e})),n.d(t,"Ab",(function(){return j.f})),n.d(t,"Bb",(function(){return j.g})),n.d(t,"Lb",(function(){return j.h})),n.d(t,"Mc",(function(){return j.p})),n.d(t,"Jc",(function(){return j.m})),n.d(t,"Kc",(function(){return j.n})),n.d(t,"Ic",(function(){return j.l})),n.d(t,"Lc",(function(){return j.o})),n.d(t,"Ec",(function(){return j.i})),n.d(t,"nb",(function(){return j.c})),n.d(t,"xb",(function(){return j.d})),n.d(t,"eb",(function(){return j.b})),n.d(t,"E",(function(){return X})),n.d(t,"Sc",(function(){return Q})),n.d(t,"xc",(function(){return ne})),n.d(t,"tc",(function(){return re})),n.d(t,"uc",(function(){return ae})),n.d(t,"sc",(function(){return se})),n.d(t,"wc",(function(){return oe})),n.d(t,"O",(function(){return ce})),n.d(t,"rc",(function(){return ie})),n.d(t,"vc",(function(){return ue})),n.d(t,"yc",(function(){return le})),n.d(t,"Eb",(function(){return g.a})),n.d(t,"Sb",(function(){return pe})),n.d(t,"Tc",(function(){return be})),n.d(t,"z",(function(){return fe})),n.d(t,"Z",(function(){return me})),n.d(t,"A",(function(){return he})),n.d(t,"B",(function(){return Oe})),n.d(t,"Fb",(function(){return Se})),n.d(t,"hb",(function(){return ye.a})),n.d(t,"t",(function(){return ve}));var r=n(254);const a=e=>{const t=(e=>e.get("backendSessionJsonRpc"))(e);return"loaded"===t.status?t.muxSessionManager:null};var s=n(209),o=n(129),c=n(85),i=n(214),u=n(56),d=n(8);var l=n(25),p=n(53),g=n(140);const b=e=>e.getIn(["location","language"]),f=e=>e.getIn(["location","current"]),m=e=>Number(e.getIn(["location","current","query","ex"],1)),h=e=>e.getIn(["location","current","query"])||Object(d.Map)(),O=e=>e.getIn(["location","before","query"])||Object(d.Map)(),S=e=>h(e).get("noFocus"),y=Object(l.createSelector)(f,m,g.a,(e,t,n)=>{const{chapterRef:r,courseRef:a}=Object(p.d)(e.get("pathname",""));return{courseRef:a,chapterRef:r,exerciseNumber:t,learningMode:n}}),v=Object(l.createSelector)(c.b,c.a,u.i,y,h,b,p.a),I=e=>Boolean(e.getIn(["mobilePopup","linkSending"])),x=e=>Boolean(e.getIn(["mobilePopup","linkSent"])),E=e=>Boolean(e.getIn(["mobilePopup","linkFailed"])),w=e=>Boolean(Object(c.b)(e).get("mobile_enabled"));var T=n(74),j=n(49);const _=e=>e.get("onboardingMilestones"),C=Object(l.createSelector)(j.e,j.q,_,u.q,g.a,(e,t,n,r,a)=>e&&!t.get("has_seen_campus_tour")&&"singleExercise"!==a&&n.isActive&&r!==T.a.exercises.VIDEO_EXERCISE&&n.step<4),k=e=>e.get("output").output;var R=n(153),M=n(190),N=n(164),P=n.n(N),A=n(356),D=n.n(A),F=n(503),U=n.n(F),L=n(10),H=n(32);const G=Object(l.createSelector)(u.m,o.a,c.b,c.o,(e,t,n,r)=>[e.get("title")||t.get("title")||n.get("title"),r||D()(n.get("programming_language"))].filter(P.a).join(" | ")),B=Object(l.createSelector)(u.m,o.a,c.b,(e,t,n)=>{const r=r=>e.get(r)||t.get(r)||n.get(r);return`Here is an example of ${U()(r("title"))}: ${U()(r("assignment")).split(".")[0]}.`}),J=Object(l.createSelector)(u.m,u.K,u.p,u.l,(e,t,n,r)=>t.map(t=>t.has("props")&&!t.get("props").has("resetCode")?t.setIn(["props","resetCode"],e.get("sample_code")):t).map(t=>{if(!t.has("props"))return t;const a=r.isEmpty()?n.get("last_attempt"):r.get("last_attempt"),s=!0===n.get("used_solution")&&a===e.get("solution")?e.get("sample_code"):a||e.get("sample_code");return t.updateIn(["props","code"],e=>null!==e?e:s)})),q=function(e,t){var n,r;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.a;if("fr"===a)return!1;const s=e.get("id"),o=e.get("lti_only"),c=e.get("should_cache",!0),i=null!=e.get("archived_at"),u=752===s,d=L.a.isProductionDomain(),l=null!==(n=null===(r=t[e.get("id")])||void 0===r?void 0:r.includes(a))&&void 0!==n&&n,p=(null!==a&&void 0!==a?a:H.a)===H.a;return!o&&c&&!i&&!u&&d&&(p||l)},K=Object(l.createSelector)(G,B,e=>e.getIn(["location","canonical"],null),c.b,g.a,b,e=>{var t;return null!==(t=e.getIn(["preFetchedData","translatedCourses","data"]))&&void 0!==t?t:{}},(e,t,n,r,a,s,o)=>({title:e,description:t,canonical:n,shouldBeIndexed:q(r,o,s),isSingleExerciseMode:"singleExercise"===a})),W=e=>e.get("systemStatus",Object(d.Map)()),X=(e,t)=>e.get("contentAuthorization")[t]||null;var z=n(314),V=n.n(z),Y=n(729);const Q=e=>{const t=Object(c.p)(e),n=Object(o.c)(e),r=Object(u.n)(e);return a=t,null!=Object(Y.a)(a)&&1===n&&r<7&&!(()=>{const e=V.a.get("lx-dashboard-survey"),t=Date.now();return void 0!==e&&e>t-2592e6})();var a};var $=n(376),Z=n.n($),ee=n(69),te=n(298);const ne=e=>e.get("streakInfo").type===ee.a.Known,re=e=>{const t=e.get("streakInfo");if(t.type!==ee.a.Unknown)return t.dailyXp},ae=e=>{const t=e.get("streakInfo");if(t.type!==ee.a.Unknown)return 1===t.version?t.lengthInDays:t.current.streak.days},se=e=>{const t=e.get("streakInfo");return t.type!==ee.a.Unknown&&t.streakGoalMetInSession},oe=e=>{const t=e.get("streakInfo");return t.type===ee.a.Unknown||2!==t.version?0:t.freezesAwardedInSession},ce=e=>{const t=e.get("streakInfo");return t.type!==ee.a.Unknown&&t.screenVisible},ie=e=>{const t=e.get("streakInfo");if(t.type!==ee.a.Unknown)return 1===t.version?te.a:t.streakGoal},ue=e=>{const t=e.get("streakInfo");if(t.type!==ee.a.Unknown)return 1===t.version?t.deadline:Date.parse(t.current.streak_deadline)},de=[{date:"2024-09-16",weekday:"Mon",status:"unmet"},{date:"2024-09-17",weekday:"Tue",status:"unmet"},{date:"2024-09-18",weekday:"Wed",status:"unmet"},{date:"2024-09-19",weekday:"Thu",status:"unmet"},{date:"2024-09-20",weekday:"Fri",status:"unmet"},{date:"2024-09-21",weekday:"Sat",status:"unmet"},{date:"2024-09-22",weekday:"Sun",status:"unmet"}],le=e=>{const t=e.get("streakInfo");if(t.type===ee.a.Unknown)return[];if(1===t.version){if(!(e=>{const t=e.get("streakInfo");return t.type!==ee.a.Unknown&&(1===t.version?t.dailyXp>=te.a:t.current.streak_goal_met)})(e))return de;const t=((new Date).getDay()-1+7)%7,n=Z()(de);return n[t].status="met",n}return t.current.streak_week_view},pe=e=>e.get("notes"),ge=Object(l.createSelector)(pe,e=>e.workspaceTemplate),be=Object(l.createSelector)(ge,e=>null!=e),fe=e=>e.get("codeExplanation"),me=Object(l.createSelector)(fe,e=>["initial","error"].includes(e.codeExplanation.type)),he=Object(l.createSelector)(c.g,c.i,j.p,u.y,u.L,u.P,(e,t,n,r,a,s)=>({courseTitle:e,language:t,userLanguage:n,instructions:r,pec:a,solution:s})),Oe=Object(l.createSelector)(u.m,e=>({exerciseId:e.get("id"),_tag:"campusUserExplanation"})),Se=e=>e.get("learningRecap");var ye=n(364);const ve=e=>e.getIn(["preFetchedData","categoryPages","data"])||[]},209:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n(25),a=n(10);const s={NONE:"NONE",BOOTING:"BOOTING",PRE_BOOTED:"PRE_BOOTED",BOOTED:"BOOTED"},o={COURSE_NOT_FOUND:"COURSE_NOT_FOUND",CHAPTER_NOT_FOUND:"CHAPTER_NOT_FOUND",LTI_NOT_ACTIVE:"LTI_NOT_ACTIVE",UNKNOWN_ROUTE:"UNKNOWN_ROUTE",UNKNOWN:"UNKNOWN"},c=e=>e.get("boot"),i=Object(r.createSelector)(c,e=>e.get("bootState")===s.BOOTED),u=Object(r.createSelector)(c,i,(e,t)=>t||e.get("bootState")===s.PRE_BOOTED),d=Object(r.createSelector)(c,u,i,(e,t,n)=>e.get("bootState")!==s.BOOTING&&(!n&&(!t||!a.a.isServerSideRendering)))},213:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(81);const a=e=>{let{course:t,exercise:n,images:a}=e;if(null==a)throw new Error("Images have not been fetched yet, should be done before starting session");const s=t.runtime_config;switch(a.type){case"notFound":return{image:void 0,runtimeConfig:s};case"singleImage":return{image:a.imageTag,runtimeConfig:s};case"multiImage":{if(null==n.exercise_image)return{image:a.imageNameToImageTag.default,runtimeConfig:s};const e=n.exercise_image;return{image:a.imageNameToImageTag[e],runtimeConfig:n.runtime_config}}default:return Object(r.a)(a)}}},214:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o}));const r=e=>e.get("datawarehouseSession"),a=e=>{const{status:t}=r(e);return"success"===t||"no-session"===t},s=e=>"loading"===r(e).status,o=e=>"error"===r(e).status},254:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"h",(function(){return l}));var r=n(214);const a={BUSY:{code:"busy",text:"Session Busy"},BROKEN:{code:"broken",text:"Session Broken"},READY:{code:"ready",text:"Workspace Ready"},NONE:{code:"none",text:""}},s=e=>e.get("backendSession"),o=e=>{var t;return null===(t=s(e))||void 0===t?void 0:t.status.code},c=e=>o(e)===a.READY.code&&Object(r.d)(e),i=e=>o(e)===a.BUSY.code||Object(r.c)(e),u=e=>o(e)===a.BROKEN.code||Object(r.b)(e),d=e=>{var t;return(null===(t=s(e))||void 0===t?void 0:t.isInitSession)||Object(r.c)(e)},l=e=>{var t;return null===(t=s(e))||void 0===t?void 0:t.sessionId}},298:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(69);const s={type:a.a.Unknown},o=(e,t)=>t?{version:1,streakGoalMetInSession:!1,screenVisible:!1,type:a.a.Known,dailyXp:t.daily_xp,lengthInDays:t.streak.days,createdAt:t.streak.created_at,incrementedAt:t.streak.last_incremented_at,deadline:Date.parse(t.streak_deadline)}:e,c=250,i=(e,t)=>{const n=e.dailyXp>=c,r=t.xpGained>=c,a=n?e.lengthInDays:0;return r?((e,t,n)=>{const r=n+1===5;return{...e,incrementedAt:new Date(t.currentTime||Date.now()).toISOString(),dailyXp:r?t.xpGained+0:t.xpGained,lengthInDays:n+1,streakGoalMetInSession:!0,deadline:e.deadline+864e5}})(e,t,a):((e,t,n)=>({...e,streakGoalMetInSession:!1,dailyXp:t.xpGained,lengthInDays:n,deadline:e.deadline+864e5}))(e,t,a)},u=(e,t)=>{if(t.currentTime>e.deadline)return i(e,t);const n=e.dailyXp+t.xpGained,r=e.dailyXp<c&&n>=c,a=r?e.lengthInDays+1:e.lengthInDays,s=4===e.lengthInDays&&5===a,o=r?new Date(t.currentTime||Date.now()).toISOString():e.incrementedAt;return{...e,streakGoalMetInSession:e.streakGoalMetInSession||r,incrementedAt:o,dailyXp:s?n+0:n,lengthInDays:a}};function d(e){return{...e,screenVisible:!0}}function l(e){return e.screenVisible?{...e,screenVisible:!1,streakGoalMetInSession:!1}:e}t.b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;if(t.type===r.h)return o(e,t.entities.streakInfo);if(e.type===a.a.Unknown||1!==e.version)return e;switch(t.type){case r.Ob:return o(e,t.data);case r.G:return u(e,t);case r.Fb:return d(e);case r.M:return l(e);default:return e}}},299:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n(8),a=n(4),s=n(2);const o=Object(r.Record)({status:s.g.NOT_FETCHED,data:null},"PreFetchedRequestRecord"),c=Object(r.Record)({chapter:new o({}),course:new o({}),exercises:new o({}),learningRecap:new o({}),sharedImage:new o({}),workspaceTemplate:new o({}),courseImages:new o({}),categoryPages:new o({}),translatedCourses:new o({})},"PreFetchedDataStateRecord"),i=new c({});t.c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.h:case a.g:return e.merge(Object(r.Map)(t.preFetchedData).filter((t,n)=>e.has(n)).map(e=>new o(e)));default:return e}}},364:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=e=>e.get("images")},377:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(8),a=n(10),s=n(4),o=n(2);const c=Object(r.Record)({bootState:o.c.NONE,error:null},"BootStateRecord"),i=new c({});t.b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.h:return e.update("bootState",()=>t.entities.course.lti_only&&a.a.isServerSideRendering?o.c.NONE:a.a.isServerSideRendering?o.c.PRE_BOOTED:o.c.BOOTED);case s.g:return e.set("bootState",o.c.BOOTED).set("error",t.error);default:return e}}},402:function(e,t,n){"use strict";n.d(t,"a",(function(){return kt}));var r=n(8),a=n(150),s=n.n(a),o=n(86),c=n.n(o),i=n(228),u=n(834),d=n(193),l=n(524),p=n(10),g=n(835),b=n(836),f=n(4),m=n(2);const h={status:m.a.NONE,lastSubmittedCode:void 0,lastSubmittedCommand:void 0,isInitSession:!1,message:null,sessionId:void 0},O=(e,t,n)=>{const r=e.status.code===m.a.NONE.code&&t.code===m.a.BUSY.code;return{...e,isInitSession:r,status:{...t,statusCode:n}}},S=e=>{switch(e){case"broken":return m.a.BROKEN;case"busy":return m.a.BUSY;case"none":return m.a.NONE;case"ready":return m.a.READY;default:return Object(b.a)(e,m.a.NONE)}};const y={status:"initial"};var v=n(377),I=n(123),x=n.n(I);const E=(e,t)=>e.chapterRef===t.get("slug")||Number(e.chapterRef)===Number(t.get("id"));const w={codeExplanation:{type:"initial"}};const T={};var j=n(37),_=n.n(j);const C=(e,t)=>e.findIndex(e=>t===e.get("slug")||Number(t)===Number(e.get("id"))),k=Object(r.Map)();const R={status:"initial"};var M=n(31),N=n.n(M),P=n(50),A=n.n(P),D=n(130),F=n(84),U=n.n(F),L=n(35),H=n.n(L),G=n(183),B=n.n(G),J=n(186),q=n.n(J),K=n(76),W=n(1914),X=n(504);const z=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.get("lastRunCode"),s={key:Object(W.a)(),isActive:!0,messageType:m.f.INCORRECT,title:Object(K.c)("IncorrectFeedbackMessage.title"),ratedFeedback:!1,body:Object(X.a)(t.output.payload.message),lastRunCode:a,...n};return e.update("feedbackMessages",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return e.map(e=>({...e,isActive:!1})).push(s)}))},V=(e,t)=>{const n=e.get("lastRunCode"),a={key:Object(W.a)(),error:t,isActive:!0,messageType:m.f.ASSISTANT,title:Object(K.c)("AssistantFeedbackMessage.title"),ratedFeedback:!1,body:Object(K.c)("AssistantFeedbackMessage.body"),lastRunCode:n};return e.update("feedbackMessages",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return e.filter(e=>e.messageType!==m.f.ASSISTANT).map(e=>({...e,isActive:!1})).push(a)}))},Y=(e,t)=>{const n={output:{payload:{message:`<pre><code>${t}</code></pre>`}}},r={title:Object(K.c)("SolutionFeedbackMessage.title"),messageType:m.f.SOLUTION};return z(e,n,r)},Q=(e,t)=>e.update("feedbackMessages",e=>e.map((e,n)=>({...e,isActive:t.tabIndex===n}))),$=(e,t)=>{const n=e.getIn(["completed","completed"]);return e.set("completed",Object(r.fromJS)({message:Object(X.a)(t.message),show:t.show,completed:t.completed,isFirstTime:!n&&t.completed}))},Z=e=>e.update("feedbackMessages",e=>e.map(e=>e.isActive?{...e,ratedFeedback:!0}:e));var ee=n(115),te=n.n(ee),ne=n(378),re=n.n(ne),ae=n(165),se=n.n(ae),oe=n(379),ce=n.n(oe),ie=n(232),ue=n.n(ie),de=n(229),le=n.n(de);const pe=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"solution";const s=!c()(t.get("sample_code"),"[");if(s){const s=Object(F.getTabTitle)(a,n,t.get("type")),o="solution/"+s;return e.update("editorTabs",e=>e.map(e=>e.setIn(["props","active"],!1)).set(o,Object(r.fromJS)({title:s.replace("ReadOnly",""),isSolution:!0,props:{active:!0,extraClass:"animation--flash solution",extra:{}}})))}return e},ge=(e,t,n)=>e.update(e=>e.update("feedbackMessages",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return e.map(e=>({...e,isActive:!1})).push({isActive:!0,title:Object(K.c)("HintFeedbackMessage.title"),ratedFeedback:!1,messageType:m.f.HINT})})).set("isHintShown",!0).set("sidePanelIsClosed",!1).update("currentXp",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.get("xp");return e-(n.xp||0)}))),be=(e,t,n,r)=>{switch(t.get("type")){case"MarkdownExercise":{let a=te()(()=>JSON.parse(t.get("solution")));return se()(a)?e:(a=ce()(ue()(a,(e,t)=>({title:t,isSolution:!0,props:{code:e,resetCode:e,uniqueId:le()("code-editor-"),active:re()(t,".Rmd")},extraClass:"animation--flash solution solution-markdown-title"})),(e,t)=>n+t),e.update("inputMarkdownTabs",e=>e.map(e=>e.set("active",!1)).mergeDeep(a)).set("isSolutionShown",!0).update("currentXp",e=>e-(r.xp||0)))}case"ConsoleExercise":return Y(e,t.get("solution","")).set("isSolutionShown",!0).update("currentXp",e=>e-(r.xp||0));default:return pe(e,t,r.language).set("isSolutionShown",!0).update("currentXp",e=>e-(r.xp||0))}},fe=e=>e.setIn(["user","currentXp"],e.get("subexercises").reduce((e,t)=>e+q()([t.get("xpWon"),t.get("progressXp"),0]),0));var me=(e,t)=>e&&e.get("subexercises")?((e,t)=>{if(!t||t.isEmpty())return e;if(e.get("subExProgressMerged"))return e;const n=Object(D.a)(e.get("type")),a=t.zipWith((e,t)=>({currentSubExProgress:e,previousSubExProgress:t}),t.unshift(null));let s=e.set("subExProgressMerged",!0).update("subexercises",e=>e.zipWith((e,t)=>{let{currentSubExProgress:a}=t;const s=a||Object(r.Map)();return e.setIn(["active"],!1).setIn(["unlocked"],s.get("completed")).setIn(["completed","completed"],s.get("completed")).setIn(["last_attempt"],s.get("last_attempt")).setIn(["used_solution"],s.get("used_solution")).setIn(["isSolutionShown"],s.get("used_solution")).setIn(["used_hint"],s.get("used_hint")).setIn(["isHintShown"],s.get("used_hint")).update(e=>e.get("isHintShown")?ge(e,e,{}):e).update(e=>e.get("isSolutionShown")&&n?Y(e,e.get("solution","")):e).setIn(["progressXp"],s.get("xp")).setIn(["xpToWin"],s.get("completed")?s.get("xp"):s.get("used_solution")?0:s.get("used_hint")?.7*e.get("xp")||0:e.get("xp"))},a));const o=e.get("language"),c=H()(U.a,o,{}),i="files/"+Object(F.getTabTitle)(c.editorPrefixTitle,o,e.get("type"));s=s.update("subexercises",e=>e.map(e=>{const t=e.get("solution"),n=e.get("sample_code"),r=e.get("used_solution"),a=e.get("last_attempt");return e.updateIn(["tabs",i,"code"],e=>(r&&a===t?n:a||n)||e)}));let u=Object(r.Map)();return s=s.update("subexercises",e=>{const t=e.findLastKey(e=>e.getIn(["completed","completed"]));let n=B()(t)?t+1:0;return n=n>=e.size?0:n,u=e.get(n),e.setIn([n,"unlocked"],!0).setIn([n,"active"],!0)}),u.get("isSolutionShown")&&!n&&(s=s.update("user",e=>pe(e,u,s.get("language"),"solutionReadOnly"))),s.get("subexercises").reduce((e,t)=>e&&t.getIn(["completed","completed"]),!0)&&(s=s.setIn(["user","completed","completed"],!0),s=fe(s)),n&&(s=Object(D.b)(s)),s})((e=>e.get("subExSet")?e:e.set("subExSet",!0).update("subexercises",e=>e.map(e=>e.setIn(["xpToWin"],e.get("xp",0)))))(e),t):e;const he=e=>e.get("subexercises")||Object(r.List)(),Oe=e=>he(e).findKey(e=>e.get("active"))||0,Se=(e,t)=>e.update("subexercises",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return t(e)})),ye=(e,t)=>e.updateIn(["subexercises",Oe(e)],(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return t(e)})),ve=(e,t)=>{const n=String(Oe(e))!==t;let r=e;if(n){const t="solution/"+Object(F.getTabTitle)("solutionReadOnly",e.get("language"),e.get("type"));r=r.removeIn(["user","editorTabs",t]).updateIn(["user","editorTabs"],e=>e.map(e=>e.removeIn(["props","lineErrors"])))}const a=he(e).get(t);a.get("isSolutionShown")&&!Object(D.a)(e.get("type"))&&(r=e.update("user",t=>pe(t,a,e.get("language"),"solutionReadOnly")));const s="sql"===e.get("language")?"consoleSqlTabs":"consoleTabs";return r=r.removeIn(["user",s,"codeExplanation"]),Se(r,e=>((e,t)=>e.map(e=>e.set("active",!1)).update(t,e=>e.set("active",!0).set("unlocked",!0)))(e,t))};var Ie=(e,t)=>{let n=ye(e,n=>((e,t,n)=>{switch(n.type){case f.lc:return Q(e,n);case f.n:return $(e,n).set("xpWon",e.get("xpToWin"));case f.ic:return z(e,n,e);case f.jc:return V(e,n.error);case f.C:return Z(e);case f.sb:return e.set("isHintShown",n.isHintShown);case f.Gb:return ge(e,e,n).update("xpToWin",e=>e-n.xp);case f.Kb:return e.set("isSolutionShown",!0).update("xpToWin",e=>e-n.xp);case f.A:return"submit"===n.settings.command&&Object(m.i)(t,e)?e.set("last_attempt",n.settings.code):e;case f.ub:return e.set("choicesFocused",n.focused);case f.p:return e.updateIn(["tabs","script","code"],e=>n.code===e?e+" ":n.code);default:return e}})(n,e,t));switch(t.type){case f.n:if(n=fe(n).updateIn(["user","editorTabs"],e=>e.map(e=>e.removeIn(["props","lineErrors"]))),(e=>Boolean(he(e).get(Oe(e)+1)))(n)){const e=n.get("language"),t=H()(U.a,e,{}),r="files/"+Object(F.getTabTitle)(t.editorPrefixTitle,e,n.get("type")),a=Oe(n)+1,s=n.get("subexercises").get(a).get("sample_code")||"";return n=n.setIn(["subexercises",a,"tabs",r,"code"],s),ve(n,a)}return n;case f.Ub:return ve(n,t.activeKey);case f.i:return Se(n,e=>e.setIn([t.index,"multipleChoiceAnswer"],t.choice));case f.Kb:{const e="solution/"+Object(F.getTabTitle)("solution",n.get("language"),n.get("type"));switch(n.get("type")){case"BulletConsoleExercise":case"TabConsoleExercise":return ye(n,e=>Y(e,e.get("solution",""))).removeIn(["user","editorTabs",e]);default:return n.update("user",e=>pe(e,(e=>e.getIn(["subexercises",Oe(e)])||Object(r.Map)())(n),n.get("language"),"solutionReadOnly")).removeIn(["user","editorTabs",e])}}case f.lb:return n.update("subexercises",e=>e.map(e=>t.id===e.get("id")?e.setIn(["tabs",t.tabKey,"code"],t.code):e));default:return n}},xe=n(111),Ee=n.n(xe),we=n(410),Te=n.n(we),je=n(52),_e=n.n(je),Ce=n(210),ke=n.n(Ce),Re=n(103),Me=n.n(Re),Ne=n(169),Pe=n(98),Ae=(e,t,n)=>{switch(n.type){case f.sc:return e.update(Object(Pe.a)("query_result")).update("query_result",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.setIn(["props","error"],Object(r.fromJS)({message:Me()(n,"settings.output.payload"),show:!0}))}));case f.Sb:return e.setIn(["query_result","props","error","show"],Boolean(n.show));case f.uc:return e.update(Object(Pe.a)("query_result")).update("query_result",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.set("title",n.settings.name).setIn(["props","error","show"],!1).removeIn(["props","table"]).setIn(["props","message"],n.settings.message)}));case f.vc:return e.update(Object(Pe.a)("query_result")).update("query_result",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.set("title",n.settings.name).setIn(["props","error","show"],!1).removeIn(["props","message"]).setIn(["props","table"],Object(r.fromJS)(n.settings))}));case f.wc:return e.update(n.settings.name,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.set("title",n.settings.name).setIn(["props","table"],Object(r.fromJS)(n.settings))}));case f.xc:return e.update(e=>e.mergeDeep(ue()(ce()(n.tableNames),e=>({title:e,extraClass:"animation--flash",props:{}}))));default:return e}},De=n(175),Fe=n.n(De);const Ue=["ConsoleExercise","TabConsoleExercise","BulletConsoleExercise","MultipleChoiceExercise"];var Le=e=>{const t=e.get("language"),n=H()(U.a,t,{});let a={};if("MarkdownExercise"===e.get("type")){const t=te()(()=>JSON.parse(e.get("sample_code")));se()(t)||(a=ue()(t,(e,t)=>({title:t,props:{code:e,active:re()(t,".Rmd"),resetCode:e,uniqueId:le()("code-editor-")}})))}const o=e.get("subexercises");let i=e.get("xp",0);o&&!o.isEmpty()&&(i=o.reduce((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(r.Map)();return e+t.get("xp")}),0));const u=!c()(e.get("sample_code"),"[");return Object(r.fromJS)({editorTabs:u?function(){const r=Object(F.getTabTitle)(n.editorPrefixTitle,t,e.get("type")),a="files/"+r;let s={};return(!_e()(Ue,e.get("type"))||"sql"===t)&&(s={[a]:{title:r,isSolution:!1,props:{active:!0,isClosable:!1,code:null,extra:{}}}}),s}():function(e){const t=JSON.parse(e.get("sample_code")),n=s()(t,e=>e.open&&!e.isFolder);return Fe()(n,(e,t)=>(e[["files",t.name].join("/")]={title:t.name,isSolution:!1,props:{active:!0===t.focus,isClosable:!0,readOnly:!0===t.locked,code:t.content,resetCode:t.content}},e),{})}(e),consoleTabs:{console:{title:Object(F.getConsoleTitle)(t),props:{active:!0},dimension:{cols:400}},slides:{title:Object(K.c)("TabSlides.header"),props:{active:!1}}},consoleSqlTabs:{query_result:{extraClass:"",title:"query result",props:{active:!0,isNotView:!0,message:"No query executed yet..."}}},consoleObjectViewTabs:{},graphicalTabs:{plot:{extraClass:"animation--flash",title:"Plots",props:{sources:[],currentIndex:0},dimension:{isRealSize:!1,width:1,height:1}},html:{extraClass:"animation--flash",title:"HTML Viewer",props:{sources:[],currentIndex:0}}},inputMarkdownTabs:a,outputMarkdownTabs:{},markdown:{titles:["Knit PDF","Knit HTML"],activeTitle:"Knit HTML"},feedbackMessages:[],isHintShown:!1,lastSubmittedCode:null,lastRunCode:null,currentXp:i,ltiStatus:{},lastSubmitActiveEditorTab:null,usedAiFeatures:{aiIncorrectSubmissions:!1,aiErrorExplanations:!1}})};const He=e=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();const n=t.update("sources",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return t.push(e.set("id",le()("key:")).set("isExpanded",!1).set("expandedHasFocus",!1).set("expandedPath",null))})),a=n.get("sources").size-1;return n.set("currentIndex",a)},Ge=e=>function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();const n=t.set("sources",Object(r.List)().push(e));return n.set("currentIndex",0)},Be=(e,t,n,r)=>e.setIn(["outputMarkdownTabs",n,"title"],r).updateIn(["outputMarkdownTabs",n,"props"],He(t)).update("outputMarkdownTabs",Object(Pe.a)(n));var Je=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.Qc;if(!t)return null;switch((!e||e.size<2)&&(e=Le(t).mergeDeep(e)),e=e.update("consoleSqlTabs",e=>Ae(e,0,a)),a.type){case f.rc:return e.update("consoleObjectViewTabs",e=>e.update(a.settings.name,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.set("title","Expected "+a.settings.name).setIn(["props","table"],Object(r.fromJS)(a.settings))})));case f.cc:return e.update(e=>e.set("consoleSqlTabs",Le(t).get("consoleSqlTabs")).setIn(["completed","show"],!1)).set("consoleTabs",Le(t).get("consoleTabs")).set("graphicalTabs",Le(t).get("graphicalTabs")).set("outputMarkdownTabs",Le(t).get("outputMarkdownTabs")).deleteIn(["editorTabs","html"]).delete("shellProxy");case f.y:return e.update(e=>"soft_init"===Me()(a,"initCommandOptions.command")?e:e.delete("shellProxy"));case f.ac:return e.update("consoleTabs",Object(Pe.a)("console"));case f.Qb:return e.setIn(["completed","completed"],a.correct);case f.m:return $(e,a).set("sidePanelIsClosed",!1).set("isNavigatingToNextExercise",!1).set("nextPath",void 0);case f.L:return a.id!==t.get("id")?e:e.setIn(["completed","show"],!1);case f.mc:return e.updateIn(["editorTabs",e.get("lastSubmitActiveEditorTab")],e=>N()(e)?e:e.setIn(["props","lineErrors"],a.output.payload));case f.hc:return z(e,a,t).set("sidePanelIsClosed",!1);case f.kc:return V(e,a.error).set("sidePanelIsClosed",!1);case f.lc:return Q(e,a).set("sidePanelIsClosed",!1);case f.C:return Z(e);case f.gc:return e.set("currentXp",a.currentXp);case f.sb:return e.set("isHintShown",a.isHintShown);case f.Gb:return ge(e,t,a);case f.Kb:return be(e,t,"solution_",a).set("sidePanelIsClosed",!1);case f.i:return e.set("multipleChoiceAnswer",a.choice);case f.ub:return e.set("choicesFocused",a.focused);case f.jb:{const t=!_()(ke()(a.results,e=>_e()(Ne.b,e.type)));return e.update(e=>{let t=e;return Ee()(a.results,e=>{t=t.update(e.type,(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return t.push(e.payload)})),t=t.update("responses",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.List)();return t.push(e)}))}),t}).update("bottomPanelIsClosed",e=>!t&&e).update("consoleTabs",e=>t?Object(Pe.a)("console")(e):e)}case f.hb:return e.mergeIn(["graphicalTabs","plot","props","sources",a.index],{path:a.url,isRelativeToMultiplexer:!1});case f.dc:return e.setIn([a.category,a.key,"props","currentIndex"],a.index);case f.H:{const t=e.getIn([a.category,a.key,"props","sources"]).findIndex(e=>e.get("id")===a.id);return t<0?e:e.mergeIn([a.category,a.key,"props","sources",t],{isExpanded:!0,expandedHasFocus:!0,expandedPath:null})}case f.K:{const t=e.getIn([a.category,a.key,"props","sources"]).findIndex(e=>e.get("id")===a.id);return t<0?e:e.mergeIn([a.category,a.key,"props","sources",t],{expandedHasFocus:!0})}case f.e:{const t=e.getIn([a.category,a.key,"props","sources"]).findIndex(e=>e.get("id")===a.id);return t<0?e:e.mergeIn([a.category,a.key,"props","sources",t],{expandedHasFocus:!1})}case f.k:{const t=e.getIn([a.category,a.key,"props","sources"],Object(r.List)()).findIndex(e=>e.get("id")===a.id);return t<0?e:e.mergeIn([a.category,a.key,"props","sources",t],{isExpanded:!1})}case f.I:return e.setIn([a.category,a.tabKey,"props","sources",a.index,"expandedPath"],a.src);case f.V:return e.updateIn(["graphicalTabs","plot","props"],He(Object(r.Map)({type:"plot",path:a.url,isRelativeToMultiplexer:!1}))).update("graphicalTabs",Object(Pe.a)("plot"));case f.a:return e.set("proxyId",a.proxyId);case f.X:return e.set("shellProxy",""+a.payload);case f.W:{const n=Object(r.Map)({type:"iframe",path:a.payload,isRelativeToMultiplexer:!0});return"MarkdownExercise"===t.get("type")?Be(e,n,"html","HTML Viewer"):e.updateIn(["editorTabs","html","props"],Ge(n)).update("editorTabs",Object(Pe.a)("html")).setIn(["editorTabs","html","title"],"HTML Viewer")}case f.S:{let n=Object(r.Map)({type:"iframe",path:a.src,isRelativeToMultiplexer:a.isRelativeToMultiplexer});return N()(n.get("path"))&&(n=n.set("content",a.html).set("isRawContent",!0)),"MarkdownExercise"===t.get("type")?Be(e,n,"html","HTML Viewer"):e.updateIn(["graphicalTabs","html","props"],He(n)).update("graphicalTabs",Object(Pe.a)("html"))}case f.U:return Be(e,Object(r.Map)({type:"iframe",path:a.src,isRelativeToMultiplexer:!1}),"pdf","PDF Viewer");case f.T:return Be(e,Object(r.Map)({type:"pdf",path:a.src,isRelativeToMultiplexer:a.isRelativeToMultiplexer}),"pdf","PDF Viewer");case f.Eb:{let t=Object(r.Map)({type:"iframe"});return t=N()(a.src)?t.merge({isRawContent:!0,content:a.html}):t.merge({path:a.src,isRelativeToMultiplexer:!1,isRawContent:!1}),e.updateIn(["editorTabs","html","props"],He(t)).update("editorTabs",Object(Pe.a)("html")).setIn(["editorTabs","html","title"],"HTML Viewer")}case f.Jb:return e.setIn(["editorTabs","rdoc"],Object(r.fromJS)({title:"RDocumentation",extraClass:"animation--flash",props:{path:a.payload}})).update("editorTabs",Object(Pe.a)("rdoc"));case f.oc:return e.setIn(["markdown","activeTitle"],a.activeTitle);case f.Vb:return e.update(a.category,Object(Pe.a)(a.activeKey)).update("bottomPanelIsClosed",e=>!_e()(["consoleTabs","consoleSqlTabs"],a.category)&&e);case f.b:{const{category:t,key:n,title:r}=a;return e.update(t,Object(Pe.b)({key:n,title:r})).update(t,Object(Pe.a)(n))}case f.tb:return e.set("ltiStatus",{status:a.status,message:a.message});case f.Z:return e.set("isNavigatingToNextExercise",!0);case f.xb:return e.set("nextPath",a.nextPath);case f.tc:return e.set("sqlOptions",Object(r.fromJS)(a.settings));case f.ib:return e.getIn(["graphicalTabs","plot","dimension","isRealSize"])?e:e.updateIn(["graphicalTabs","plot","dimension"],e=>Te()(a.components,"top-right-stack")?e.merge({width:a.components["top-right-stack"].innerWidth(),height:a.components["top-right-stack"].innerHeight()-52}):Te()(a.components,"top-left-stack")?e.merge({width:Math.round((a.components["top-left-stack"].innerWidth()-a.dimensions.borderWidth)/2),height:a.components["top-left-stack"].innerHeight()-52}):Te()(a.components,"bottom-stack")?e.merge({width:a.components["bottom-stack"].innerWidth(),height:Math.round((a.components["bottom-stack"].innerHeight()-a.dimensions.borderWidth-a.dimensions.headerHeight)/2-52)}):e.merge({width:640,height:540}));case f.A:return e.updateIn(["graphicalTabs","plot","props","currentIndex"],e=>"resize"===a.settings.command?a.settings.figureIndex:e).updateIn(["graphicalTabs","plot","dimension"],e=>{const{height:t,width:n}=a;return"resize"===a.settings.command&&B()(n)&&B()(t)?e.merge({isRealSize:!0,width:n,height:t}):e}).update("lastSubmittedCode",e=>"submit"===a.settings.command?a.settings.code:e).set("lastRunCode",a.settings.code).set("lastSubmitActiveEditorTab",e.get("editorTabs").findKey(e=>e.getIn(["props","active"],!1)));case f.Wb:return e.set("nr_attempts",a.nbAttempts);case f.zb:return e.set("sidePanelIsClosed",a.closed);case f.mb:return e.set("bottomPanelIsClosed",a.closed);case f.j:return e.hasIn(["editorTabs",a.tabKey])?e.deleteIn(["editorTabs",a.tabKey]):e;case f.Bb:return e.setIn(["usedAiFeatures","aiIncorrectSubmissions"],a.value);case f.Ab:return e.setIn(["usedAiFeatures","aiErrorExplanation"],a.value);default:return e}};const{STATUS:qe,getStatus:Ke}=A.a,We=(e,t,n)=>e?Je(e.get("user"),e,t,n):null,Xe=(e,t)=>{const n=e.get("all").findIndex(e=>e.get("id")===t.id);return n<0?e:e.updateIn(["all",n,"user",t.category],(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.get(t.tabKey)?e.mergeDeep({[t.tabKey]:{props:{code:t.code,extra:t.extra}}}):e}))},ze=e=>e.getIn(["all",e.get("current")],null),Ve=e=>-1===e.get("all").findIndex((t,n)=>!(e.getIn(["progress",n,"completed"],!1)||t.getIn(["user","completed","completed"],!1)));var Ye=n(355);var Qe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"course",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye.a:return"singleExercise"===t.queryParams.learningMode?"singleExercise":"singleChapter"===t.queryParams.learningMode?"singleChapter":"course";default:return e}};const $e={workspaceNotes:void 0,workspaceTemplate:null};var Ze=n(74);const et={isStarted:!1,isActive:!0,step:0},tt=Ze.a.exercises.VIDEO_EXERCISE;const nt={lastErrorMessage:null,output:[]};function rt(e){const t=e.find(e=>"error"===e.type||"r-error"===e.type);return t?t.payload:null}var at=n(299),st=n(730),ot=n.n(st),ct=n(141),it=n.n(ct),ut=n(190);const dt=Object(r.Map)({uiTheme:"LIGHT"===it.a.get("campus_theme")?"LIGHT":"DARK",feedbackRatingStatus:"NONE",mobileView:"CONTEXT"});function lt(e){const t="LIGHT"===e.get("uiTheme")?"DARK":"LIGHT";return it.a.set("campus_theme",t),e.set("uiTheme",t)}const pt={[P.STATUS.FETCHING]:"SAVING",[P.STATUS.ERROR]:"ERROR",[P.STATUS.SUCCESS]:"SAVED"};var gt=n(65),bt=n(69),ft=n(298);const mt={type:bt.a.Unknown};function ht(e,t){if(!t)return e;const{daily_xp:n,streak_goal:r,streak_state_after_goal_met:a,...s}=t;return{version:2,streakGoalMetInSession:!1,freezesAwardedInSession:0,screenVisible:!1,type:bt.a.Known,streakGoal:r,dailyXp:n,current:s,next:a}}function Ot(e,t){const{dailyXp:n}=e,r=n+t.xpGained;return{...e,dailyXp:r}}function St(e,t){const{current:n,dailyXp:r,streakGoal:a}=e,s=r+t.xpGained;return!n.streak_goal_met&&s>=a?function(e,t){var n;const{current:r,dailyXp:a,next:s}=e,o=a+t.xpGained,c=Math.max((null!==(n=null===s||void 0===s?void 0:s.freezes_available)&&void 0!==n?n:0)-r.freezes_available,0),i={...r,...s,streak:{...r.streak,...null===s||void 0===s?void 0:s.streak,last_incremented_at:new Date(t.currentTime||Date.now()).toISOString()}};return{...e,streakGoalMetInSession:!0,freezesAwardedInSession:c,dailyXp:o,current:i,next:null}}(e,t):Ot(e,t)}const yt=(e,t)=>t.currentTime>Date.parse(e.current.streak_deadline)?Ot(e,t):St(e,t);function vt(e){return{...e,screenVisible:!0}}function It(e){return e.screenVisible?{...e,screenVisible:!1,streakGoalMetInSession:!1,freezesAwardedInSession:0}:e}var xt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;if(t.type===f.h)return ht(e,t.entities.streakInfo);if(e.type===bt.a.Unknown||2!==e.version)return e;switch(t.type){case f.Ob:return ht(e,t.data);case f.G:return yt(e,t);case f.Fb:return vt(e);case f.M:return It(e);default:return e}};var Et=(e,t)=>function(e){return e&&e.type!==bt.a.Unknown?2===e.version:"on"===Object(gt.a)("wl--streak-freezes")}(e)?xt(e,t):Object(ft.b)(e,t);const wt=Object(r.fromJS)({indicator:"none",description:"No status has been fetched from the Status Page."}),Tt=(e,t)=>e.set("indicator",t.indicator).set("description",t.description);var jt=n(49);const _t=Object(r.fromJS)({status:jt.a.NOT_INITIATE,settings:{aiFlags:{aiSolutionExplanationEnabled:!1,aiErrorExplanationEnabled:!1}}});var Ct={backendSessionJsonRpc:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.wb:return{status:"loaded",muxSessionManager:t.muxSessionManager};default:return e}},backendSession:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Dd;switch(t.type){case f.Xb:return{...O(e,S(t.status),t.statusCode),message:t.message};case f.A:return{...e,lastSubmittedCode:t.settings.code,lastSubmittedCommand:t.settings.command};case f.r:return O(e,m.a.BROKEN,500);case f.yb:return{...e,sessionId:t.sessionId};default:return e}},datawarehouseSession:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;const n="loading"===e.status&&"courseId"in t&&t.courseId!==e.courseId;switch(t.type){case f.pb:return n?e:t.session?{courseId:t.courseId,status:"success",session:t.session}:{courseId:t.courseId,status:"no-session"};case f.rb:return{courseId:t.courseId,status:"loading"};case f.qb:return n?e:{courseId:t.courseId,error:t.error,status:"error"};default:return e}},chapter:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n.type){case f.h:{const{chapters:e}=n.entities.course,{chapterId:a}=n,s=e.findIndex(e=>{let{id:t}=e;return t===a})===e.length-1,o=Object(r.fromJS)(x()(e,{id:a})).set("is_last_chapter",s);return t.mergeDeepIn(["current"],o)}case f.Yb:{const{chapters:e}=n,r=e.findIndex(e=>E(n,e))===e.size-1,a=e.find(e=>E(n,e)).set("is_last_chapter",r);return t.set("current",a)}case f.J:{const e=t.getIn(["current","id"]);return t.update("firstTimeCompletedChapters",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return t.set(e,!0)}))}case f.m:return t.set("window",Object(r.fromJS)({type:"fetching"}));case f.fb:return t.setIn(["window","show"],!1);case f.Lb:return t.setIn(["window","show"],!0);case f.Db:return t.set("window",Object(r.fromJS)({type:n.windowType,url:n.url,meta:n.meta,isCourseEndReached:null!==(e=n.isCourseEndReached)&&void 0!==e&&e}));default:return t}},course:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.h:return e.merge(Object(r.fromJS)(t.entities.course)).update(e=>t.entities.courseProgress?e.update("progress",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.mergeDeep(Object(r.fromJS)(t.entities.courseProgress))})):e);case f.ec:{const n=C(e.get("chapters"),t.chapterRef);return n>-1?e.setIn(["chapters",n,"exercises"],t.exercises).setIn(["chapters",n,"progress"],t.progress):e}case f.u:{const n=C(e.get("chapters"),t.chapterRef);return e.deleteIn(["chapters",n,"exercises"]).deleteIn(["chapters",n,"progress"])}case f.bc:return"failed"===t.data.status||_()(t.data)?e:e.set("progress",Object(r.fromJS)(t.data));default:return e}},exercises:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Qc;const n=e.getIn(["progress",e.get("current")])||Object(r.Map)(),a=We(ze(e),n,t);switch(a&&(e=e.setIn(["all",e.get("current"),"user"],a)),N()(e.get("current"))||(e=e.setIn(["all",e.get("current")],me(ze(e),n.get("subexercises")))),ze(e)&&ze(e).get("subexercises")&&(e=e.updateIn(["all",e.get("current")],e=>Ie(e,t))),t.type){case f.h:{const n=t.exerciseNumber-1,{chapterProgress:a,exercises:s}=t.entities;return e.set("current",n).update("all",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.fromJS)(s);return e.zipWith((e,t)=>e.mergeDeep(t),Object(r.fromJS)(s))})).setIn(["all",t.exerciseNumber-1,"user"],Je(null,Object(r.fromJS)(s[n]),Object(r.fromJS)(a?a[n]:{}))).update(e=>a?e.set("progress",Object(r.fromJS)(a)):e).set("canRateChapter",!1).update(e=>e.set("isChapterCompleted",Ve(e)))}case f.cc:{const n=e.getIn(["all",t.index],null),a=e.getIn(["progress",t.index])||Object(r.Map)(),s=We(n,a,t);let o=e.set("current",t.index).setIn(["all",t.index,"user"],s).set("canRateChapter",!1);return Object(D.a)(n&&n.get("type"))&&(o=o.updateIn(["all",t.index],e=>Object(D.b)(e))),o}case f.fc:return"failed"===t.data.status||_()(t.data)?e:e.set("progress",Object(r.fromJS)(t.data));case f.lb:return Xe(e,t);case Ke(f.F,qe.SUCCESS):return e.update(e=>e.set("all",Object(r.fromJS)(t.data.body.map(e=>({...e,...t.injection,randomNumber:Math.random()})))).set("current",null).set("canRateChapter",!1).update(e=>e.set("isChapterCompleted",Ve(e))));case Ke(f.F,qe.ERROR):return console.error("error to retrieve exercises, should give an explanation!"),e.update(e=>e.set("all",Object(r.List)()).set("current",null));case f.Qb:case f.m:return!e.get("isChapterCompleted")&&Ve(e)?e.set("isChapterCompleted",!0).set("canRateChapter",!0):e;case f.Hb:return t.modal.code===m.e.CHAPTER_RATING.code?e.set("canRateChapter",!1):e;default:return e}},location:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.Qc;switch(t.type){case f.h:return e.set("current",Object(r.Map)({pathname:t.pathname,query:Object(r.Map)(t.queryParams)})).set("language",t.language).set("canonical",t.canonical);case f.nc:return e.set("before",e.get("current")).set("current",Object(r.Map)({pathname:t.pathname,query:Object(r.Map)(t.query)}));default:return e}},settings:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.f:return e.set("uiTheme",dt.get("uiTheme"));case f.eb:return[ut.b.LOGIN.code].indexOf(e.getIn(["modal","code"]))>-1?e:t.force||null==e.get("modal")?e.set("modal",null).set("isExerciseActive",!0):e.setIn(["modal","show"],!1).set("isExerciseActive",!0);case f.Hb:{let n=e;switch(n=n.getIn(["modal","code"])===t.modal.code?n.update("modal",e=>e.mergeDeep({...t.modal,show:!0})):n.set("modal",Object(r.fromJS)({...t.modal,show:!0})),n.getIn(["modal","code"])){case ut.b.ISSUE_REPORTER.code:case ut.b.FEEDBACK_REPORTER.code:n=n.setIn(["modal","submitRequestState"],null)}return n.set("isExerciseActive",!1)}case f.qc:{let n=e;return ot()(t.settings.show)&&(n=n.set("isExerciseActive",!t.settings.show)),N()(n.get("modal"))?n:n.update("modal",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.mergeDeep(t.settings)}))}case Object(P.getStatus)(f.C,P.STATUS.FETCHING):case Object(P.getStatus)(f.C,P.STATUS.ERROR):case Object(P.getStatus)(f.C,P.STATUS.SUCCESS):return e.set("feedbackRatingStatus",pt[t.requestStatus]);case f.Gb:case f.lc:case f.hc:case f.kc:case f.ic:return e.set("feedbackRatingStatus","NONE").set("mobileView","CONTEXT");case f.Kb:return e.set("feedbackRatingStatus","NONE").set("mobileView","EXERCISE");case Object(P.getStatus)(f.D,P.STATUS.FETCHING):case Object(P.getStatus)(f.D,P.STATUS.ERROR):case Object(P.getStatus)(f.D,P.STATUS.SUCCESS):return N()(e.get("modal"))?e:e.update("modal",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)();return e.mergeDeep({submitRequestState:t.requestStatus})}));case f.s:return e.set("shouldStopBackendManager",!0);case f.N:return e.update("shortcutsUsage",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e+1}));case f.l:return e.set("shouldCloseShortcutFrame",!0);case f.Tb:return lt(e);case f.vb:return e.set("mobileView",t.selectedView);case f.m:return e.set("mobileView","CONTEXT");default:return e}},systemStatus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.yc:return Tt(e,t.status);default:return e}},user:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.h:return N()(t.entities.user)?e:e.set("status",t.entities.user.status).mergeDeepIn(["settings"],Object(r.fromJS)(t.entities.user.settings));case f.zc:return e.setIn(["settings","aiFlags"],t.aiFlags);default:return e}},boot:v.b,preFetchedData:at.c,images:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.h:return t.entities.images;default:return e}},mobilePopup:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(r.Map)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case f.Q:return e.set("linkSending",!0).set("linkFailed",!1);case f.R:return e.set("linkSent",!0).set("linkSending",!1).set("linkFailed",!1);case f.P:return e.set("linkSending",!1).set("linkFailed",!0);default:return e}},onboardingMilestones:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.c:case f.Z:case f.Y:return e.isStarted?{...e,isActive:!1}:e;case f.Qb:return e.isStarted&&t.correct&&t.exerciseType!==tt?{...e,isActive:!0,step:e.step+1}:e;case f.m:return e.isStarted&&t.completed?{...e,isActive:!0,step:e.step+1}:e;case f.bb:return{...e,isStarted:!0};default:return e}},contentAuthorization:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.o:return t.status===f.q.denied?{...e,[t.chapterId]:{status:t.status,denyReason:t.reason}}:{...e,[t.chapterId]:{status:t.status}};default:return e}},streakInfo:Et,learningMode:Qe,notes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.h:return{...e,workspaceTemplate:t.entities.workspaceTemplate};case f.Cb:return{...e,workspaceNotes:t.data};default:return e}},output:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"output/SET_CONSOLE_OUTPUT":return{output:[...e.output,...t.output],lastErrorMessage:rt(t.output)};case"output/CLEAR_CONSOLE_OUTPUT":return{output:[],lastErrorMessage:null};default:return e}},codeExplanation:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.y:return{...e,codeExplanation:{type:"initial"}};case f.nb:return{...e,codeExplanation:t.data};case f.ob:return{...e,codeExplanation:{...e.codeExplanation,type:t.codeExplanationType}};case f.Pb:switch(e.codeExplanation.type){case"streaming":return e.codeExplanation.prediction?{...e,codeExplanation:{...e.codeExplanation,prediction:{...e.codeExplanation.prediction,completion:e.codeExplanation.prediction.completion+t.partialCompletion}}}:e;case"initial":case"success":case"loading":case"error":default:return e}default:return e}},learningRecap:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.h:return t.learningRecap;default:return e}}};const kt=Object(r.Record)({backendSession:h,backendSessionJsonRpc:void 0,boot:void 0,chapter:void 0,codeExplanation:void 0,contentAuthorization:void 0,datawarehouseSession:void 0,course:void 0,exercises:void 0,learningMode:void 0,learningRecap:void 0,location:void 0,mobilePopup:void 0,onboardingMilestones:void 0,notes:void 0,output:void 0,preFetchedData:void 0,settings:void 0,streakInfo:void 0,systemStatus:void 0,user:void 0,images:null},"StateRecord");t.b=e=>{let{history:t,initialState:n,middlewares:r}=e;const a=p.a.isProductionDomain()||p.a.isServerSideRendering||!window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?i.d:window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,o=s()(r,(e,t)=>c()(t,"middleware")),b=a(Object(i.a)(l.a,...o,Object(d.b)(Object(g.a)({history:t,middlewares:r}))));return Object(i.e)(Object(u.combineReducers)(Ct,kt),n,b)}},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"j",(function(){return l})),n.d(t,"q",(function(){return g})),n.d(t,"k",(function(){return b})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return O})),n.d(t,"p",(function(){return y})),n.d(t,"m",(function(){return v})),n.d(t,"n",(function(){return I})),n.d(t,"l",(function(){return x})),n.d(t,"o",(function(){return E})),n.d(t,"i",(function(){return w})),n.d(t,"c",(function(){return C})),n.d(t,"d",(function(){return k})),n.d(t,"b",(function(){return R}));var r=n(8),a=n(869),s=n(10),o=n(837),c=n(65),i=n(85),u=n(56);const d={LOGIN:"login",UNAUTHORIZED:"unauthorized",NOT_INITIATE:"not_initiate",PENDING:"pending",ERROR:"error"},l=e=>e.get("user")||Object(r.Map)(),p=e=>{const t=l(e).getIn(["settings","current_group_name"],"");return!!t&&t.includes("DataCamp")},g=e=>l(e).get("settings")||Object(r.Map)(),b=e=>g(e).get("first_name"),f=e=>Boolean(g(e).get("id")),m=e=>l(e).get("status")===d.UNAUTHORIZED,h=e=>l(e).get("status")===d.ERROR,O=e=>g(e).get("multiplexerUrl"),S=e=>g(e).get("groups",[]).some(e=>"enterprise"===e.get("type")&&"cancelled"!==e.get("status")),y=e=>g(e).get("language","en-US"),v=e=>{const t=Object(c.c)("exp_wl_explain_error_button"),n=g(e).getIn(["aiFlags","aiErrorExplanationEnabled"],!1);return t&&n},I=e=>{const t=Object(i.e)(e),n=Object(u.o)(e),r=g(e).getIn(["aiFlags","aiErrorExplanationEnabled"],!1),a=S(e),s=p(e);return Object(o.a)({courseId:t,exerciseType:n,feature:"aiHints",isB2BFlagEnabled:r,isUserB2B:a,isUserFromDatacamp:s})},x=e=>{const t=S(e),n=p(e),r=!t,a=g(e).getIn(["aiFlags","aiSolutionExplanationEnabled"],!1);if(r||a||n){return Object(c.c)("cp--explain-solution")}return!1},E=e=>{const t=!S(e),n=p(e);return t||n},w=e=>({activeProducts:g(e).get("active_products"),email:g(e).get("email"),id:g(e).get("id"),inEnterpriseGroup:S(e),language:g(e).get("language"),loggedIn:null==l(e).get("status")?void 0:f(e),notLoggedIn:null==l(e).get("status")?void 0:m(e),phone:g(e).get("phone"),statusError:null==l(e).get("status")?void 0:h(e)}),T=[735];let j=null;const _=e=>{const t=Object(i.e)(e),n=g(e).get("id");return T.includes(t)&&(e=>(null==j&&(j=a.support(1),window.dataLayer.push({event:"heap_event",heap_event_name:"Learn - Campus - Wasm support",heap_event_properties:{app_id:s.a.appName,event_category:"learning",is_supported:j,identity:e}})),j))(n)},C=e=>_(e)&&Object(c.c)("cp--dual-code-execution-backend"),k=e=>_(e)&&Object(c.c)("cp--execute-code-in-wasm");function R(e){var t;return null!==(t=g(e).get("has_seen_campus_tour"))&&void 0!==t&&t}},56:function(e,t,n){"use strict";n.d(t,"r",(function(){return u})),n.d(t,"G",(function(){return d})),n.d(t,"i",(function(){return l})),n.d(t,"M",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return w})),n.d(t,"n",(function(){return T})),n.d(t,"m",(function(){return j})),n.d(t,"R",(function(){return _})),n.d(t,"l",(function(){return C})),n.d(t,"j",(function(){return k})),n.d(t,"I",(function(){return R})),n.d(t,"S",(function(){return M})),n.d(t,"t",(function(){return N})),n.d(t,"s",(function(){return P})),n.d(t,"p",(function(){return A})),n.d(t,"u",(function(){return D})),n.d(t,"F",(function(){return F})),n.d(t,"C",(function(){return U})),n.d(t,"N",(function(){return L})),n.d(t,"K",(function(){return H})),n.d(t,"h",(function(){return G})),n.d(t,"v",(function(){return B})),n.d(t,"g",(function(){return J})),n.d(t,"J",(function(){return q})),n.d(t,"x",(function(){return K})),n.d(t,"Q",(function(){return W})),n.d(t,"c",(function(){return X})),n.d(t,"z",(function(){return z})),n.d(t,"O",(function(){return V})),n.d(t,"d",(function(){return Y})),n.d(t,"D",(function(){return Q})),n.d(t,"B",(function(){return $})),n.d(t,"H",(function(){return Z})),n.d(t,"q",(function(){return ee})),n.d(t,"o",(function(){return te})),n.d(t,"A",(function(){return ne})),n.d(t,"E",(function(){return re})),n.d(t,"w",(function(){return ae})),n.d(t,"P",(function(){return se})),n.d(t,"L",(function(){return oe})),n.d(t,"y",(function(){return ce})),n.d(t,"b",(function(){return de})),n.d(t,"f",(function(){return le})),n.d(t,"k",(function(){return pe})),n.d(t,"U",(function(){return ge})),n.d(t,"T",(function(){return be}));var r=n(74),a=n(8),s=n(31),o=n.n(s),c=n(25);const i=r.a.exercises.VIDEO_EXERCISE,u=e=>e.getIn(["exercises","all"],Object(a.List)()),d=Object(c.createSelector)(u,e=>e.getIn(["exercises","current"]),(e,t)=>e.slice(t+1).groupBy(e=>e.get("type")).map(e=>e.map(e=>e.get("externalId")))),l=e=>u(e).size,p=e=>{const t=e.getIn(["exercises","current"]);if(u(e).getIn([t,"type"],null)===i)return null;const n=u(e).take(t).findLast(e=>e.get("type")===i);return o()(n)?null:n.toJS()},g=e=>e.getIn(["exercises","canRateChapter"]);var b=n(37),f=n.n(b),m=n(186),h=n.n(m),O=n(853),S=n(856),y=n(867),v=n(129),I=n(868),x=n.n(I),E=n(241);const w={HINT:"HINT",INCORRECT:"INCORRECT",SOLUTION:"SOLUTION",ASSISTANT:"ASSISTANT"},T=e=>e.getIn(["exercises","current"],null),j=Object(c.createSelector)(u,T,(e,t)=>{const n=e.get(t);if(!n)return Object(a.Map)();const r=n.get("id");return n.merge(Object(O.a)(r))}),_=e=>j(e).get("subexercises")||Object(a.List)(),C=e=>_(e).findLast(e=>e.get("active"))||_(e).get(0)||Object(a.Map)(),k=Object(c.createSelector)(C,j,(e,t)=>e.isEmpty()?t:e),R=e=>_(e).get(C(e).get("number"))||Object(a.Map)(),M=e=>j(e).get("user",Object(a.Map)()),N=Object(c.createSelector)(C,j,(e,t)=>(e.size>0?e:t.get("user",Object(a.Map)())).get("feedbackMessages",Object(a.List)()).map(n=>{if(n.messageType===w.HINT){const r=(e.isEmpty()?t:e).get("hint");return{...n,body:f()(r)?"No hint available":r}}return n})),P=e=>e.getIn(["exercises","progress"]),A=e=>{const t=j(e).get("id");return(e.getIn(["exercises","progress"])||Object(a.List)()).find(e=>e.get("exercise_id")===t)||Object(a.Map)()},D=Object(c.createSelector)(j,u,P,e=>e.getIn(["course","progress"]),e=>Object(v.a)(e).get("id"),y.a),F=Object(c.createSelector)(e=>A(e).get("nr_attempts"),e=>M(e).get("nr_attempts"),(e,t)=>h()([e,t,0])),U=e=>M(e).get("lastSubmittedCode",null),L=e=>M(e).get("shellProxy")||C(e).get("shellProxy"),H=e=>M(e).get("editorTabs",Object(a.Map)()),G=e=>M(e).get("consoleTabs",Object(a.Map)()),B=e=>M(e).get("graphicalTabs",Object(a.Map)()),J=e=>M(e).get("consoleSqlTabs",Object(a.Map)()),q=e=>M(e).get("consoleObjectViewTabs",Object(a.Map)()),K=e=>M(e).get("inputMarkdownTabs",Object(a.Map)()),W=e=>M(e).get("sqlOptions",Object(a.Map)()),X=e=>M(e).get("backend-error",Object(a.List)()),z=e=>M(e).getIn(["completed","show"],!1),V=e=>M(e).get("sidePanelIsClosed",!1),Y=e=>M(e).get("bottomPanelIsClosed",!1),Q=e=>M(e).get("ltiStatus",{status:"none"}).status,$=e=>M(e).get("isNavigatingToNextExercise",!1),Z=e=>M(e).get("nextPath"),ee=e=>j(e).get("type"),te=Object(c.createSelector)(j,C,(e,t)=>{var n;return null!==(n=t.get("type"))&&void 0!==n?n:e.get("type")}),ne=Object(c.createSelector)(ee,e=>Object(S.a)(e)),re=e=>M(e).get("markdown",Object(a.Map)()),ae=Object(c.createSelector)(j,C,(e,t)=>{const n=(t,n)=>{let{hint:r,isHintShown:a,isSolutionShown:s,solution:o,xp:c}=t,i=x()((a?.7:.3)*c);!r&&o&&(a=!0,i=c);let u=!a&&Boolean(r)||!s&&Boolean(o);return n&&(u=!1),Object(E.c)(e.get("type"))&&a&&(u=!1),{isVisible:u,isSolution:a,isSolutionShown:s,xp:i}};return t.isEmpty()?n({isHintShown:e.getIn(["user","isHintShown"],!1),isSolutionShown:e.getIn(["user","isSolutionShown"],!1),xp:e.get("xp",0),hint:e.get("hint",!1),solution:e.get("solution",!1)}):n(t.toJS(),t.getIn(["completed","completed"]))}),se=Object(c.createSelector)(j,C,(e,t)=>{var n;return null!==(n=t.get("solution"))&&void 0!==n?n:e.get("solution")}),oe=Object(c.createSelector)(j,C,(e,t)=>{var n;return null!==(n=t.get("pre_exercise_code"))&&void 0!==n?n:e.get("pre_exercise_code")}),ce=Object(c.createSelector)(j,C,(e,t)=>{var n;return null!==(n=t.get("instructions"))&&void 0!==n?n:e.get("instructions")}),ie=["MultipleChoiceExercise"],ue=e=>!ie.includes(e),de=(e,t)=>ue(e.get("type"))&&ue(t&&t.get("type")),le=Object(c.createSelector)(j,C,de),pe=Object(c.createSelector)(A,e=>M(e).get("completed",Object(a.Map)()),D,(e,t,n)=>{const r=e.get("completed"),a=t.get("isFirstTime");return!r&&a?n.exercise.xp:0}),ge=e=>M(e).getIn(["usedAiFeatures","aiIncorrectSubmissions"],!1),be=e=>M(e).getIn(["usedAiFeatures","aiErrorExplanation"],!1)},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));let r=function(e){return e.Known="StreakKnown",e.Unknown="StreakUnknown",e}({})},85:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"e",(function(){return v})),n.d(t,"i",(function(){return I})),n.d(t,"k",(function(){return x})),n.d(t,"l",(function(){return E})),n.d(t,"p",(function(){return w})),n.d(t,"o",(function(){return T})),n.d(t,"q",(function(){return _})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return R})),n.d(t,"g",(function(){return M})),n.d(t,"f",(function(){return N})),n.d(t,"a",(function(){return P})),n.d(t,"m",(function(){return A})),n.d(t,"n",(function(){return D})),n.d(t,"r",(function(){return F})),n.d(t,"h",(function(){return U})),n.d(t,"j",(function(){return L}));var r=n(76),a=n(8),s=n(35),o=n.n(s),c=n(701),i=n.n(c),u=n(71),d=n.n(u),l=n(25),p=n(10),g=n(126),b=n(839),f=n(213),m=n(129),h=n(56),O=n(364),S=n(140);const y=e=>e.get("course"),v=Object(l.createSelector)(y,e=>{if(void 0!==e)return e.get("id")}),I=Object(l.createSelector)(y,h.m,(e,t)=>{if(void 0===e)return"r";const n=e.get("programming_language","r");return t.get("programming_language")||n}),x=Object(l.createSelector)(y,h.m,O.a,(e,t,n)=>{if(null==e)return"";const{runtimeConfig:r}=Object(f.a)({course:e.toJS(),exercise:t.toJS(),images:n});return r}),E=Object(l.createSelector)(y,e=>e.get("shared_image")),w=Object(l.createSelector)(y,e=>e.get("technology_id")),T=Object(l.createSelector)(w,e=>g.a[e]),j=Object(l.createSelector)(y,e=>e.get("topic_id")),_=Object(l.createSelector)(j,e=>b.a[e]),C=Object(l.createSelector)(m.a,e=>e.get("number",void 0)-1),k=e=>y(e).get("case_study"),R=e=>y(e).get("datasets",Object(a.List)()),M=e=>y(e).get("title"),N=e=>y(e).get("slug")||y(e).get("id"),P=e=>e.getIn(["course","chapters"],Object(a.List)()),A=(Object(l.createSelector)(P,C,(e,t)=>e.get(t+1,null)),Object(l.createSelector)(P,C,(e,t)=>t>0?e.get(t-1,null):null),Object(l.createSelector)(m.b,e=>e.getIn(["course","progress","user_chapters",C(e)])||null,e=>e.getIn(["course","progress"]),m.f,(e,t,n,r)=>!r.get(e)&&!(t&&t.get("completed"))&&!(n&&n.get("completed")))),D=Object(l.createSelector)(y,h.m,S.a,(e,t,n)=>{const r=e.get("state"),a=t.get("randomNumber");return"singleExercise"!==n&&("beta_testing"===r||"soft_launched"===r&&a<.3||"live"===r&&a<.1)}),F=Object(l.createSelector)(y,h.s,m.a,h.r,(e,t,n,a)=>{const s=e.toJS(),o=d()(Object(r.c)("glossary:chapter",{count:1}));let c=[];if(Array.isArray(s.chapters)&&(c=s.chapters.map((e,t)=>({id:"chapter-"+e.id,label:`${o} ${t+1}`,progress:0})),s.progress&&t&&a)){const e=n.get("id"),r=(e,t)=>null!==e.get("completed_at")||a.getIn([t,"user","completed","completed"],!1),u={nb_completed_exercises:t.count(r)};c=s.progress.user_chapters.map((t,n)=>{const r=s.chapters[n],a=t.chapter_id===e?u:t;return{id:"chapter-"+t.chapter_id,label:`${o} ${n+1}`,link:`${p.a.urls.datacamp}/courses/${s.id}/chapters/${r.id}/continue`,progress:i()(a.nb_completed_exercises/r.nb_exercises*100)}})}return c}),U=Object(l.createSelector)(y,e=>e.get("reduced_outline")),L=Object(l.createSelector)(U,S.a,(e,t)=>"singleChapter"!==t&&("singleExercise"!==t&&!e));Object(l.createSelector)(A,h.u,(e,t)=>o()(t,"course.completed",!1)&&e||o()(t,"chapter.completed",!1)&&e)},950:function(e,t,n){"use strict";n.r(t),n.d(t,"middlewareRecordStore",(function(){return l})),n.d(t,"middlewareSentry",(function(){return b})),n.d(t,"handleInputResponse",(function(){return J})),n.d(t,"epicClearBackendClientSettings",(function(){return q})),n.d(t,"epicRegisterMux",(function(){return W})),n.d(t,"epicUpdateBackendStatus",(function(){return V})),n.d(t,"epicStopBackendSession",(function(){return Y})),n.d(t,"epicCreateSession",(function(){return Q})),n.d(t,"epicSubmitCode",(function(){return $})),n.d(t,"JSON_RPC_LANGUAGES",(function(){return ne})),n.d(t,"epicRegisterJsonRpcSession",(function(){return re})),n.d(t,"epicStartJsonRpcSession",(function(){return ae})),n.d(t,"epicSubmitJsonRpcCode",(function(){return se})),n.d(t,"epicStopJsonRpcSession",(function(){return oe})),n.d(t,"epicCheckDatawarehouseSession",(function(){return ue})),n.d(t,"epicSetLoading",(function(){return de})),n.d(t,"epicStartDatawarehouseSession",(function(){return le})),n.d(t,"epicPingDatawarehouseSession",(function(){return ge})),n.d(t,"epicGetLogs",(function(){return Oe})),n.d(t,"epicAppendLogsToConsole",(function(){return Se})),n.d(t,"epicGetExercisesFromChapter",(function(){return vt})),n.d(t,"epicUpdateCourseProgress",(function(){return It})),n.d(t,"middlewareResetCourseProgress",(function(){return xt})),n.d(t,"middlewareUpdateCourse",(function(){return Et})),n.d(t,"getChapterProgress",(function(){return $e})),n.d(t,"epicUpdateExercises",(function(){return Ze})),n.d(t,"epicConsoleCode",(function(){return et})),n.d(t,"epicCompletingSubExercise",(function(){return tt})),n.d(t,"epicCompleteSubExercise",(function(){return nt})),n.d(t,"epicCompleteExercise",(function(){return rt})),n.d(t,"epicSubmitExerciseRating",(function(){return at})),n.d(t,"epicSubmitChapterRating",(function(){return st})),n.d(t,"epicShowSlideInModal",(function(){return ot})),n.d(t,"epicUpdateConsoleCode",(function(){return ct})),n.d(t,"tryNavigateToNextExercise",(function(){return it})),n.d(t,"epicSetLtiStatus",(function(){return ut})),n.d(t,"epicNextInternalExercise",(function(){return dt})),n.d(t,"epicExerciseCompleted",(function(){return lt})),n.d(t,"epicFirstChapterCompleted",(function(){return ht})),n.d(t,"epicCheckDailyStreak",(function(){return wt})),n.d(t,"epicRefreshStreakInfo",(function(){return Tt})),n.d(t,"epicUpdateLocation",(function(){return jt})),n.d(t,"requestToLti",(function(){return Je})),n.d(t,"submitToMainApp",(function(){return qe})),n.d(t,"reportOutputToHeap",(function(){return Ke})),n.d(t,"epicExternalCalls",(function(){return We})),n.d(t,"epicSubmitFeedback",(function(){return Ct})),n.d(t,"epicSubmitIssue",(function(){return kt})),n.d(t,"epicShowPayWallModal",(function(){return Rt})),n.d(t,"epicLoggedIn",(function(){return Dt})),n.d(t,"epicStartTimeTracking",(function(){return Ft})),n.d(t,"epicWindow",(function(){return Gt})),n.d(t,"epicRegisterOutputMuxCallbacks",(function(){return Kt})),n.d(t,"epicSessionStarted",(function(){return Vt})),n.d(t,"epicOnCrashedSession",(function(){return Yt})),n.d(t,"epicOnWorkspaceReady",(function(){return Qt})),n.d(t,"epicOnCodeSubmitted",(function(){return $t})),n.d(t,"epicOnReportSent",(function(){return Zt})),n.d(t,"epicNextExternalExercise",(function(){return nn})),n.d(t,"epicSubmitExternalExercise",(function(){return rn})),n.d(t,"epicBoot",(function(){return Fn})),n.d(t,"epicBootFailed",(function(){return Un})),n.d(t,"epicBootSucceeded",(function(){return Ln})),n.d(t,"middlewareReduxArray",(function(){return Hn})),n.d(t,"epicFetchGroupsAiSettings",(function(){return Jn}));var r=n(50),a=n.n(r),s=n(871),o=n.n(s),c=n(10),i=n(506),u=n(2);let d=null;const l=e=>t=>n=>{d=e,t(n)},p=e=>{const t=u.S(e);return e.delete("exercises").set("currentExercise",t).delete("preFetchedData")};let g=()=>e=>t=>e(t);if(c.a.sentryEnabled){let e=0;g=o()(i.b,{...i.a,dataCallback:e=>(e.extra||(e.extra={}),e.extra.state||(e.extra.state=d&&p(d.getState()).toJS()),e),shouldSendCallback:()=>(e+=1,e<=2)},{stateTransformer:p})}const b=g;var f=n(295),m=n.n(f),h=n(259),O=n.n(h),S=n(115),y=n.n(S),v=n(123),I=n.n(v),x=n(52),E=n.n(x),w=n(37),T=n.n(w),j=n(91),_=n.n(j),C=n(64),k=n.n(C),R=n(13),M=n.n(R),N=n(87),P=n(872),A=n(405),D=n(51),F=n(169),U=n(380),L=n(4),H=n(213);let G=0,B=!1;const J=(e,t,n)=>{let r=M.a.Observable.of();if(!T()(t)){const e=((e,t)=>{const n=t(),r=(()=>{switch(n){case"revo":case"r":return"error";default:return"backend-error"}})(),a=I()(e,e=>e.type===r);return a?M.a.Observable.of(L.Rc(a)):M.a.Observable.empty()})(t,n);r=r.concat(M.a.Observable.of(L.Od({results:t})),e)}return r},q=e=>e.ofType(L.s).do(()=>{B=!0}).concatMap(()=>M.a.Observable.of()),K=(e,t,n)=>{const r=(e=>{let{language:t,state:n,userInfo:r}=e;return u.xb(n)?Object(U.a)():u.nb(n)?Object(P.a)({language:t,state:n,userInfo:r}):new m.a.AsyncSession(r,{multiplexerUrl:u.Lb(n),language:t,flattenOutputs:!1,retryOptions:{delay:1e3,nbOfRetry:10}})})({language:e,state:t,userInfo:n});Object(N.b)(r)},W=(e,t)=>{const n=new M.a.BehaviorSubject({status:m.a.AsyncSession.STATUS.NONE});return e.ofType(L.h).switchMap(r=>{const a=t.getState(),s=u.Cb(a),o=k()(r.entities.user.settings,["email","authentication_token"]);if(u.Ab(a))return[L.ed({status:u.a.READY.code})];if(!E()(["r","revo","python","sql","shell","scala","julia","containers"],s))return[];K(s,a,o);const c=Object(N.a)();c.subscribe(e=>n.next(e));const i=()=>u.Cb(t.getState());return M.a.Observable.merge(M.a.Observable.bindCallback((function(){return c.client.on(...arguments)}))("new").filter(e=>null!=e.body.proxyId).map(e=>L.Ac({proxyId:e.body.proxyId})),M.a.Observable.of(L.Wc()),c.output$.concatMap(t=>J(e,t,i)).catch(()=>M.a.Observable.empty()),n.distinctUntilChanged(_.a).map(e=>L.ed({status:e.status,statusCode:e.statusCode,message:e.message,error:e.error})))})},X=M.a.Observable.of({indicator:"none",description:"The Status Page could not be reached."}),z={method:"get",url:"https://swwcn587820m.statuspage.io/api/v2/status.json",options:{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},json:!0}},V=e=>e.ofType(L.E).mergeMap(e=>{let t,n;return e.status===u.a.BROKEN.code?(t=a()(z).map(e=>e.body.status).catch(()=>X),n=M.a.Observable.of(L.Td(!1))):(t=M.a.Observable.empty(),n=M.a.Observable.empty()),M.a.Observable.merge(M.a.Observable.of(L.Be({status:e.status,statusCode:e.statusCode,message:e.message})),n,t.map(e=>L.Ze(e)))}),Y=e=>{const t=e.filter(N.a);return M.a.Observable.merge(t.ofType(L.ab).do(y()(()=>{var e;return null===(e=Object(N.a)())||void 0===e?void 0:e.stopPolling()})),t.ofType(L.Nb).do(y()(()=>{var e;return null===(e=Object(N.a)())||void 0===e?void 0:e.stop()}))).concatMapTo(M.a.Observable.empty())},Q=(e,t,n)=>e.ofType(L.pb).combineLatest(e.ofType(L.w),e=>e).filter(()=>null!=Object(N.a)()).withLatestFrom(e.ofType(L.y),(e,t)=>t).do(e=>{e.force_new&&(O.a.erase("mux-session-id"),O.a.erase("AWSELB"))}).switchMap(e=>{var r;const a=t.getState(),s=u.cc(a).toJS(),o=u.F(a).toJS(),c=u.S(a).toJS(),i=u.hb(a),d=u.Rc(a),{image:l,runtimeConfig:p}=Object(H.a)({course:o,exercise:c,images:i});G=G+1||1;const g=e.force_new||1===G;let b={...e,runtime_config:p,course_id:o.id,image:l,shared_image:o.shared_image,specific_session_id_or_new:d,...s,force_new:g};b=k()(b,["language","runtime_config","force_new","course_id","image","shared_image","specific_session_id_or_new"]);const f=u.P(a),m={command:"init",clientEnvironment:Object(D.a)(n.location.pathname)?"campus_preview":"campus",...e.initCommandOptions};return"success"===f.status&&(m.pec=function(e,t){if(!e)return e;return e.replace(/<SESSION_DB_USER>/g,t.dbUser).replace(/<SESSION_DB_PASSWORD>/g,t.dbPassword).replace(/<SESSION_DB_NAME>/g,t.dbName).replace(/<SESSION_DB_ROLE>/g,t.dbRole)}(m.pec,f.session)),null===(r=Object(N.a)())||void 0===r||r.start(b,m),new Promise(e=>{var t;null===(t=Object(N.a)())||void 0===t||t.client.on("new",t=>{var n;e(L.fe({sessionId:t.body.id})),null===(n=Object(N.a)())||void 0===n||n.client.off("new")})})});const $=(e,t)=>e.ofType(L.A).filter(e=>{let{settings:{command:t,language:n}}=e;return!E()(["resize","expand"],t)||E()(["r","revo"],n)}).map(e=>{const n=t.getState(),r=Object(A.a)(n).prepareSubmit(n,e);return{type:e.type,timestamp:e.timestamp,...r}}).filter(()=>!B).throttleTime(500).concatMap(e=>{if(e.useOutputToActions)return Object(F.a)(e.language,e.output,e.exerciseType);const n=Object(N.a)();if(n){var r;const a=null===(r=u.o(t.getState()))||void 0===r?void 0:r.status;if((null===a||void 0===a?void 0:a.code)!==u.a.BROKEN.code)return n.input(e),[L.Ed({timestamp:e.timestamp,language:e.language})]}return M.a.Observable.empty()});var Z=n(197),ee=n(507),te=n(880);const ne=["java","rust"],re=(e,t)=>{const n=new M.a.BehaviorSubject({status:"busy"});return e.ofType(L.h).switchMap(e=>{var r;const a=t.getState();if(u.Ab(a))return[L.ed({status:u.a.READY.code})];const s=u.Cb(a);if(!ne.includes(s))return[];const o=k()(null===(r=e.entities.user)||void 0===r?void 0:r.settings,["authentication_token","email"]),c=ee.b.safeParse(o);if(!c.success)return[];const i=u.F(a).toJS(),d=u.S(a).toJS(),l=u.hb(a),{image:p,runtimeConfig:g}=Object(H.a)({course:i,exercise:d,images:l}),b=u.cc(a).toJS(),f={language:u.Cb(a),course_id:u.H(a),runtime_config:g,image:p,shared_image:u.gc(a),excluded_session_id:null,...b},m=new ee.a({user:c.data,startOptions:f});return m.subscribeToStatus(e=>n.next(e)),M.a.Observable.merge(M.a.Observable.of(L.de(m)),M.a.Observable.of(L.Wc()),n.distinctUntilChanged(_.a).map(e=>L.ed({status:e.status,message:e.message})))})},ae=(e,t)=>e.ofType(L.y).combineLatest(e.ofType(L.w),e=>e).withLatestFrom(e.ofType(L.y),(e,t)=>t).do(e=>{e.force_new&&(O.a.erase("mux-session-id"),O.a.erase("AWSELB"))}).concatMap(e=>{const n=t.getState(),r=u.Mb(n);if(!r)return M.a.Observable.empty();const a=u.F(n).toJS(),s=u.S(n).toJS(),o=u.Rc(n),c=u.hb(n),{image:i,runtimeConfig:d}=Object(H.a)({course:a,exercise:s,images:c}),l=u.cc(n).toJS(),p={language:u.Cb(n),course_id:u.H(n),runtime_config:d,image:i,shared_image:u.gc(n),force_new:e.force_new,specific_session_id_or_new:o,...l};return M.a.Observable.from(r.start(p)).map(()=>null==r.sessionId?L.Cd():L.fe({sessionId:r.sessionId}))}),se=(e,t)=>e.ofType(L.A).map(e=>{const n=t.getState(),r=Object(A.a)(n).prepareSubmit(n,e);return{type:e.type,timestamp:e.timestamp,...r}}).throttleTime(500).concatMap(e=>{const n=t.getState(),r=u.Mb(n);if(null===r||null===r.client.remoteSession)return M.a.Observable.empty();const a={language:e.language,code:e.code},s=Z.RunCodeParams.safeParse(a);if(!s.success)return M.a.Observable.empty();const o=L.Ed({language:s.data.language,timestamp:e.timestamp});return M.a.Observable.from(Object(te.a)({muxSessionManager:r,commandConfig:{code:e.code,language:e.language,sct:e.sct,command:e.command}})).map(e=>{const t=e.filter(e=>"sct"!==e.type);return[L.Vd(t),L.Od({results:e}),o]}).catch(e=>{const t=e instanceof Error?e.message:e;return[L.Rc({type:"backend-error",payload:t}),o]})}),oe=(e,t)=>{const n=t.getState(),r=u.Mb(n),a=()=>null!==r&&null!==r.client.remoteSession;return M.a.Observable.merge(e.ofType(L.ab).filter(a).do(()=>null===r||void 0===r?void 0:r.client.closeConnection()).concatMapTo(M.a.Observable.empty()),e.ofType(L.Nb).filter(a).do(()=>null===r||void 0===r?void 0:r.stop()).concatMapTo(M.a.Observable.empty())).concatMapTo(M.a.Observable.empty())};var ce=n(77),ie=n(81);const ue=(e,t)=>e.ofType(L.y).switchMap(()=>{const e=t.getState(),n=u.Cb(e),r=u.cc(e).toJS(),a=u.F(e).toJS(),s=u.P(e),o=parseInt(r.course_id,10),c=Number.isInteger(o)?o:a.id;if("loading"===s.status&&s.courseId===c)return M.a.Observable.empty();return"sql"!==n||u.Ab(e)?M.a.Observable.of(L.Wd({courseId:c,session:null})):M.a.Observable.of(L.Yc({courseId:c}))}),de=e=>e.ofType(L.x).switchMap(e=>M.a.Observable.of(L.Yd({courseId:e.courseId}))),le=e=>e.ofType(L.x).switchMap(async e=>{try{return{type:"session",session:await ce.b.createDatawarehouseSession({courseId:e.courseId}),action:e}}catch(t){return function(e){return null!=e&&"object"===typeof e&&("status"in e&&404===e.status||"statusCode"in e&&404===e.statusCode)}(t)?{type:"action",action:L.Wd({courseId:e.courseId,session:null})}:{type:"action",action:L.Xd({error:t,courseId:e.courseId})}}}).switchMap(e=>{if("action"===e.type)return M.a.Observable.of(e.action);const{action:t,session:n}=e,{status:r}=n;switch(r){case"ready":return M.a.Observable.of(L.Wd({courseId:t.courseId,session:{sessionId:n.id,dbName:n.dbName,dbUser:n.dbUser,dbRole:n.dbRole,dbPassword:n.dbPassword}}));case"creating":return(e=>{let{courseId:t,sessionId:n}=e;return M.a.Observable.interval(1e3).switchMap(()=>ce.b.getDatawarehouseSession({sessionId:n})).timeout(6e4).first(e=>{let{status:t}=e;switch(t){case"ready":case"error":case"expired":return!0;case"creating":return!1;default:throw new Error("Unknown session status: "+t)}}).map(e=>{switch(e.status){case"ready":return L.Wd({courseId:t,session:{sessionId:n,dbName:e.dbName,dbUser:e.dbUser,dbRole:e.dbRole,dbPassword:e.dbPassword}});case"error":return L.Xd({error:new Error("Failed to create data warehouse session"),courseId:t});case"expired":return L.Xd({error:new Error("Session has expired"),courseId:t});case"creating":return L.Dd;default:return Object(ie.a)(e)}}).catch(e=>M.a.Observable.of(L.Xd({error:e,courseId:t})))})({courseId:t.courseId,sessionId:n.id});case"error":return M.a.Observable.of(L.Xd({error:new Error("Failed to create data warehouse session"),courseId:t.courseId}));case"expired":return M.a.Observable.of(L.Xd({error:new Error("Session has expired"),courseId:t.courseId}));default:throw new Error("Unknown session status: "+r)}});function pe(e){return null!==e.session}const ge=(e,t)=>e.ofType(L.pb).filter(pe).switchMap(e=>"success"===u.P(t.getState()).status?M.a.Observable.timer(0,3e4).takeWhile(()=>"success"===u.P(t.getState()).status).mergeMap(()=>(ce.b.keepDatawarehouseSessionAlive({sessionId:e.session.sessionId}).catch(()=>M.a.Observable.empty()),M.a.Observable.empty())):M.a.Observable.empty());var be=n(108),fe=n.n(be),me=n(881),he=n.n(me);const Oe=(e,t)=>e.ofType(L.Xb).switchMap(e=>e.status!==u.a.READY.code?[]:M.a.Observable.timer(2e3,2e3).filter(()=>null!=Object(N.a)()).filter(()=>"ShinyExercise"===u.W(t.getState())).do(()=>{Object(N.a)().input({command:"logs"})}).concatMapTo([])),Se=e=>M.a.Observable.merge(e.ofType(L.db).combineLatest(e.ofType(L.d),(e,t)=>({callbackAction:e,logAction:t})),e.ofType(L.y)).scan((e,t)=>{if(t.type===L.y)return 0;const{callbackAction:n,logAction:r}=t;if(!fe()(r.log))return e;const a=he()(r.log,/(\x9B|\x1B\[)[0-?]*[ -/]*[@-~]/g,""),s=a.slice(e);return s&&n.callback([{payload:s}]),a.length},0).concatMapTo([]);var ye=n(30),ve=n(40),Ie=n(53),xe=n(74),Ee=n(376),we=n.n(Ee),Te=n(496),je=n.n(Te),_e=n(534),Ce=n.n(_e),ke=n(31),Re=n.n(ke),Me=n(193),Ne=n(167),Pe=n(253),Ae=n(385),De=n(142),Fe=n(103),Ue=n.n(Fe);const Le=Object(ve.d)(),He=Object(ve.a)(),Ge=Object(ve.e)(),Be=()=>Le.execute(ye.c.endpoint.submitLti()).map(()=>L.ae({status:"success",message:"Score successfully sent"})).catch(()=>M.a.Observable.of(L.ae({status:"failure",message:"There was an error sending your score"}))),Je=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=u.F(t.getState()).toJS(),a=u.u(t.getState()).toJS(),s=Be();if(e.correct||n){const{ltiSettings:e}=Le;return null!=e&&e.chapterId===a.id?e.active?s:M.a.Observable.empty():Le.execute(ye.c.endpoint.ltiIsActive({courseId:r.id,chapterId:a.id})).concatMap(e=>e.body?(Le.ltiSettings={active:!0,chapterId:a.id},s):M.a.Observable.throw("200-but-empty")).catch(()=>(Le.ltiSettings={active:!1,chapterId:a.id},M.a.Observable.of(L.ae({status:"inactive",message:"No LTI key in session"}))))}return M.a.Observable.empty()},qe=(e,t,n)=>((e,t,n)=>{const r=t.getState(),a=u.N(r).get("id")||u.S(r).get("id"),s=u.Xb(t.getState());if(!a)return M.a.Observable.empty();const o=u.S(r).toJS(),c=e.code||u.Db(t.getState())||"",i=u.N(t.getState()),d=i.isEmpty()?Ue()(o,"user.currentXp"):i.get("xpToWin");return(Object(D.a)(n.location.pathname)?Ge:He).execute(ye.c.endpoint.postSubmitCode({authentication_token:Le.getAuthenticationToken(),code:c,correct:e.correct,feedback_msg:e.message,id:a,xp:Re()(e.xp)?d:e.xp,contentLanguage:s}))})(e,t,n).concatMap(n=>{let r=Je(e,t);return n.body&&null!=n.body.xp_gained&&(r=r.merge(M.a.Observable.of(L.id({xpGained:n.body.xp_gained,currentTime:Date.now()})))),r}).catch(e=>{const t=M.a.Observable.of(),n=Ue()(e,"error.status"),r=403===n;return 401===n?t.concat(M.a.Observable.of(L.me({modal:u.e.LOGIN}))):r?t.concat(M.a.Observable.of(L.ne())):t.concat(M.a.Observable.throw(e))}),Ke=(e,t)=>{var n;const r=t.getState(),a=u.Oc(r).get("id"),s=u.N(r).get("id")||u.S(r).get("id"),o=u.N(r).get("type")||u.S(r).get("type"),{lastSubmittedCode:i,lastSubmittedCommand:d}=null!==(n=u.o(r))&&void 0!==n?n:{},l=u.xb(r)?"Pyodide Output":"Mux Output",{appName:p}=c.a;return window.dataLayer&&window.dataLayer.push({event:"heap_event",heap_event_name:"Learn - Campus - "+l,heap_event_properties:{app_id:p,event_category:"learning",identity:a,exercise_id:s,exercise_type:o,code:i,command:d,output_type:e.output.type,output_payload:e.output.payload}}),M.a.Observable.empty()},We=(e,t,n)=>e.concatMap(e=>((e,t,n)=>{switch(t.type){case L.h:return Le.setUserSettings(t.entities.user.settings),M.a.Observable.empty();case L.kb:return Je(t,e,!0);case L.Rb:return qe(t,e,n);case L.gb:return Ke(t,e);case L.c:case L.Mb:return He.execute(ye.c.endpoint.seenCampusTour()).mergeMapTo(M.a.Observable.empty());case L.Kb:return(Object(D.a)(n.location.pathname)?Ge:He).execute(ye.c.endpoint.getSolution({exerciseId:t.exerciseId})).mergeMapTo(M.a.Observable.empty());case L.Gb:return(Object(D.a)(n.location.pathname)?Ge:He).execute(ye.c.endpoint.getHint({exerciseId:t.exerciseId})).mergeMapTo(M.a.Observable.empty());default:return M.a.Observable.empty()}})(t,e,n).catch(()=>M.a.Observable.empty())),Xe=xe.a.exercises.VIDEO_EXERCISE,ze=Object(ve.d)(),Ve=Object(ve.a)(),Ye=Object(ve.e)(),Qe=M.a.Observable.empty(),$e=(e,t)=>Ve.execute(ye.c.endpoint.getChapterProgress(e),e).filterOnSucceedRequest().map(e=>({type:t,data:e.data.body})).catch(()=>M.a.Observable.of({type:t,data:{}})),Ze=(e,t,n)=>e.ofType(L.F).distinctUntilChanged(_.a).switchMap(e=>M.a.Observable.forkJoin($e(e,L.fc),(Object(D.a)(n.location.pathname)?Ye:Ve).execute(ye.c.endpoint.getExercises(e.courseRef,e.chapterRef,{language:u.Xb(t.getState()),authorizationHeader:void 0}),e).concatMapOnSucceedRequest(async n=>{const r=u.F(t.getState()).toObject(),a=e.chapters.find(t=>e.chapterRef===t.get("slug")||Number(e.chapterRef)===Number(t.get("id"))),s=a&&a.get("id");if(Ce()(s)){const e=we()(n.data.body);Object.assign(n.data.body,await Object(Ae.a)(r,s,e))}return n}).map(t=>({...t,injection:e.injection})).concat(M.a.Observable.of(L.Ce({chapterRef:e.chapterRef,chapters:e.chapters}),L.Fe({index:e.exIndex}))).toArray().catch(e=>M.a.Observable.of(e))).mergeMap(e=>M.a.Observable.from(je()(e)))),et=(e,t,n,r)=>{const a=(e,t)=>e.ofType(L.jb).filter(()=>!u.nc(t.getState())).concatMap(e=>{const n=t.getState(),{appName:r}=c.a,a=u.S(n).get("type"),s=u.F(n).get("private"),o=u.Oc(n).get("id"),i=u.N(n).get("id")||u.S(n).get("id"),d=u.Cb(n),l=u.Jc(n),p=(e=>{let{eventProperties:t,isCoursePrivate:n,isUserEnabledForAiErrorExplanation:r,results:a}=e;const s=a.some(e=>"error"===e.type||"r-error"===e.type||"parse-error"===e.type||"try-error"===e.type);if(r&&!n&&s){const e=a.filter(e=>{const t="sct"===e.type&&e.payload.correct;return"sct"!==e.type||t});return window.dataLayer&&window.dataLayer.push({event:"heap_event",heap_event_name:"Learn - Campus - AI Error Explanation Shown",heap_event_properties:t}),e}return a})({eventProperties:{app_id:r,event_category:"learning",identity:o,exercise_id:i,exercise_type:a},isCoursePrivate:s,isUserEnabledForAiErrorExplanation:l,results:e.results});return((e,t,n,r,a,s)=>{const o=u.F(t).get("private"),c=u.Kc(t),i=e.results.some(e=>"sct"===e.type&&!e.payload.correct);c&&!o&&i&&window.dataLayer&&window.dataLayer.push({event:"heap_event",heap_event_name:"Learn - Campus - AI Incorrect Submission Shown",heap_event_properties:{app_id:r,event_category:"learning",identity:a,exercise_id:s,exercise_type:n}})})(e,n,u.U(n),r,o,i),M.a.Observable.from(p).concatMap(e=>Object(F.a)(d,e,a))}).takeUntil(e.ofType(L.ab,L.Nb,L.y));return e.ofType(L.y).do(()=>r.next(a)).concatMapTo(Qe)},tt=(e,t,n)=>e.ofType(L.t).concatMap(e=>qe(L.ue(e.submitSettings),t,n).merge(M.a.Observable.of(L.Oc({...e,isLastExercise:u.Rb(t.getState()).isEmpty()})))),nt=(e,t)=>e.ofType(L.n).concatMap(e=>{const n=t.getState(),r=u.zc(n);return!r.isEmpty()&&e.isLastExercise&&r.reduce((e,t)=>e&&t.getIn(["completed","completed"]),!0)?M.a.Observable.of(L.Nc({...e,submitSettings:{}})):Qe}),rt=(e,t,n)=>e.ofType(L.m).concatMap(e=>{const r=t.getState(),a=u.cb(r),s=u.kc(r),o=u.Ob(r).nextExercise,c=u.S(r).get("type"),i=(a.chapter.completed||a.course.completed)&&s,d=u.v(r),l=u.F(r).get("id"),p=T()(e.submitSettings)?M.a.Observable.of():qe(L.ue(e.submitSettings),t,n);let g=M.a.Observable.of();if(i?g=g.concat(p,ze.execute(ye.c.endpoint.window({type:"chapter_completed",chapter_id:d,course_id:l}),L.Vc())):(c!==Xe||e.show)&&(g=g.merge(p,M.a.Observable.of(L.je({type:"none"})))),c===Xe&&!e.show){if(i)return g.concat(M.a.Observable.of(L.Nc({...e,show:!0}))).catch(()=>Qe);g=g.merge(p),Object(Ie.f)(n,o)}return g.catch(()=>Qe)}),at=(e,t,n)=>e.ofType(L.B).flatMap(e=>{const r=u.S(t.getState()).get("id");return Ve.execute(ye.c.endpoint.submitExerciseRating(r,{rating:e.rating,extraInfo:e.extraInfo})).do(()=>{Re()(e.nextPath)||Object(Ie.f)(n,e.nextPath)}).catch(()=>Qe)}),st=(e,t)=>e.ofType(L.z).flatMap(e=>{const n=u.u(t.getState()).get("id");return Ve.execute(ye.c.endpoint.submitRating(n,{rating:e.rating,extraInfo:e.extraInfo})).concat(e.onFinish({rating:e.rating})).catch(()=>Qe)}),ot=(e,t)=>e.ofType(L.Vb).filter(e=>(e=>{let{action:t,store:n,validActiveKey:r}=e;if(t.activeKey!==r)return!1;const a=n.getState();if("sql"===u.Cb(a))return!0;const s=u.S(a).get("type");if(void 0!==Object(Pe.a)(s))return!0;switch(s){case"TabConsoleExercise":case"MarkdownExercise":return!0;default:return!1}})({action:e,store:t,validActiveKey:"slides"})).mapTo(L.me({modal:u.e.SLIDES})),ct=e=>e.ofType(L.ac).combineLatest(e.ofType(L.db),(e,t)=>({...e,callback:t.callback})).do(e=>{e.callback([e.output])}).concatMapTo([]),it=e=>{let{history:t,nextPath:n,state:r}=e;const a=u.y(r).get("type"),s=u.Hb(r),o=Re()(n)?u.Qb(r):n;switch(s){case"failure":return[L.me({modal:{...u.e.LTI_FAILURE}})];case"pending":return[];case"inactive":case"success":default:return"screen"===a?[L.qe({show:!0})]:(Object(Ie.f)(t,o),[])}},ut=(e,t,n)=>e.ofType(L.tb).concatMap(()=>{const e=t.getState();return u.vb(e)?it({state:e,history:n}):[]}),dt=(e,t,n)=>e.ofType(L.Z).concatMap(()=>{const e=t.getState();if("singleExercise"===Object(u.Eb)(e)){const t=Object(u.S)(e).get("id");return Object(De.a)(t),M.a.Observable.empty()}const r=(e=>u.Ob(e).nextExercise)(e);return[L.ee(r),...it({state:e,history:n,nextPath:r})]}),lt=(e,t)=>e.pipe(Object(Me.c)(L.G),Object(Ne.tap)(()=>{const e=t.getState();if("singleExercise"!==Object(u.Eb)(e))return;const n=u.S(e);n.get("type")===Xe&&Object(De.a)(n.get("id"))}),Object(Ne.ignoreElements)());var pt=n(36),gt=n.n(pt),bt=n(126),ft=n(189);const mt=Object(ve.d)(),ht=(e,t)=>e.ofType(L.G).concatMap(e=>{var n,r;const a=t.getState(),s=u.v(a),o=u.F(a),c=u.cb(a);return(null===(n=c.chapter)||void 0===n?void 0:n.completed)||(null===(r=c.course)||void 0===r?void 0:r.completed)?((e,t,n)=>{const r=bt.a[n.get("technology_id")],a=!n.get("paid");return mt.execute(ye.c.endpoint.getCompletedChapterCount(),e).concatMapOnSucceedRequest(e=>(1===e.data.body.completed_chapter_count&&Object(ft.c)(t,r,a),M.a.Observable.empty())).catch(e=>(gt.a.captureException(e,{extra:{extraInfo:JSON.stringify(e)}}),M.a.Observable.empty()))})(e,s,o):M.a.Observable.empty()}),Ot=Object(ve.a)(),St=Object(ve.e)(),yt=a.a.STATUS,vt=(e,t,n)=>e.ofType(L.u).mergeMap(e=>M.a.Observable.forkJoin($e(e,L.Zb),(Object(D.a)(n.location.pathname)?St:Ot).execute(ye.c.endpoint.getExercises(e.courseRef,e.chapterRef,{language:u.Xb(t.getState()),authorizationHeader:void 0}),e).filterOnSucceedRequest().map(t=>L.He({chapterRef:e.chapterRef,exercises:t.data.body})).catch(e=>M.a.Observable.of(e))).map(e=>{const t=e[0];return{...e[1],progress:T()(t.data)?[]:t.data}})),It=(e,t,n)=>e.ofType(L.F).distinctUntilChanged(_.a).switchMap(e=>(Object(D.a)(n.location.pathname)?St:Ot).execute(ye.c.endpoint.getCourseProgress(e),e).filter(e=>e.requestStatus===yt.SUCCESS).map(e=>L.Ee({data:e.data.body})).catch(()=>M.a.Observable.of(L.Ee({data:{}})))),xt=()=>e=>t=>{if(t.type===L.O){const e=()=>{};Ot.execute(ye.c.endpoint.resetProgress(t)).do(e,e,()=>{window.location=t.redirection}).subscribe(e)}return e(t)},Et=e=>t=>n=>{if(n.type===L.pc){const r=e.getState(),a=u.u(r),{dispatch:s}=e,{chapterRef:o,courseRef:c}=Object(Ie.d)(n.pathname),i=Number(n.query.ex)-1;let d=c===r.getIn(["course","slug"])||Number(c)===r.getIn(["course","id"]);d=!0;const l=o===a.get("slug")||Number(o)===a.get("id"),p=i===r.getIn(["exercises","current"]);return d&&l&&!p?s(L.Fe({index:i})):d&&!l?(s(L.Fe({index:null})),s(L.fd({chapterRef:o,courseRef:c,chapters:r.getIn(["course","chapters"]),exIndex:i,injection:{language:u.Cb(r)}}))):d?t(n):console.error("should never happens")}return t(n)},wt=e=>e.ofType(L.xb).map(()=>L.Hc()),Tt=e=>e.pipe(Object(Me.c)(L.h,L.Ob),Object(Ne.delay)(36e5),Object(Ne.map)(()=>L.Hd())),jt=(e,t)=>e.ofType(L.nc).distinctUntilChanged(_.a).do(()=>{const e=u.ac(t.getState()).get("ex"),n=u.cc(t.getState()).get("ex");Re()(e)||n===e||y()(()=>{var e;return null===(e=Object(N.a)())||void 0===e?void 0:e.stopPolling()})}).switchMap(e=>Object(Ie.e)(u.Gb(t.getState()).get("pathname"))?M.a.Observable.of(L.Re({...e}),L.Jd({force:!0}),L.Kd(),L.gd()):M.a.Observable.of(L.gd()));var _t=n(300);const Ct=(e,t,n)=>e.ofType(L.C).concatMap(e=>{const r=t.getState(),a=u.N(r),s=u.S(r),o=a.size>0,c=o?a.get("feedbackMessages"):s.get("user").get("feedbackMessages"),i=o?a.get("id"):s.get("id"),d=u.F(r).get("id"),l=Object(D.a)(n.location.pathname),p=u.Db(r),g=null!=p||l?Object(_t.a)({courseId:d,submission:p}):p,b=c.find(e=>e.isActive),f="HINT"===b.messageType?"hint":"sct",m={exerciseId:i,userFeedback:e.userFeedback,lastSubmission:g,rating:e.rating,ratingType:f,extraInfo:b.body};return Object(ve.a)().execute(ye.c.endpoint.postFeedback(m),e).catch(e=>M.a.Observable.of(e))}),kt=(e,t,n)=>e.ofType(L.D).concatMap(e=>{const r=t.getState(),a=u.S(r),s=u.Db(r),o=u.F(r).get("id"),c=Object(D.a)(n.location.pathname),i=null!=s||c?Object(_t.a)({courseId:o,submission:s}):s,d={id:a.get("id"),category:e.category,extra_info:e.userFeedback,last_submission:i};return Object(ve.a)().execute(ye.c.endpoint.postFeedbackIssue(d),e).catch(e=>M.a.Observable.of(e))}),Rt=(e,t)=>e.ofType(L.Ib).concatMap(()=>{const e=t.getState(),n=u.v(e),r=u.F(e).get("id"),a=u.Xb(e);return Object(ve.d)().execute(ye.c.endpoint.window({type:"paywall",chapter_id:n,course_id:r,locale:a}),L.Vc()).concatMapOnSucceedRequest(e=>M.a.Observable.of({...e,blockInteraction:!0})).catch(()=>M.a.Observable.empty())});var Mt=n(882),Nt=n.n(Mt),Pt=n(216);const At=new Nt.a(c.a.urls.timetracker,"campus"),Dt=e=>e.ofType(L.h).filter(e=>e.entities.user.status===u.h.LOGIN).do(e=>{const t=e.entities.user.settings.id;At.setUserId(t)}).concatMapTo([]),Ft=(e,t,n)=>e.ofType(L.cc,L.h).filter(()=>Object(Pt.b)(u.Fc(t.getState()).toJS())).filter(()=>!Object(D.a)(n.location.pathname)).do(()=>{const e=t.getState(),n=u.F(e).get("id"),r=u.u(e).get("id"),a=u.S(e).get("id");At.startTracking(n,r,a)}).concatMapTo(M.a.Observable.empty()),Ut=At.manuallyActiveSubject;window.addEventListener("message",e=>{if(null==e.origin)return;if(!(e.origin.endsWith("datacamp.com")||e.origin.endsWith("localhost")))return;null!=e.data&&"UPDATE_TIME"===e.data.type&&Ut.next()});const{STATUS:Lt,getStatus:Ht}=a.a,Gt=(e,t)=>e.ofType(Ht(L.v,Lt.SUCCESS)).switchMap(e=>{var n;const{body:r}=e.data,a=t.getState(),{id:s,technology_id:o,time_needed_in_hours:c,title:i,topic_id:d,xp:l}=u.F(a).toJS(),p=bt.a[o],g=null===(n=r.url)||void 0===n?void 0:n.includes("end_reached");g&&Object(ft.b)({courseId:s,title:i,courseXp:l,technology:p,time_needed_in_hours:c,topic_id:d});let b=M.a.Observable.of(L.je({type:r.type,url:r.url,meta:r.meta,isCourseEndReached:g}));switch(r.type){case"dialog":b=b.concat(M.a.Observable.of(L.me({modal:{...u.e.IFRAME,url:r.url,meta:r.meta,onExit:e.blockInteraction?()=>{}:null}})))}return b});var Bt=n(883);const Jt=e=>Array.isArray(e)?e.some(e=>F.b.includes(e.type)):F.b.includes(e.type),qt=e=>({...e,payload:"string"===typeof e.payload?Object(Bt.a)(e.payload):e.payload}),Kt=e=>{let t;return e.ofType(L.db).combineLatest(e.ofType(L.w),e.ofType(L.y),e=>e).do(e=>{if(t){const e=t;requestAnimationFrame(()=>e.unsubscribe())}const n=Object(N.a)();n&&(t=n.subscribeToOutputs(Jt,(e=>t=>{const n=Array.isArray(t)?t:[t];e.callback(n.map(qt))})(e)))}).concatMapTo(M.a.Observable.empty())};var Wt=n(191);const Xt=Object(Wt.a)(),zt=e=>{83===Number(e.keyCode)&&(e.metaKey||e.ctrlKey)&&e.preventDefault()},Vt=(e,t,n)=>e.ofType(L.E).scan((e,r)=>{const a=Object(D.a)(n.location.pathname),s=r.status,o=e===u.a.NONE.code&&s===u.a.READY.code,c=t.getState(),i=u.xb(c);return o&&!a&&Xt.increment("le_count_exercise_session_ready",{isPyodideBackendEnabled:i},1),s},"none").concatMapTo([]),Yt=(e,t,n)=>(document.removeEventListener("keydown",zt),document.addEventListener("keydown",zt,!1),e.ofType(L.E).filter(e=>u.a.BROKEN.code===e.status).do(e=>{const r=t.getState(),{appName:a}=c.a,s=u.Lb(r),o=e.message,i=u.F(r),d=u.u(r),l=u.S(r),p=Object(D.a)(n.location.pathname),g=u.xb(r),b=g?"Pyodide":"Multiplexer";e.message||gt.a.captureException(e.error,{level:"info",extra:{url:window.location.href}}),null!=window.heap&&window.heap.track(b+" Session Crash",{appName:c.a.appName,chapterId:d.get("id"),courseId:i.get("id"),courseState:i.get("state"),exerciseId:l.get("id"),exerciseType:l.get("type"),exerciseVersion:l.get("version")||"v0",isTeachPreview:p?"true":"false",language:u.Cb(r),multiplexerUrl:s,reason:o,runtimeConfig:u.ec(r)}),p||Xt.increment("le_count_crashed_sessions",{appName:a,message:o,courseId:i.get("id"),isPyodideBackendEnabled:g},1)}).concatMapTo([]));const Qt=(e,t)=>e.ofType(L.y).switchMap(t=>{let{language:n,timestamp:r}=t;return e.ofType(L.E).filter(e=>u.a.READY.code===e.status).map(e=>{let{timestamp:t}=e;return{time:(null!==t&&void 0!==t?t:(new Date).getTime())-r,language:n}}).take(1)}).do(e=>{let{language:n,time:r}=e;const a=function(e,t){const n=t.getState(),r=u.xb(n),a={appName:c.a.appName,language:e,isPyodideBackendEnabled:r},s=u.ec(t.getState());(function(e){return null!=e&&e.includes("gpu")})(s)&&(a.runtimeConfig=s);const o=u.Cc(t.getState());return function(e){return null!=e&&[17].includes(e)}(o)&&(a.technologyId=o),a}(n,t);Xt.observeDistribution("le_time_workspace_to_be_ready",a,r)}).concatMapTo([]),$t=(e,t,n)=>e.ofType(L.cb).exhaustMap(t=>{let{language:n,timestamp:r}=t;return e.ofType(L.jb).timestamp().map(e=>{let{timestamp:t}=e;return{time:t-r,language:n}}).take(1).takeUntil(e.ofType(L.y))}).do(e=>{let{language:r,time:a}=e;if(Object(D.a)(n.location.pathname))return;const s=t.getState(),o=u.xb(s),i=u.F(s).get("id");Xt.observeDistribution("le_time_to_submit_code",{appName:c.a.appName,language:r,isPyodideBackendEnabled:o},a);a>=18e4||Xt.observeDistribution("campus__time_to_submit_code",{language:r,courseId:"python"===r?i:void 0},a)}).concatMapTo([]),Zt=(e,t,n)=>e.ofType(L.D).do(()=>{Xt.increment("le_count_report_sent",{appName:c.a.appName,isTeachPreview:Object(D.a)(n.location.pathname)},1)}).concatMapTo([]),en=Object(ve.d)(),tn=xe.a.exercises.VIDEO_EXERCISE,nn=(e,t,n)=>{const r=()=>{const e=t.getState(),r=u.Ob(e).nextExercise;return[L.ee(r),...it({state:e,history:n,nextPath:r})]};return e.ofType(L.Y).switchMap(()=>{var n;const a=t.getState(),s=Object(u.S)(a);if("singleExercise"===Object(u.Eb)(a))return s.get("type")!==tn&&Object(De.a)(s.get("id")),M.a.Observable.empty();const o=null===(n=u.S(a))||void 0===n?void 0:n.get("type"),c=u.cb(a),i=u.kc(a),d=(c.chapter.completed||c.course.completed)&&i;return o===tn&&d?e.ofType(L.Db).take(1).switchMap(r):r()})},rn=(e,t,n)=>e.ofType(L.Qb).concatMap(e=>{let{code:r,correct:a,message:s,xp:o}=e;const c=t.getState(),i=u.zb(c)?qe({message:s,code:r,correct:a,xp:o},t,n):M.a.Observable.of(L.me({modal:u.e.LOGIN}));if(!a)return i;const d=u.cb(c),l=u.kc(c);if((d.chapter.completed||d.course.completed)&&l){const e=u.v(c),t=u.F(c).get("id");return i.merge(en.execute(ye.c.endpoint.window({type:"chapter_completed",chapter_id:e,course_id:t}),L.Vc()).catch(()=>[L.je({type:"none"})]))}return i.merge([L.je({type:"none"})])});var an=n(35),sn=n.n(an),on=n(255),cn=n.n(on),un=n(357),dn=n.n(un),ln=n(210),pn=n.n(ln),gn=n(66),bn=n.n(gn),fn=n(32),mn=n(386),hn=e=>{let{message:t,originalError:n=null}=e;const r=new Error(t);return r.originalError=n,r};var On=n(246),Sn=n.n(On),yn=n(209),vn=n(153),In=n(84);var xn=e=>{let{authorizationHeader:t,courseRef:n,isPreview:r,language:a=fn.a,preFetchedData:s}=e;const o=s.get("course");switch(o.get("status")){case vn.a.SUCCESS:return Promise.resolve(o.get("data"));case vn.a.FAILED:return Promise.reject(hn({message:o.get("data")}));default:return(r?Object(ve.e)():Object(ve.a)()).execute(ye.c.endpoint.getCourse(encodeURIComponent(n),{language:a,authorizationHeader:t})).toPromise().then(e=>{let{body:t}=e;return{...t,programming_language:Object(In.mapLanguageName)(t.programming_language),...r?{id:n}:{}}}).catch(e=>Promise.reject(function(e){const t=sn()(e,"error.status",null),n=sn()(e,"error.response.text",null),r=400===t&&null!=n&&n.includes("Course is locked");return hn({message:r||404===t?yn.a.COURSE_NOT_FOUND:yn.a.UNKNOWN,originalError:e})}(e)))}};var En=n(884);var wn=n(49);const Tn={courseProgress:null,chapterProgress:null,streakInfo:void 0};var jn=n(151),_n=n.n(jn);const Cn=Object(Wt.a)(),{appName:kn}=c.a,Rn=(e,t,n)=>{var r;const a=null!==(r=null===e||void 0===e?void 0:e.status)&&void 0!==r?r:"none",s=null!=(null===t||void 0===t?void 0:t.timeout),o=["none",200,400,403,404,500,502,503,504].includes(a)?a.toString():"untracked";Cn.increment("count_failed_auth_call",{appName:kn,status_code:o,timeout:s.toString(),attempt:n.toString()},1)};const Mn=["R","Python","SQL"];var Nn=n(65);const Pn=e=>e.slug||e.id,An=e=>fe()(e)&&!T()(e),Dn=async e=>{try{return{data:await e,type:"ok"}}catch(t){return{error:t,type:"error"}}},Fn=e=>e.ofType(L.f).switchMap(async e=>{var t,n;const r={},{authorizationHeader:a,chapterRef:s,courseRef:o,isPreview:i,language:d,originalLocation:l,queryParams:p}=e,g=pn()(sn()(e,["queryParams","ff"],null),An);let b;try{b=parseInt(e.queryParams.ex,10)}catch(ee){b=1}const f=xn({isPreview:i,courseRef:o,preFetchedData:e.preFetchedData,language:d,authorizationHeader:a}),m=(async e=>{let{chapterRef:t,courseAsPromise:n,preFetchedData:r}=e;const a=r.get("chapter");switch(a.get("status")){case vn.a.SUCCESS:return Promise.resolve(a.get("data"));case vn.a.FAILED:return Promise.reject(hn({message:a.get("data")}));default:{const e=await n;let r;return r=Re()(t)?Sn()(e.chapters):I()(e.chapters,e=>e.id.toString()===t||e.slug===t),Re()(r)?Promise.reject(hn({message:yn.a.CHAPTER_NOT_FOUND})):r}}})({courseAsPromise:f,chapterRef:s,preFetchedData:e.preFetchedData}),h=(async e=>{let{authorizationHeader:t,chapterAsPromise:n,courseAsPromise:r,exerciseProgrammingLanguageOverride:a,isPreview:s,language:o,preFetchedData:c}=e;const i=c.get("exercises");switch(i.get("status")){case u.g.SUCCESS:return Promise.resolve(i.get("data"));case u.g.FAILED:return Promise.reject(hn({message:i.get("data")}));default:{const e=s?Object(ve.e)():Object(ve.a)(),c=await r,i=await n;return e.execute(ye.c.endpoint.getExercises(c.id,i.id,{language:o,authorizationHeader:t})).toPromise().then(e=>{let{body:t}=e;return t.map(e=>{const t=a||e.programming_language||c.programming_language;return{...e,language:t,randomNumber:Math.random()}})}).then(e=>Object(Ae.a)(c,i.id,e)).catch(e=>Promise.reject(hn({message:u.b.UNKNOWN,originalError:e})))}}})({exerciseProgrammingLanguageOverride:p.programming_language,isPreview:i,courseAsPromise:f,chapterAsPromise:m,preFetchedData:e.preFetchedData,language:d,authorizationHeader:a}),O=(async e=>{let{authorizationHeader:t,courseAsPromise:n,preFetchedData:r}=e;const a=r.get("courseImages");switch(a.get("status")){case u.g.SUCCESS:return a.get("data");case u.g.FAILED:return Promise.reject(a.get("data"));default:{const e=await n,r=await Object(ve.b)().execute(ye.c.imbEndpoints.getCourseImages({courseId:e.id,authorizationHeader:t})).pipe(Object(Ne.timeout)(5e3)).toPromise().then(e=>{let{body:t}=e;return t});return ye.a.parse(r)}}})({courseAsPromise:f,preFetchedData:e.preFetchedData,authorizationHeader:a}),S=(async e=>{let{courseAsPromise:t,preFetchedData:n}=e;const r=n.get("workspaceTemplate");switch(r.get("status")){case vn.a.SUCCESS:return Promise.resolve(r.get("data"));default:try{const e=await t;try{const{body:t}=await ce.a.getWorkspaceTemplate({courseId:e.id});return{_tag:"template",...t}}catch(a){return Mn.includes(bt.a[e.technology_id])?{_tag:"course",courseId:e.id,title:"Course Notes: "+e.title}:null}}catch(ee){return null}}})({courseAsPromise:f,preFetchedData:e.preFetchedData}),y=(async e=>{let{preFetchedData:t}=e;const n=t.get("categoryPages");return n.get("status")===u.g.SUCCESS?Promise.resolve(n.get("data")):ce.f.getCategoryPageSlugsAndFacets().then(e=>Object(mn.a)(e.body).categoryPages).catch(e=>Promise.reject(hn({message:"Failed to get category page data: "+e})))})({preFetchedData:e.preFetchedData}),v=(async e=>{let{preFetchedData:t}=e;const n=t.get("translatedCourses");if(n.get("status")===u.g.SUCCESS)return Promise.resolve(n.get("data"));const r=(await ce.d.getTranslatedCourses().then(e=>Object(mn.a)(e.body)).catch(e=>Promise.reject(hn({message:"Failed to get translated courses: "+e})))).reduce((e,t)=>{let{course_id:n,language:r,status:a}=t;if("live"!==a)return e;const s=r.split("-")[0].toLowerCase();return void 0===e[n]?e[n]=[s]:e[n].includes(s)||(e[n]=[...e[n],s]),e},{});return null!==r&&void 0!==r?r:null})({preFetchedData:e.preFetchedData});let x,E,w,j,C;c.a.isServerSideRendering?(x=Promise.resolve(void 0),E=Promise.resolve(!1),w=Promise.resolve({courseProgress:void 0,chapterProgress:void 0,streakInfo:void 0}),j=Promise.resolve(void 0),C=Promise.resolve(null)):(x=_n.a.get(c.a.serviceUrls.mainApp+"/api/users/signed_in").withCredentials().set("Accept","application/json").set("X-Requested-With","XMLHttpRequest").retry(1,(e,t)=>{Rn(t,e,1)}).timeout({response:15e3}).then(e=>{let{body:t}=e;return t}).then(e=>({settings:{...e,has_active_subscription:e.active_products.some(e=>e.startsWith("learn.")),multiplexerUrl:c.a.urls.multiplexer},status:wn.a.LOGIN})).catch(e=>{const t=Math.random().toString(36).slice(2);return"status"in e&&401===e.status?{settings:{multiplexerUrl:c.a.urls.multiplexer,email:"visitor_"+t,authentication_token:"visitor_token_"+t},status:wn.a.UNAUTHORIZED}:(Rn(e,e,2),{settings:{multiplexerUrl:c.a.urls.multiplexer,email:"visitor_"+t,authentication_token:"visitor_token_"+t},status:wn.a.ERROR})}),E=(async e=>{let{chapterAsPromise:t,courseAsPromise:n,isPreview:r,skipLtiCheck:a}=e;if(r||a)return!1;const s=await n;if(!s.lti_only)return!1;const o=await t;return Object(ve.d)().execute(ye.c.endpoint.ltiIsActive({courseId:s.id,chapterId:o.id})).toPromise().then(()=>!1).catch(()=>!0)})({isPreview:i,skipLtiCheck:"1"===e.queryParams.skip_lti_check,courseAsPromise:f,chapterAsPromise:m}),w=(async e=>{let{authorizationHeader:t,chapterAsPromise:n,courseAsPromise:r,isPreview:a,userAsPromise:s}=e;if(a)return Tn;if((await s).status===wn.a.UNAUTHORIZED)return Tn;const o=await r,c=await n;return Promise.all([Object(ve.a)().execute(ye.c.endpoint.getCourseProgress({courseRef:o.id,authorizationHeader:t})).toPromise(),Object(ve.a)().execute(ye.c.endpoint.getChapterProgress({authorizationHeader:t,courseRef:o.id,chapterRef:c.id})).toPromise(),Object(ve.d)().execute(ye.c.endpoint.getStreak()).toPromise().catch(()=>({body:void 0}))]).then(e=>{let[{body:t},{body:n},{body:r}]=e;return{courseProgress:t,chapterProgress:n,streakInfo:r}}).catch(()=>Tn)})({authorizationHeader:a,isPreview:i,userAsPromise:x,courseAsPromise:f,chapterAsPromise:m}),j=async function(e){let{courseAsPromise:t,overwrittenFeatureFlags:n,userAsPromise:r}=e;const a=await r;let s,o=null,c=!1;null!=a&&a.status===wn.a.LOGIN&&(o=a.settings.id,c=a.settings.has_active_subscription);try{s=(await t).id}catch(ee){s=null}return Object(Nn.b)({userId:o,hasActiveSubscription:c,courseId:s,overrides:n}).catch(()=>{})}({userAsPromise:x,courseAsPromise:f,overwrittenFeatureFlags:g}),C=(async e=>{let{authorizationHeader:t,chapterAsPromise:n,courseAsPromise:r,exerciseNumber:a,exercisesAsPromise:s,isPreview:o,language:c,preFetchedData:i}=e;const d=i.get("learningRecap");switch(d.get("status")){case u.g.SUCCESS:return Promise.resolve(d.get("data"));case u.g.FAILED:return Promise.reject(d.get("data"));default:{var l;const e=await r,i=Object(ve.a)();if(o)return Promise.resolve(null);const u=await s;let d=a;cn()(a-1,u.length)||(d=1);const p=null===(l=u.find(e=>e.number===d))||void 0===l?void 0:l.id;if(void 0===p)return Promise.resolve(null);const g=await n;return i.execute(ye.c.endpoint.getCourseLearningRecap({authorizationHeader:t,courseId:e.id,nextExerciseId:p,language:Object(fn.e)(c)})).toPromise().then(t=>{let{body:n}=t;const r=ye.b.parse(n);if(null==r)return null;const a=new Date,s=new Date(r.lastActiveDate),o=Object(En.a)(s,a,c);return{summary:r.summary,nextLessonGoal:r.nextLessonGoal,derivedCourseContentId:r.derivedCourseContentId,lastActive:o,chapterNumber:g.number,chapterTitle:g.title,courseTitle:e.title,lastActiveDate:s}}).catch(t=>{var n,r;const a=null!==(n=null===t||void 0===t||null===(r=t.error)||void 0===r?void 0:r.status)&&void 0!==n?n:0;var s,o;a>=500&&gt.a.captureMessage("Error handling learning recap "+(null!==(s=null===t||void 0===t||null===(o=t.error)||void 0===o?void 0:o.message)&&void 0!==s?s:""),{extra:{error:t,course_id:e.id,next_exercise_id:p,status:a}});return Promise.resolve(null)})}}})({authorizationHeader:a,courseAsPromise:f,chapterAsPromise:m,exerciseNumber:b,exercisesAsPromise:h,isPreview:i,preFetchedData:e.preFetchedData,language:d}));const k=await Dn(f),R=await Dn(m),M=await Dn(h);"ok"!==M.type||cn()(b-1,M.data.length)||(b=1);const N=await Dn(S),P=await Dn(C),A=await Dn(O),D=await Dn(x),F="ok"===D.type?null===(t=D.data)||void 0===t||null===(n=t.settings)||void 0===n?void 0:n.id:null;c.a.isServerSideRendering||null==F||gt.a.setUserContext({id:""+F});const U=await Dn(E),H=await Dn(w),G=await Dn(y),B=await Dn(v);if(await Dn(j),"error"===k.type)return r.course={status:u.g.FAILED,data:k.error.message},L.Gc({error:k.error.message,originalError:k.error.originalError,preFetchedData:r});const J=k.data;if(r.course={status:u.g.SUCCESS,data:J},"error"===R.type)return r.chapter={status:u.g.FAILED,data:R.error.message},L.Gc({error:R.error.message,originalError:R.error.originalError,preFetchedData:r});const q=R.data;if(r.chapter={status:u.g.SUCCESS,data:q},r.workspaceTemplate={status:u.g.SUCCESS,data:"ok"===N.type?N.data:null},r.categoryPages={status:u.g.SUCCESS,data:"ok"===G.type?G.data:null},r.translatedCourses={status:u.g.SUCCESS,data:"ok"===B.type?B.data:null},c.a.isServerSideRendering||(r.learningRecap={status:u.g.SUCCESS,data:"ok"===P.type?P.data:null}),"error"===M.type)return r.exercises={status:u.g.FAILED,data:M.error.message},L.Gc({error:M.error.message,originalError:M.error.originalError,preFetchedData:r});const K=M.data;if(r.exercises={status:u.g.SUCCESS,data:K},"error"===U.type)return L.Gc({error:u.b.UNKNOWN,originalError:U.error,preFetchedData:r});if(U.data)return L.Gc({error:u.b.LTI_NOT_ACTIVE,originalError:null,preFetchedData:r});if("error"===H.type)return L.Gc({error:u.b.UNKNOWN,originalError:H.error,preFetchedData:r});const{chapterProgress:W,courseProgress:X,streakInfo:z}=H.data;if("error"===A.type)return L.Gc({error:u.b.UNKNOWN,originalError:A.error,preFetchedData:r});const V=A.data;if(r.courseImages={status:u.g.SUCCESS,data:V},"error"===D.type)return L.Gc({error:u.b.UNKNOWN,originalError:D.error,preFetchedData:r});const Y=D.data;let Q=null;const $={chapterRef:Pn(q),courseRef:Pn(J)},Z=Object(Ie.b)($,{isPreviewMode:e.isPreview,prependCampusSubfolder:!c.a.isServerSideRendering&&window.location.pathname.startsWith("/campus/")});return l.pathname===Z&&_()({ex:b.toString()},l.params)&&c.a.isProductionDomain()||(Q=["https://campus.datacamp.com",d===fn.a?"":"/"+d,Z,"?ex="+b].join("")),L.ve({courseId:J.id,chapterId:q.id,exerciseNumber:b,language:d,learningRecap:"ok"===P.type?P.data:null,entities:{images:V,course:J,exercises:K,user:Y,workspaceTemplate:"ok"===N.type?N.data:null,courseProgress:X,chapterProgress:W,streakInfo:z},pathname:Z,queryParams:{...dn()(e.queryParams,["ff"]),...T()(g)?{}:{ff:g},ex:String(b)},canonical:Q,preFetchedData:r})}),Un=e=>e.ofType(L.g).filter(e=>e.error===u.b.UNKNOWN).do(e=>{let{originalError:t}=e;Re()(t)||gt.a.captureException(t)}).concatMapTo([]),Ln=(e,t,n)=>e.ofType(L.h).do(e=>{let{pathname:t,queryParams:r}=e;const a=`${t}?${bn.a.stringify(r)}`,{location:s}=n;a!==`${s.pathname}${s.search}`&&n.replace(a)}).concatMapTo([]),Hn=e=>t=>n=>{if(Array.isArray(n)){const t=n.map(e.dispatch);return null!=t.find(e=>e instanceof Promise)?Promise.all(t):t}return t(n)};var Gn=n(8),Bn=n(885);const Jn=e=>e.ofType(L.h).filter(e=>e.entities.user.status===u.h.LOGIN).switchMap(async e=>{var t,n,r,a;if(0===(null===(t=e.entities)||void 0===t||null===(n=t.user)||void 0===n||null===(r=n.settings)||void 0===r||null===(a=r.groups)||void 0===a?void 0:a.length))return Object(L.af)(Object(Gn.fromJS)({aiErrorExplanationEnabled:!0,aiSolutionExplanationEnabled:!0}));const s=await Object(Bn.a)();return Object(L.af)(Object(Gn.fromJS)(s))});a.a.importRxExtensions()}},[[1820,73,84,79,78,105,98,110,93,101,83,97,113,95,100,104,80,92,102,109,82,94,89,106,91,86,103,90,114,88,99,107,112,108,96,87,111,81,85,50,48,52,51,54,53]]]);
//# sourceMappingURL=main~315ba38e.b21370c0.chunk.js.map