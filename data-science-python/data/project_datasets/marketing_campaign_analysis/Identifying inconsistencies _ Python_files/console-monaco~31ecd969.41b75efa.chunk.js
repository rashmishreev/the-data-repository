(this["webpackJsonpcampus-app-v2"]=this["webpackJsonpcampus-app-v2"]||[]).push([[41],{2117:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(991),r="object"===typeof window;n.n(o).a},2317:function(e,t,n){"use strict";var o=n(14),r=n.n(o),c=n(13),u=n(167);const i=["r","python","scala"];var a=e=>i.includes(e),s=n(2269);var l=e=>t=>{if(!a(e))return[];switch(e){case"python":if(Array.isArray(t.payload))return t.payload.map(e=>"string"===typeof e?{additionalDetail:"keyword",kind:s.a.Value,label:e,textToInsert:e}:{additionalDetail:e.module,kind:s.a.Value,label:e.completion,textToInsert:e.completion});throw new Error("Unexpected autocompletion output format for language");case"r":if(!Array.isArray(t.payload))return(e=>Array.isArray(e.comps)?e.comps.map((t,n)=>({additionalDetail:"{".concat(e.packages[n],"}"),kind:s.a.Value,label:t,textToInsert:t})):[{additionalDetail:"{".concat(e.packages,"}"),kind:s.a.Value,label:e.comps,textToInsert:e.comps}])(t.payload);throw new Error("Unexpected autocompletion output format for language");default:return[]}};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}const b=5e3,m=e=>"code-completion"===e.type,p=e=>Array.isArray(e)?c.Observable.of(...e):c.Observable.of(e);var f=e=>{let{exerciseDetails:t,multiplexerClient:n,timeoutInMs:o=b}=e;return{provideCompletionItems:e=>{let{wordAtPosition:c}=e;if(!a(n.options.language))return Promise.resolve([]);const i=n.output$.pipe(Object(u.flatMap)(p),Object(u.filter)(m),Object(u.take)(1),Object(u.timeout)(o)).toPromise().then(l(n.options.language)).catch(()=>[]);return n.input(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({autoComp:c.word,code:"",command:"code_completion",cursorPos:c.endColumn},t)),i}}},O=n(3128),g=n(1),y=n(87);t.a=e=>{let{language:t,pec:n,sct:o,solution:r,type:c}=e;const u=Object(g.useMemo)(()=>Object(O.a)(),[]),i=Object(g.useMemo)(()=>(e=>{let{pec:t,sct:n,solution:o,type:r}=e;return f({exerciseDetails:{pec:t,sct:n,solution:o,type:r},multiplexerClient:Object(y.a)()})})({pec:n,sct:o,solution:r,type:c}),[n,o,r,c]);return Object(g.useMemo)(()=>"RCppExercise"===c?[u]:["r","python"].includes(t)?"python"===t?[u]:[u,i]:[u],[u,i,c,t])}},2456:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(2038);const r=o.editor.EditorOption},2457:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(14),r=n.n(o),c=n(84),u=n.n(c);class i{constructor(e){let{inputNumber:t,language:n,value:o}=e;r()(this,"inputNumber",void 0),r()(this,"language",void 0),r()(this,"value",void 0),this.inputNumber=t,this.language=n,this.value=o}static getPrompt(e,t){return u.a[e].prompt(t).trim()}get prompt(){return i.getPrompt(this.language,this.inputNumber)}get outputLabel(){return u.a[this.language].outputLabel(this.inputNumber).trim()||void 0}}},2752:function(e,t,n){"use strict";var o=n(1);t.a=function(e,t){var n=Object(o.useRef)((function(){}));Object(o.useEffect)((function(){n.current=e})),Object(o.useEffect)((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},2955:function(e,t,n){"use strict";var o=n(1);t.a=()=>{const[e,t]=Object(o.useState)([]),[n,r]=Object(o.useState)([""]),[c,u]=Object(o.useState)(0),i=Object(o.useRef)();i.current=n[c];const a=Object(o.useCallback)(e=>{const t=[...n];t[c]=e,r(t)},[c,n]),s=Object(o.useCallback)(()=>{const n=i.current;if(null==n)return;const o=n===e[0],c=0===n.trim().length;o||c?r(["",...e]):(t([n,...e]),r(["",n,...e]),u(0))},[e]),l=Object(o.useCallback)(()=>{c<n.length-1&&u(c+1)},[c,n.length]);return{addCurrentCommandToHistory:s,copyNextHistoryItemToCurrentCommand:Object(o.useCallback)(()=>{c>0&&u(c-1)},[c]),copyPreviousHistoryItemToCurrentCommand:l,currentCommandRef:i,numberOfHistoryItems:e.length,setCurrentCommand:a}}},2956:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n(1),r=n(2752),c=n(2456);const u=e=>{let{editorInstance:t,monacoInstance:n}=e;const[u,i]=Object(o.useState)(100),[a]=Object(o.useState)(Date.now()),s=Object(o.useCallback)(()=>{var e;const o=null===t||void 0===t||null===(e=t.getDomNode())||void 0===e?void 0:e.querySelector(".line-numbers");null!=o&&(o.scrollHeight===(null===t||void 0===t?void 0:t.getOption(c.a.lineHeight))&&Date.now()-a>5e3?i(null):null===n||void 0===n||n.editor.remeasureFonts())},[t,n,a]);Object(r.a)(s,u)}},2957:function(e,t,n){"use strict";var o=n(1),r=n(2457);t.a=e=>{let{multiplexerOutputs:t,numberOfHistoryItems:n}=e;const[c,u]=Object(o.useState)([]),i=Object(o.useMemo)(()=>{const e=t.map(e=>({type:"SessionOutput",value:e}));return c.forEach((t,n)=>{e.splice(t.indexToInsertInto+n,0,{type:"UserInput",value:t.userInput})}),e},[t,c]);return{addNewUserInputToOutputs:Object(o.useCallback)(e=>{let{command:o,language:c}=e;u(e=>e.concat({indexToInsertInto:t.length>0?t.length:0,userInput:new r.a({inputNumber:n+1,language:c,value:o})}))},[t,n]),clearUserInputs:Object(o.useCallback)(()=>u([]),[]),mergedInputsWithOutputs:i}}},2958:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return m}));var o=n(14),r=n.n(o);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const i=e=>e.getPosition()||{column:0,lineNumber:1},a=e=>{var t;return(null===(t=e.getModel())||void 0===t?void 0:t.getLineCount())||1},s=e=>{const t=i(e),n=1===(null===t||void 0===t?void 0:t.lineNumber);return a(e)>1&&!n},l=e=>{const t=i(e),n=a(e),o=n>1,r=(null===t||void 0===t?void 0:t.lineNumber)===n;return o&&!r},d=e=>{const t=i(e);e.setPosition(u(u({},t),{},{lineNumber:(null===t||void 0===t?void 0:t.lineNumber)-1}))},b=e=>{const t=i(e);e.setPosition(u(u({},t),{},{lineNumber:(null===t||void 0===t?void 0:t.lineNumber)+1}))},m=e=>{e.setPosition({column:9999,lineNumber:9999})}},3018:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n(5),r=n(1),c=n(806),u=n(0);var i={name:"14aqqyr",styles:"pre{border:none;margin:0;}code{font-size:1rem;margin:0;}"};const a=e=>{let{children:t,colorizeCodeElement:n,language:o,theme:c}=e;const a=Object(r.useRef)(null);return Object(r.useEffect)(()=>{n(a.current,c)},[n,a,t,c]),Object(u.d)("div",{css:i},Object(u.d)("span",{className:"dc-u-p-none","data-lang":o,key:c,ref:a},t))};var s=n(796);const l=e=>{let{colorizeCodeElement:t,theme:n,userInput:o}=e;return Object(u.d)("div",{style:{alignItems:"baseline",display:"flex"}},Object(u.d)(s.a,{theme:n},o.prompt),Object(u.d)(a,{colorizeCodeElement:t,language:o.language,theme:n},o.value))},d=e=>{let{className:t,colorizeCodeElement:n,outputs:r,theme:i}=e;return Object(u.d)("div",{className:t,style:{backgroundColor:"dark"===i?o.a.colors.navy:o.a.colors.white,fontFamily:o.a.fontFamilies.mono,fontSize:o.a.fontSizes.medium,paddingLeft:10}},r.map((e,t)=>{if("UserInput"===e.type)return Object(u.d)(l,{colorizeCodeElement:n,key:t,theme:i,userInput:e.value});const o=r[t-1];return Object(u.d)(c.a,{key:t,sessionOutput:e.value,theme:i,userInput:"UserInput"===(null===o||void 0===o?void 0:o.type)?o.value:void 0})}))}},3026:function(e,t,n){"use strict";var o=n(1),r=n(2117).a?window:null,c=function(e){return!!e.addEventListener},u=function(e){return!!e.on},i=function(e,t,n,i){void 0===n&&(n=r),Object(o.useEffect)((function(){if(t&&n)return c(n)?n.addEventListener(e,t,i):u(n)&&n.on(e,t,i),function(){c(n)?n.removeEventListener(e,t,i):u(n)&&n.off(e,t,i)}}),[e,t,n,JSON.stringify(i)])},a=function(){};t.a=function(e,t,n,r){void 0===t&&(t=a),void 0===n&&(n={}),void 0===r&&(r=[e]);var c=n.event,u=void 0===c?"keydown":c,s=n.target,l=n.options,d=Object(o.useMemo)((function(){var n,o="function"===typeof(n=e)?n:"string"===typeof n?function(e){return e.key===n}:n?function(){return!0}:function(){return!1};return function(e){if(o(e))return t(e)}}),r);i(u,d,s,l)}},3130:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return P}));var o=n(14),r=n.n(o),c=n(84),u=n.n(c),i=n(5),a=n(0),s=n(1),l=n(2311),d=n(2451),b=n(2456),m=n(3018),p=n(2958),f=n(795),O=n(2955),g=n(2957),y=n(2956),v=n(2457);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const C={contextmenu:!1,folding:!1,fontSize:16,glyphMargin:!1,hideCursorInOverviewRuler:!0,lineNumbers:"off",minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,roundedSelection:!1,scrollbar:{vertical:"hidden"},scrollBeyondLastLine:!1,suggest:{localityBonus:!0,showIcons:!1},wordWrap:"on"},k=()=>{};var w={name:"1ff36h2",styles:"flex-grow:1"},I={name:"1arh02h",styles:"flex-grow:0;height:auto;padding-bottom:5px"};const P=Object(s.memo)(Object(s.forwardRef)((t,n)=>{let{autoCompletionProviders:o,className:r,disableCommandExecution:c=!1,exercise:j,language:P,multiplexerOutputs:E,onClearConsole:x,onExecuteCommand:S,onTakeHintOrSolution:N,theme:D="light"}=t;const M=Object(s.useRef)(null),T=Object(s.useRef)(null),[R,H]=Object(s.useState)(24),{addCurrentCommandToHistory:K,copyNextHistoryItemToCurrentCommand:B,copyPreviousHistoryItemToCurrentCommand:L,currentCommandRef:A,numberOfHistoryItems:z,setCurrentCommand:V}=Object(O.a)(),[U,W]=Object(s.useState)(),[J,_]=Object(s.useState)();Object(s.useImperativeHandle)(n,()=>({focus:()=>{var e;return null===(e=M.current)||void 0===e?void 0:e.focus()}})),Object(y.a)({editorInstance:J,monacoInstance:U});const{addNewUserInputToOutputs:F,clearUserInputs:q,mergedInputsWithOutputs:Y}=Object(g.a)({multiplexerOutputs:E,numberOfHistoryItems:z}),$=Object(s.useCallback)(()=>{var e;null===(e=M.current)||void 0===e||e.focus()},[]),G=Object(s.useCallback)(e=>1===e?v.a.getPrompt(P,z+1):u.a[P].breakLine.trim(),[P,z]),Q=Object(s.useMemo)(()=>h(h({},C),{},{lineNumbers:G,lineNumbersMinChars:v.a.getPrompt(P,Math.max(1,z+1)).length+1}),[G,P,z]),X=Object(s.useCallback)((t,n)=>{W(n),_(t),t.onDidChangeModelContent(()=>{e(()=>{var e,n;if(""===A.current)return void H(t.getOption(b.a.lineHeight));const o=null===(e=t.getDomNode())||void 0===e||null===(n=e.querySelector(".view-lines"))||void 0===n?void 0:n.getBoundingClientRect().height;null!=o&&H(o)})})},[A]),Z=Object(s.useCallback)((e,t)=>{const n=[{callback:()=>{Object(p.a)(e)?Object(p.e)(e):(L(),Object(p.d)(e))},id:"console-up",keyBindings:[t.KeyCode.UpArrow],preCondition:"!suggestWidgetVisible"},{callback:()=>{Object(p.b)(e)?Object(p.c)(e):(B(),Object(p.d)(e))},id:"console-down",keyBindings:[t.KeyCode.DownArrow],preCondition:"!suggestWidgetVisible"},{callback:()=>{c||null!=A.current&&(F({command:A.current,language:P}),S({command:A.current,commandType:"console"}),K())},id:"console-enter",keyBindings:[t.KeyCode.Enter],preCondition:"!suggestWidgetVisible"},{callback:k,id:"console-f1",keyBindings:[t.KeyCode.F1]},{callback:k,id:"console-find",keyBindings:[t.KeyMod.CtrlCmd|t.KeyCode.KEY_F]},{callback:()=>{"BokehServerExercise"===j.type&&S({command:"'ctrl-c'",commandType:"bokeh_server"})},id:"ctrlCmd-c",keyBindings:[t.KeyMod.WinCtrl|t.KeyCode.KEY_C]}];if(null!=x){const e=()=>{q(),x()},o=/Mac/.test(navigator.platform)?t.KeyMod.WinCtrl:t.KeyMod.CtrlCmd;n.push({callback:e,id:"clear-console",keyBindings:[o|t.KeyCode.KEY_L]})}return n},[L,B,F,q,x,A,P,S,K,c,j.type]);Object(f.a)({divElementRef:T,scrollWhenAnyValueChanges:[A.current,Y]});const ee=Object(s.useCallback)((e,t)=>{null!=U&&null!=e&&U.editor.colorizeElement(e,{theme:"dark"===t?d.a:d.b})},[U]);return Object(a.d)("div",{className:r,ref:T,style:{backgroundColor:"dark"===D?i.a.colors.navy:i.a.colors.white,display:"flex",flexDirection:"column",height:"100%",overflowY:Y.length>0?"auto":"visible"}},Object(a.d)(m.a,{colorizeCodeElement:ee,outputs:Y,theme:D}),Object(a.d)(l.a,{autoCompletionProviders:o,css:I,editorName:"MonacoConsole",height:R,language:P,monacoEditorOptions:Q,onEditorDidMount:X,onTakeHintOrSolution:N,onValueChange:V,provideKeyBindings:Z,ref:M,theme:D,value:A.current||""}),Object(a.d)("div",{css:w,onClick:$}))}));P.displayName="Console"}).call(this,n(988).setImmediate)},3154:function(e,t,n){"use strict";n.r(t);var o=n(3130),r=n(5),c=n(0),u=n(1),i=n(12),a=n(4),s=n(2),l=n(2317),d=n(247),b=n(3026);var m=e=>{let{focus:t}=e;return Object(b.a)(!0,e=>{const n=String.fromCharCode(e.keyCode);return e.ctrlKey&&!e.altKey&&"2"===n&&(e.preventDefault(),null!=t&&t()),!1},{event:"keydown"},[t])};t.default=e=>{let{language:t,uiTheme:n}=e;const b=Object(i.a)(),p=Object(i.b)(e=>s.S(e).toJS()),{id:f,pre_exercise_code:O,sct:g,solution:y,type:v}=p,j=Object(i.b)(s.j),h=Object(i.b)(s.m),C=Object(i.b)(s.Vb),k=Object(u.useRef)(null),w=Object(l.a)({pec:O,sct:g,solution:y,type:v,language:t}),I=Object(u.useMemo)(()=>n.toLowerCase(),[n]),P=Object(u.useCallback)(()=>{b(a.Jc())},[b]),E=Object(u.useCallback)(e=>{b(a.Vd(e))},[b]),x=Object(u.useCallback)(e=>{let{command:n,commandType:o}=e;b(a.hd({code:n,command:o,pec:O,type:v,sct:g,solution:y,language:t,id:f}))},[b,f,t,O,g,y,v]);m({focus:null==k.current?void 0:k.current.focus}),Object(u.useEffect)(()=>{b(a.Id(E))},[E,b]),Object(u.useEffect)(()=>{j&&b(a.Jc())},[b,j]);const S=Object(i.b)(s.gb),N=Object(i.b)(s.S).get("id"),D=Object(i.b)(s.S).getIn(["user","isSolutionShown"],!1),M=Object(i.b)(s.N).get("id"),T=null!=M?M:N,{xp:R}=S;Object(u.useEffect)(()=>{b(a.Jc())},[b,T]);const H=Object(u.useCallback)(()=>{if(S.isSolution){if(D)return;b(a.pe(t,T,R))}else b(a.le(T,R))},[T,b,S.isSolution,D,t,R]);return Object(c.d)("div",{css:{height:"100%"},"data-cy":"console-editor"},Object(c.d)(o.a,{css:{borderBottomLeftRadius:r.a.borderRadius.medium,borderBottomRightRadius:r.a.borderRadius.medium},multiplexerOutputs:C,ref:k,autoCompletionProviders:w,language:t,theme:I,exercise:p,onExecuteCommand:x,onTakeHintOrSolution:H,onClearConsole:P,disableCommandExecution:!h}),Object(c.d)(d.a,null))}}}]);
//# sourceMappingURL=console-monaco~31ecd969.41b75efa.chunk.js.map