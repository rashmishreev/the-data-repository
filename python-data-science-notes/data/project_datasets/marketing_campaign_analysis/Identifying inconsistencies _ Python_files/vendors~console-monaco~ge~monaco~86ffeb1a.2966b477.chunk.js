(this["webpackJsonpcampus-app-v2"]=this["webpackJsonpcampus-app-v2"]||[]).push([[18],{1951:function(e,t,n){"use strict";n.d(t,"u",(function(){return o})),n.d(t,"C",(function(){return a})),n.d(t,"G",(function(){return l})),n.d(t,"F",(function(){return h})),n.d(t,"s",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"n",(function(){return _})),n.d(t,"y",(function(){return m})),n.d(t,"z",(function(){return p})),n.d(t,"d",(function(){return L})),n.d(t,"t",(function(){return C})),n.d(t,"B",(function(){return b})),n.d(t,"p",(function(){return k})),n.d(t,"m",(function(){return v})),n.d(t,"i",(function(){return w})),n.d(t,"w",(function(){return N})),n.d(t,"f",(function(){return S})),n.d(t,"e",(function(){return T})),n.d(t,"q",(function(){return I})),n.d(t,"E",(function(){return x})),n.d(t,"b",(function(){return E})),n.d(t,"r",(function(){return D})),n.d(t,"a",(function(){return M})),n.d(t,"g",(function(){return O})),n.d(t,"j",(function(){return R})),n.d(t,"x",(function(){return y})),n.d(t,"v",(function(){return A})),n.d(t,"c",(function(){return z})),n.d(t,"A",(function(){return P})),n.d(t,"o",(function(){return F})),n.d(t,"l",(function(){return B})),n.d(t,"k",(function(){return V})),n.d(t,"D",(function(){return U}));n(1955),n(1933);var i=n(3040),s=n(2794),r=n(1965);class o{constructor(e,t){this.language=e,this.id=t}}class a{static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(1792&e)>>>8}static getFontStyle(e){return(14336&e)>>>11}static getForeground(e){return(8372224&e)>>>14}static getBackground(e){return(4286578688&e)>>>23}static getClassNameFromMetadata(e){let t="mtk"+this.getForeground(e),n=this.getFontStyle(e);return 1&n&&(t+=" mtki"),2&n&&(t+=" mtkb"),4&n&&(t+=" mtku"),t}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let s=`color: ${t[n]};`;return 1&i&&(s+="font-style: italic;"),2&i&&(s+="font-weight: bold;"),4&i&&(s+="text-decoration: underline;"),s}}const l=function(){let e=Object.create(null);return e[0]="symbol-method",e[1]="symbol-function",e[2]="symbol-constructor",e[3]="symbol-field",e[4]="symbol-variable",e[5]="symbol-class",e[6]="symbol-struct",e[7]="symbol-interface",e[8]="symbol-module",e[9]="symbol-property",e[10]="symbol-event",e[11]="symbol-operator",e[12]="symbol-unit",e[13]="symbol-value",e[14]="symbol-constant",e[15]="symbol-enum",e[16]="symbol-enum-member",e[17]="symbol-keyword",e[27]="symbol-snippet",e[18]="symbol-text",e[19]="symbol-color",e[20]="symbol-file",e[21]="symbol-reference",e[22]="symbol-customcolor",e[23]="symbol-folder",e[24]="symbol-type-parameter",e[25]="account",e[26]="issues",function(t){const n=e[t];let i=n&&r.d.get(n);return i||(console.info("No codicon found for CompletionItemKind "+t),i=r.b.symbolProperty),i.classNames}}();let h=function(){let e=Object.create(null);return e.method=0,e.function=1,e.constructor=2,e.field=3,e.variable=4,e.class=5,e.struct=6,e.interface=7,e.module=8,e.property=9,e.event=10,e.operator=11,e.unit=12,e.value=13,e.constant=14,e.enum=15,e["enum-member"]=16,e.enumMember=16,e.keyword=17,e.snippet=27,e.text=18,e.color=19,e.file=20,e.reference=21,e.customcolor=22,e.folder=23,e["type-parameter"]=24,e.typeParameter=24,e.account=25,e.issue=26,function(t,n){let i=e[t];return"undefined"!==typeof i||n||(i=9),i}}();var u,c,d,g,f;!function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(u||(u={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(c||(c={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(d||(d={})),function(e){const t=new Map;t.set("file",0),t.set("module",1),t.set("namespace",2),t.set("package",3),t.set("class",4),t.set("method",5),t.set("property",6),t.set("field",7),t.set("constructor",8),t.set("enum",9),t.set("interface",10),t.set("function",11),t.set("variable",12),t.set("constant",13),t.set("string",14),t.set("number",15),t.set("boolean",16),t.set("array",17),t.set("object",18),t.set("key",19),t.set("null",20),t.set("enum-member",21),t.set("struct",22),t.set("event",23),t.set("operator",24),t.set("type-parameter",25);const n=new Map;n.set(0,"file"),n.set(1,"module"),n.set(2,"namespace"),n.set(3,"package"),n.set(4,"class"),n.set(5,"method"),n.set(6,"property"),n.set(7,"field"),n.set(8,"constructor"),n.set(9,"enum"),n.set(10,"interface"),n.set(11,"function"),n.set(12,"variable"),n.set(13,"constant"),n.set(14,"string"),n.set(15,"number"),n.set(16,"boolean"),n.set(17,"array"),n.set(18,"object"),n.set(19,"key"),n.set(20,"null"),n.set(21,"enum-member"),n.set(22,"struct"),n.set(23,"event"),n.set(24,"operator"),n.set(25,"type-parameter"),e.fromString=function(e){return t.get(e)},e.toString=function(e){return n.get(e)},e.toCssClassName=function(e,t){const i=n.get(e);let s=i&&r.d.get("symbol-"+i);return s||(console.info("No codicon found for SymbolKind "+e),s=r.b.symbolProperty),`${t?"inline":"block"} ${s.classNames}`}}(g||(g={}));class _{constructor(e){this.value=e}}_.Comment=new _("comment"),_.Imports=new _("imports"),_.Region=new _("region"),function(e){e[e.Other=0]="Other",e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(f||(f={}));const m=new i.a,p=new i.a,L=new i.a,C=new i.a,b=new i.a,k=new i.a,v=new i.a,w=new i.a,N=new i.a,S=new i.a,T=new i.a,I=new i.a,x=new i.a,E=new i.a,D=new i.a,M=new i.a,O=new i.a,R=new i.a,y=new i.a,A=new i.a,z=new i.a,P=new i.a,F=new i.a,B=new i.a,V=new i.a,U=new s.a},2026:function(e,t,n){"use strict";n.d(t,"b",(function(){return Y})),n.d(t,"a",(function(){return ee}));var i=n(1945),s=n(1932),r=n(1931),o=n(1936),a=n(1955),l=n(1967),h=n(1941),u=n(1933),c=n(1949),d=n(2008),g=n(2403),f=n(2791),_=n(2792),m=n(2793);class p{constructor(){this.changeType=1}}class L{constructor(e,t){this.changeType=2,this.lineNumber=e,this.detail=t}}class C{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class b{constructor(e,t,n){this.changeType=4,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class k{constructor(){this.changeType=5}}class v{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++){if(this.changes[t].changeType===e)return!0}return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,s=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new v(n,i,s,r)}}class w{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=v.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=w._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new w(t,n)}static _mergeChangeEvents(e,t){return{changes:[].concat(e.changes).concat(t.changes),eol:t.eol,versionId:t.versionId,isUndoing:e.isUndoing||t.isUndoing,isRedoing:e.isRedoing||t.isRedoing,isFlush:e.isFlush||t.isFlush}}}var N=n(2405),S=n(1950),T=n(2085),I=n(1951),x=n(2061),E=n(2082),D=n(2169),M=n(1940);class O{constructor(){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0}_reset(e){this._beginState=[],this._valid=[],this._len=0,this._invalidLineStartIndex=0,e&&this._setBeginState(0,e)}flush(e){this._reset(e)}get invalidLineStartIndex(){return this._invalidLineStartIndex}_invalidateLine(e){e<this._len&&(this._valid[e]=!1),e<this._invalidLineStartIndex&&(this._invalidLineStartIndex=e)}_isValid(e){return e<this._len&&this._valid[e]}getBeginState(e){return e<this._len?this._beginState[e]:null}_ensureLine(e){for(;e>=this._len;)this._beginState[this._len]=null,this._valid[this._len]=!1,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._beginState.splice(e,t),this._valid.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;let n=[],i=[];for(let s=0;s<t;s++)n[s]=null,i[s]=!1;this._beginState=S.a(this._beginState,e,n),this._valid=S.a(this._valid,e,i),this._len+=t}_setValid(e,t){this._ensureLine(e),this._valid[e]=t}_setBeginState(e,t){this._ensureLine(e),this._beginState[e]=t}setEndState(e,t,n){if(this._setValid(t,!0),this._invalidLineStartIndex=t+1,t===e-1)return;const i=this.getBeginState(t+1);if(null===i||!n.equals(i))return this._setBeginState(t+1,n),void this._invalidateLine(t+1);let s=t+1;for(;s<e&&this._isValid(s);)s++;this._invalidLineStartIndex=s}setFakeTokens(e){this._setValid(e,!1)}applyEdits(e,t){const n=e.endLineNumber-e.startLineNumber,i=t;for(let s=Math.min(n,i);s>=0;s--)this._invalidateLine(e.startLineNumber+s-1);this._acceptDeleteRange(e),this._acceptInsertText(new h.a(e.startLineNumber,e.startColumn),t)}_acceptDeleteRange(e){e.startLineNumber-1>=this._len||this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){e.lineNumber-1>=this._len||this._insertLines(e.lineNumber,t)}}class R extends r.a{constructor(e){super(),this._isDisposed=!1,this._textModel=e,this._tokenizationStateStore=new O,this._tokenizationSupport=null,this._register(I.D.onDidChange(e=>{const t=this._textModel.getLanguageIdentifier();-1!==e.changedLanguages.indexOf(t.language)&&(this._resetTokenizationState(),this._textModel.clearTokens())})),this._register(this._textModel.onDidChangeRawContentFast(e=>{e.containsEvent(1)&&this._resetTokenizationState()})),this._register(this._textModel.onDidChangeContentFast(e=>{for(let t=0,n=e.changes.length;t<n;t++){const n=e.changes[t],[i]=Object(D.f)(n.text);this._tokenizationStateStore.applyEdits(n.range,i)}this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeAttached(()=>{this._beginBackgroundTokenization()})),this._register(this._textModel.onDidChangeLanguage(()=>{this._resetTokenizationState(),this._textModel.clearTokens()})),this._resetTokenizationState()}dispose(){this._isDisposed=!0,super.dispose()}_resetTokenizationState(){const[e,t]=function(e){const t=e.getLanguageIdentifier();let n=e.isTooLargeForTokenization()?null:I.D.get(t.language),s=null;if(n)try{s=n.getInitialState()}catch(r){Object(i.e)(r),n=null}return[n,s]}(this._textModel);this._tokenizationSupport=e,this._tokenizationStateStore.flush(t),this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&M.k(()=>{this._isDisposed||this._revalidateTokensNow()})}_revalidateTokensNow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._textModel.getLineCount();const t=new D.b,n=E.a.create(!1);for(;this._hasLinesToTokenize()&&!(n.elapsed()>1);){if(this._tokenizeOneInvalidLine(t)>=e)break}this._beginBackgroundTokenization(),this._textModel.setTokens(t.tokens)}tokenizeViewport(e,t){const n=new D.b;this._tokenizeViewport(n,e,t),this._textModel.setTokens(n.tokens)}reset(){this._resetTokenizationState(),this._textModel.clearTokens()}forceTokenization(e){const t=new D.b;this._updateTokensUntilLine(t,e),this._textModel.setTokens(t.tokens)}isCheapToTokenize(e){if(!this._tokenizationSupport)return!0;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return!(e>t)&&(e<t||this._textModel.getLineLength(e)<2048)}_hasLinesToTokenize(){return!!this._tokenizationSupport&&this._tokenizationStateStore.invalidLineStartIndex<this._textModel.getLineCount()}_tokenizeOneInvalidLine(e){if(!this._hasLinesToTokenize())return this._textModel.getLineCount()+1;const t=this._tokenizationStateStore.invalidLineStartIndex+1;return this._updateTokensUntilLine(e,t),t}_updateTokensUntilLine(e,t){if(!this._tokenizationSupport)return;const n=this._textModel.getLanguageIdentifier(),i=this._textModel.getLineCount(),s=t-1;for(let r=this._tokenizationStateStore.invalidLineStartIndex;r<=s;r++){const t=this._textModel.getLineContent(r+1),s=this._tokenizationStateStore.getBeginState(r),o=y(n,this._tokenizationSupport,t,!0,s);e.add(r+1,o.tokens),this._tokenizationStateStore.setEndState(i,r,o.endState),r=this._tokenizationStateStore.invalidLineStartIndex-1}}_tokenizeViewport(e,t,n){if(!this._tokenizationSupport)return;if(n<=this._tokenizationStateStore.invalidLineStartIndex)return;if(t<=this._tokenizationStateStore.invalidLineStartIndex)return void this._updateTokensUntilLine(e,n);let i=this._textModel.getLineFirstNonWhitespaceColumn(t),s=[],r=null;for(let l=t-1;i>0&&l>=1;l--){let e=this._textModel.getLineFirstNonWhitespaceColumn(l);if(0!==e&&e<i){if(r=this._tokenizationStateStore.getBeginState(l-1),r)break;s.push(this._textModel.getLineContent(l)),i=e}}r||(r=this._tokenizationSupport.getInitialState());const o=this._textModel.getLanguageIdentifier();let a=r;for(let l=s.length-1;l>=0;l--){a=y(o,this._tokenizationSupport,s[l],!1,a).endState}for(let l=t;l<=n;l++){let t=this._textModel.getLineContent(l),n=y(o,this._tokenizationSupport,t,!0,a);e.add(l,n.tokens),this._tokenizationStateStore.setFakeTokens(l-1),a=n.endState}}}function y(e,t,n,s,r){let o=null;if(t)try{o=t.tokenize2(n,s,r.clone(),0)}catch(a){Object(i.e)(a)}return o||(o=Object(x.e)(e.id,n,r,0)),T.a.convertToEndOffset(o.tokens,n.length),o}var A=n(2165),z=n(1979),P=n(2281),F=n(2282),B=n(1971),V=n(2406);function U(e){const t=new m.a;return t.acceptChunk(e),t.finish()}function W(e,t){return("string"===typeof e?U(e):e).create(t)}let j=0;class ${constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;for(;;){let i=this._source.read();if(null===i)return this._eos=!0,0===t?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=65536)return e.join("")}}}const H=()=>{throw new Error("Invalid change accessor")};class q{constructor(){this._searchCanceledBrand=void 0}}function G(e){return e instanceof q?null:e}q.INSTANCE=new q;class Y extends r.a{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4?arguments[4]:void 0;super(),this._onWillDispose=this._register(new s.a),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new ie),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeLanguage=this._register(new s.a),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new s.a),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new s.a),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidChangeOptions=this._register(new s.a),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new s.a),this.onDidChangeAttached=this._onDidChangeAttached.event,this._eventEmitter=this._register(new se),j++,this.id="$model"+j,this.isForSimpleWidget=t.isForSimpleWidget,this._associatedResource="undefined"===typeof i||null===i?a.a.parse("inmemory://model/"+j):i,this._undoRedoService=r,this._attachedEditorCount=0;const{textBuffer:l,disposable:h}=W(e,t.defaultEOL);this._buffer=l,this._bufferDisposable=h,this._options=Y.resolveOptions(this._buffer,t);const c=this._buffer.getLineCount(),d=this._buffer.getValueLengthInRange(new u.a(1,1,c,this._buffer.getLineLength(c)+1),0);t.largeFileOptimizations?this._isTooLargeForTokenization=d>Y.LARGE_FILE_SIZE_THRESHOLD||c>Y.LARGE_FILE_LINE_COUNT_THRESHOLD:this._isTooLargeForTokenization=!1,this._isTooLargeForSyncing=d>Y.MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this._isDisposing=!1,this._languageIdentifier=n||x.a,this._languageRegistryListener=z.a.onDidChange(e=>{e.languageIdentifier.id===this._languageIdentifier.id&&this._onDidChangeLanguageConfiguration.fire({})}),this._instanceId=o.P(j),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new J,this._commandManager=new g.a(this,r),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._tokens=new D.d,this._tokens2=new D.e,this._tokenization=new R(this)}static resolveOptions(e,t){if(t.detectIndentation){const n=Object(f.a)(e,t.tabSize,t.insertSpaces);return new d.e({tabSize:n.tabSize,indentSize:n.tabSize,insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})}return new d.e({tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL})}onDidChangeRawContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.rawContentChangedEvent))}onDidChangeContentFast(e){return this._eventEmitter.fastEvent(t=>e(t.contentChangedEvent))}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}dispose(){this._isDisposing=!0,this._onWillDispose.fire(),this._languageRegistryListener.dispose(),this._tokenization.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this._isDisposing=!1;const e=new V.a([],"","\n",!1,!1,!0,!0);e.dispose(),this._buffer=e}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this._isDisposing||this._eventEmitter.fire(new w(e,t))}setValue(e){if(this._assertNotDisposed(),null===e)return;const{textBuffer:t,disposable:n}=W(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,s,r,o){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:s,isRedoing:r,isFlush:o}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._tokens.flush(),this._tokens2.flush(),this._decorations=Object.create(null),this._decorationsTree=new J,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new v([new p],this._versionId,!1,!1),this._createContentChanged2(new u.a(1,1,s,r),0,i,this.getValue(),!1,!1,!0))}setEOL(e){this._assertNotDisposed();const t=1===e?"\r\n":"\n";if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new v([new k],this._versionId,!1,!1),this._createContentChanged2(new u.a(1,1,s,r),0,i,this.getValue(),!1,!1,!1))}_onBeforeEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.search(0,!1,!1,e);this._ensureNodesHaveRanges(t)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const i=t[n],s=i.cachedAbsoluteStart-i.start,r=this._buffer.getOffsetAt(i.range.startLineNumber,i.range.startColumn),o=this._buffer.getOffsetAt(i.range.endLineNumber,i.range.endColumn);i.cachedAbsoluteStart=r,i.cachedAbsoluteEnd=o,i.cachedVersionId=e,i.start=r-s,i.end=o-s,Object(_.d)(i)}}onBeforeAttached(){this._attachedEditorCount++,1===this._attachedEditorCount&&this._onDidChangeAttached.fire(void 0)}onBeforeDetached(){this._attachedEditorCount--,0===this._attachedEditorCount&&this._onDidChangeAttached.fire(void 0)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const n=this._buffer.getLineLength(i);n>=1e4?t+=n:e+=n}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();let t="undefined"!==typeof e.tabSize?e.tabSize:this._options.tabSize,n="undefined"!==typeof e.indentSize?e.indentSize:this._options.indentSize,i="undefined"!==typeof e.insertSpaces?e.insertSpaces:this._options.insertSpaces,s="undefined"!==typeof e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=new d.e({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s});if(this._options.equals(r))return;let o=this._options.createChangeEvent(r);this._options=r,this._onDidChangeOptions.fire(o)}detectIndentation(e,t){this._assertNotDisposed();let n=Object(f.a)(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}static _normalizeIndentationFromWhitespace(e,t,n){let i=0;for(let r=0;r<e.length;r++)"\t"===e.charAt(r)?i+=t:i++;let s="";if(!n){let e=Math.floor(i/t);i%=t;for(let t=0;t<e;t++)s+="\t"}for(let r=0;r<i;r++)s+=" ";return s}static normalizeIndentation(e,t,n){let i=o.u(e);return-1===i&&(i=e.length),Y._normalizeIndentationFromWhitespace(e.substring(0,i),t,n)+e.substring(i)}normalizeIndentation(e){return this._assertNotDisposed(),Y.normalizeIndentation(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this.findMatches(o.a.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(e=>({range:e.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();let t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();let t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new $(this._buffer.createSnapshot(e))}getValueLength(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){return this._assertNotDisposed(),this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),"\n"===this._buffer.getEOL()?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let s=Math.floor("number"!==typeof n||isNaN(n)?1:n),r=Math.floor("number"!==typeof i||isNaN(i)?1:i);if(s<1)s=1,r=1;else if(s>t)s=t,r=this.getLineMaxColumn(s);else if(r<=1)r=1;else{const e=this.getLineMaxColumn(s);r>=e&&(r=e)}const o=e.endLineNumber,a=e.endColumn;let l=Math.floor("number"!==typeof o||isNaN(o)?1:o),h=Math.floor("number"!==typeof a||isNaN(a)?1:a);if(l<1)l=1,h=1;else if(l>t)l=t,h=this.getLineMaxColumn(l);else if(h<=1)h=1;else{const e=this.getLineMaxColumn(l);h>=e&&(h=e)}return n===s&&i===r&&o===l&&a===h&&e instanceof u.a&&!(e instanceof c.a)?e:new u.a(s,r,l,h)}_isValidPosition(e,t,n){if("number"!==typeof e||"number"!==typeof t)return!1;if(isNaN(e)||isNaN(t))return!1;if(e<1||t<1)return!1;if((0|e)!==e||(0|t)!==t)return!1;if(e>this._buffer.getLineCount())return!1;if(1===t)return!0;if(t>this.getLineMaxColumn(e))return!1;if(1===n){const n=this._buffer.getLineCharCode(e,t-2);if(o.E(n))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor("number"!==typeof e||isNaN(e)?1:e),s=Math.floor("number"!==typeof t||isNaN(t)?1:t),r=this._buffer.getLineCount();if(i<1)return new h.a(1,1);if(i>r)return new h.a(r,this.getLineMaxColumn(r));if(s<=1)return new h.a(i,1);const a=this.getLineMaxColumn(i);if(s>=a)return new h.a(i,a);if(1===n){const e=this._buffer.getLineCharCode(i,s-2);if(o.E(e))return new h.a(i,s-1)}return new h.a(i,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof h.a&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(n,i,0))return!1;if(!this._isValidPosition(s,r,0))return!1;if(1===t){const e=i>1?this._buffer.getLineCharCode(n,i-2):0,t=r>1&&r<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,r-2):0,a=o.E(e),l=o.E(t);return!a&&!l}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof u.a&&!(e instanceof c.a)&&this._isValidRange(e,1))return e;const t=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),i=t.lineNumber,s=t.column,r=n.lineNumber,a=n.column;{const e=s>1?this._buffer.getLineCharCode(i,s-2):0,t=a>1&&a<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,a-2):0,n=o.E(e),l=o.E(t);return n||l?i===r&&s===a?new u.a(i,s-1,r,a-1):n&&l?new u.a(i,s-1,r,a+1):n?new u.a(i,s-1,r,a):new u.a(i,s,r,a+1):new u.a(i,s,r,a)}}modifyPosition(e,t){this._assertNotDisposed();let n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new u.a(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:999;this._assertNotDisposed();let a=null;null!==t&&(Array.isArray(t)||(t=[t]),t.every(e=>u.a.isIRange(e))&&(a=t.map(e=>this.validateRange(e)))),null===a&&(a=[this.getFullModelRange()]),a=a.sort((e,t)=>e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn);const l=[];let h;if(l.push(a.reduce((e,t)=>u.a.areIntersecting(e,t)?e.plusRange(t):(l.push(e),t))),!n&&e.indexOf("\n")<0){const t=new N.a(e,n,i,s).parseSearchRequest();if(!t)return[];h=e=>this.findMatchesLineByLine(e,t,r,o)}else h=t=>N.c.findMatches(this,new N.a(e,n,i,s),t,r,o);return l.map(h).reduce((e,t)=>e.concat(t),[])}findNextMatch(e,t,n,i,s,r){this._assertNotDisposed();const o=this.validatePosition(t);if(!n&&e.indexOf("\n")<0){const t=new N.a(e,n,i,s).parseSearchRequest();if(!t)return null;const a=this.getLineCount();let l=new u.a(o.lineNumber,o.column,a,this.getLineMaxColumn(a)),h=this.findMatchesLineByLine(l,t,r,1);return N.c.findNextMatch(this,new N.a(e,n,i,s),o,r),h.length>0?h[0]:(l=new u.a(1,1,o.lineNumber,this.getLineMaxColumn(o.lineNumber)),h=this.findMatchesLineByLine(l,t,r,1),h.length>0?h[0]:null)}return N.c.findNextMatch(this,new N.a(e,n,i,s),o,r)}findPreviousMatch(e,t,n,i,s,r){this._assertNotDisposed();const o=this.validatePosition(t);return N.c.findPreviousMatch(this,new N.a(e,n,i,s),o,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if(("\n"===this.getEOL()?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof d.f?e:new d.f(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let n=t.map(e=>({range:this.validateRange(e.range),text:e.text})),i=!0;if(e)for(let t=0,s=e.length;t<s;t++){let s=e[t],r=!1;for(let e=0,t=n.length;e<t;e++){let t=n[e].range,i=t.startLineNumber>s.endLineNumber,o=s.startLineNumber>t.endLineNumber;if(!i&&!o){r=!0;break}}if(!r){i=!1;break}}if(i)for(let e=0,s=this._trimAutoWhitespaceLines.length;e<s;e++){let i=this._trimAutoWhitespaceLines[e],s=this.getLineMaxColumn(i),r=!0;for(let e=0,t=n.length;e<t;e++){let t=n[e].range,o=n[e].text;if(!(i<t.startLineNumber||i>t.endLineNumber)&&(!(i===t.startLineNumber&&t.startColumn===s&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(0))&&!(i===t.startLineNumber&&1===t.startColumn&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(o.length-1)))){r=!1;break}}if(r){const e=new u.a(i,1,i,s);t.push(new d.f(null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n)}_applyUndo(e,t,n,i){const s=e.map(e=>{const t=this.getPositionAt(e.newPosition),n=this.getPositionAt(e.newEnd);return{range:new u.a(t.lineNumber,t.column,n.lineNumber,n.column),text:e.oldText}});this._applyUndoRedoEdits(s,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const s=e.map(e=>{const t=this.getPositionAt(e.oldPosition),n=this.getPositionAt(e.oldEnd);return{range:new u.a(t.lineNumber,t.column,n.lineNumber,n.column),text:e.newText}});this._applyUndoRedoEdits(s,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,s,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),r=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,0!==r.length){let e=[],t=n;for(let n=0,i=r.length;n<i;n++){const i=r[n],[o,a,l]=Object(D.f)(i.text);this._tokens.acceptEdit(i.range,o,a),this._tokens2.acceptEdit(i.range,o,a,l,i.text.length>0?i.text.charCodeAt(0):0),this._onDidChangeDecorations.fire(),this._decorationsTree.acceptReplace(i.rangeOffset,i.rangeLength,i.text.length,i.forceMoveMarkers);const h=i.range.startLineNumber,u=i.range.endLineNumber,c=u-h,d=o,g=Math.min(c,d),f=d-c;for(let n=g;n>=0;n--){const i=h+n,r=s-t-f+i;e.push(new L(i,this.getLineContent(r)))}if(g<c){const t=h+g;e.push(new C(t+1,u))}if(g<d){const n=h+g,i=d-g,r=s-t-i+n+1;let o=[];for(let e=0;e<i;e++){let t=r+e;o[t-r]=this.getLineContent(t)}e.push(new b(n+1,h+d,o))}t+=f}this._increaseVersionId(),this._emitContentChangedEvent(new v(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return null===i.reverseEdits?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}changeDecorations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){let n={addDecoration:(t,n)=>this._deltaDecorationsImpl(e,[],[{range:t,options:n}])[0],changeDecoration:(e,t)=>{this._changeDecorationImpl(e,t)},changeDecorationOptions:(e,t)=>{this._changeDecorationOptionsImpl(e,ne(t))},removeDecoration:t=>{this._deltaDecorationsImpl(e,[t],[])},deltaDecorations:(t,n)=>0===t.length&&0===n.length?[]:this._deltaDecorationsImpl(e,t,n)},s=null;try{s=t(n)}catch(r){Object(i.e)(r)}return n.addDecoration=H,n.changeDecoration=H,n.changeDecorationOptions=H,n.removeDecoration=H,n.deltaDecorations=H,s}deltaDecorations(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:te[n]}])[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,o,s),i.setOptions(te[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const e=t[n];this._decorationsTree.delete(e),delete this._decorations[e.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];if(!t)return null;const n=this.getVersionId();return t.cachedVersionId!==n&&this._decorationsTree.resolveNode(t,n),null===t.range&&(t.range=this._getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}getLineDecorations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=this.getLineCount(),r=Math.min(s,Math.max(1,e)),o=Math.min(s,Math.max(1,t)),a=this.getLineMaxColumn(o);return this._getDecorationsInRange(new u.a(r,1,o,a),n,i)}getDecorationsInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.validateRange(e);return this._getDecorationsInRange(i,t,n)}getOverviewRulerDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.getVersionId(),i=this._decorationsTree.search(e,t,!0,n);return this._ensureNodesHaveRanges(i)}getAllDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.getVersionId(),i=this._decorationsTree.search(e,t,!1,n);return this._ensureNodesHaveRanges(i)}_getDecorationsInRange(e,t,n){const i=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),s=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn),r=this.getVersionId(),o=this._decorationsTree.intervalSearch(i,s,t,n,r);return this._ensureNodesHaveRanges(o)}_ensureNodesHaveRanges(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];null===n.range&&(n.range=this._getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd))}return e}_getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;const i=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),r=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,r,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!(!n.options.overviewRuler||!n.options.overviewRuler.color),s=!(!t.overviewRuler||!t.overviewRuler.color);this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),i!==s?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){const i=this.getVersionId(),s=t.length;let r=0;const o=n.length;let a=0,l=new Array(o);for(;r<s||a<o;){let h=null;if(r<s){do{h=this._decorations[t[r++]]}while(!h&&r<s);h&&(this._decorationsTree.delete(h),this._onDidChangeDecorations.checkAffectedAndFire(h.options))}if(a<o){if(!h){const e=++this._lastDecorationId,t=`${this._instanceId};${e}`;h=new _.a(t,0,0),this._decorations[t]=h}const t=n[a],s=this._validateRangeRelaxedNoAllocations(t.range),r=ne(t.options),o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),u=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);h.ownerId=e,h.reset(i,o,u,s),h.setOptions(r),this._onDidChangeDecorations.checkAffectedAndFire(r),this._decorationsTree.insert(h),l[a]=h.id,a++}else h&&delete this._decorations[h.id]}return l}setTokens(e){if(0===e.length)return;let t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];let s=0,r=0,o=!1;for(let e=0,t=i.tokens.length;e<t;e++){const t=i.startLineNumber+e;if(o)this._tokens.setTokens(this._languageIdentifier.id,t-1,this._buffer.getLineLength(t),i.tokens[e],!1),r=t;else{this._tokens.setTokens(this._languageIdentifier.id,t-1,this._buffer.getLineLength(t),i.tokens[e],!0)&&(o=!0,s=t,r=t)}}o&&t.push({fromLineNumber:s,toLineNumber:r})}t.length>0&&this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!1,ranges:t})}setSemanticTokens(e,t){this._tokens2.set(e,t),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:null!==e,ranges:[{fromLineNumber:1,toLineNumber:this.getLineCount()}]})}hasCompleteSemanticTokens(){return this._tokens2.isComplete()}hasSomeSemanticTokens(){return!this._tokens2.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._tokens2.setPartial(e,t);this._emitModelTokensChangedEvent({tokenizationSupportChanged:!1,semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}tokenizeViewport(e,t){e=Math.max(1,e),t=Math.min(this._buffer.getLineCount(),t),this._tokenization.tokenizeViewport(e,t)}clearTokens(){this._tokens.flush(),this._emitModelTokensChangedEvent({tokenizationSupportChanged:!0,semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._buffer.getLineCount()}]})}_emitModelTokensChangedEvent(e){this._isDisposing||this._onDidChangeTokens.fire(e)}resetTokenization(){this._tokenization.reset()}forceTokenization(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");this._tokenization.forceTokenization(e)}isCheapToTokenize(e){return this._tokenization.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){if(e<1||e>this.getLineCount())throw new Error("Illegal value for lineNumber");return this._getLineTokens(e)}_getLineTokens(e){const t=this.getLineContent(e),n=this._tokens.getTokens(this._languageIdentifier.id,e-1,t);return this._tokens2.addSemanticTokens(e,n)}getLanguageIdentifier(){return this._languageIdentifier}getModeId(){return this._languageIdentifier.language}setMode(e){if(this._languageIdentifier.id===e.id)return;let t={oldLanguage:this._languageIdentifier.language,newLanguage:e.language};this._languageIdentifier=e,this._onDidChangeLanguage.fire(t),this._onDidChangeLanguageConfiguration.fire({})}getLanguageIdAtPosition(e,t){const n=this.validatePosition(new h.a(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}getWordAtPosition(e){this._assertNotDisposed();const t=this.validatePosition(e),n=this.getLineContent(t.lineNumber),i=this._getLineTokens(t.lineNumber),s=i.findTokenIndexAtOffset(t.column-1),[r,o]=Y._findLanguageBoundaries(i,s),a=Object(A.d)(t.column,z.a.getWordDefinition(i.getLanguageId(s)),n.substring(r,o),r);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a;if(s>0&&r===t.column-1){const[r,o]=Y._findLanguageBoundaries(i,s-1),a=Object(A.d)(t.column,z.a.getWordDefinition(i.getLanguageId(s-1)),n.substring(r,o),r);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a}return null}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let r=t;r>=0&&e.getLanguageId(r)===n;r--)i=e.getStartOffset(r);let s=e.getLineContent().length;for(let r=t,o=e.getCount();r<o&&e.getLanguageId(r)===n;r++)s=e.getEndOffset(r);return[i,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}findMatchingBracketUp(e,t){let n=e.toLowerCase(),i=this.validatePosition(t),s=this._getLineTokens(i.lineNumber),r=s.getLanguageId(s.findTokenIndexAtOffset(i.column-1)),o=z.a.getBracketsSupport(r);if(!o)return null;let a=o.textIsBracket[n];return a?G(this._findMatchingBracketUp(a,i,null)):null}matchBracket(e){return this._matchBracket(this.validatePosition(e))}_establishBracketSearchOffsets(e,t,n,i){const s=t.getCount(),r=t.getLanguageId(i);let o=Math.max(0,e.column-1-n.maxBracketLength);for(let l=i-1;l>=0;l--){const e=t.getEndOffset(l);if(e<=o)break;if(Object(P.b)(t.getStandardTokenType(l))||t.getLanguageId(l)!==r){o=e;break}}let a=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let l=i+1;l<s;l++){const e=t.getStartOffset(l);if(e>=a)break;if(Object(P.b)(t.getStandardTokenType(l))||t.getLanguageId(l)!==r){a=e;break}}return{searchStartOffset:o,searchEndOffset:a}}_matchBracket(e){const t=e.lineNumber,n=this._getLineTokens(t),i=this._buffer.getLineContent(t),s=n.findTokenIndexAtOffset(e.column-1);if(s<0)return null;const r=z.a.getBracketsSupport(n.getLanguageId(s));if(r&&!Object(P.b)(n.getStandardTokenType(s))){let{searchStartOffset:o,searchEndOffset:a}=this._establishBracketSearchOffsets(e,n,r,s),l=null;for(;;){const n=F.a.findNextBracketInRange(r.forwardRegex,t,i,o,a);if(!n)break;if(n.startColumn<=e.column&&e.column<=n.endColumn){const e=i.substring(n.startColumn-1,n.endColumn-1).toLowerCase(),t=this._matchFoundBracket(n,r.textIsBracket[e],r.textIsOpenBracket[e],null);if(t){if(t instanceof q)return null;l=t}}o=n.endColumn-1}if(l)return l}if(s>0&&n.getStartOffset(s)===e.column-1){const r=s-1,o=z.a.getBracketsSupport(n.getLanguageId(r));if(o&&!Object(P.b)(n.getStandardTokenType(r))){let{searchStartOffset:s,searchEndOffset:a}=this._establishBracketSearchOffsets(e,n,o,r);const l=F.a.findPrevBracketInRange(o.reversedRegex,t,i,s,a);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn){const e=i.substring(l.startColumn-1,l.endColumn-1).toLowerCase(),t=this._matchFoundBracket(l,o.textIsBracket[e],o.textIsOpenBracket[e],null);if(t)return t instanceof q?null:t}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const s=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return s?s instanceof q?s:[e,s]:null}_findMatchingBracketUp(e,t,n){const i=e.languageIdentifier.id,s=e.reversedRegex;let r=-1,o=0;const a=(t,i,a,l)=>{for(;;){if(n&&++o%100===0&&!n())return q.INSTANCE;const h=F.a.findPrevBracketInRange(s,t,i,a,l);if(!h)break;const u=i.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return h;l=h.startColumn-1}return null};for(let l=t.lineNumber;l>=1;l--){const e=this._getLineTokens(l),n=e.getCount(),s=this._buffer.getLineContent(l);let r=n-1,o=s.length,h=s.length;l===t.lineNumber&&(r=e.findTokenIndexAtOffset(t.column-1),o=t.column-1,h=t.column-1);let u=!0;for(;r>=0;r--){const t=e.getLanguageId(r)===i&&!Object(P.b)(e.getStandardTokenType(r));if(t)u?o=e.getStartOffset(r):(o=e.getStartOffset(r),h=e.getEndOffset(r));else if(u&&o!==h){const e=a(l,s,o,h);if(e)return e}u=t}if(u&&o!==h){const e=a(l,s,o,h);if(e)return e}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageIdentifier.id,s=e.forwardRegex;let r=1,o=0;const a=(t,i,a,l)=>{for(;;){if(n&&++o%100===0&&!n())return q.INSTANCE;const h=F.a.findNextBracketInRange(s,t,i,a,l);if(!h)break;const u=i.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return h;a=h.endColumn-1}return null},l=this.getLineCount();for(let h=t.lineNumber;h<=l;h++){const e=this._getLineTokens(h),n=e.getCount(),s=this._buffer.getLineContent(h);let r=0,o=0,l=0;h===t.lineNumber&&(r=e.findTokenIndexAtOffset(t.column-1),o=t.column-1,l=t.column-1);let u=!0;for(;r<n;r++){const t=e.getLanguageId(r)===i&&!Object(P.b)(e.getStandardTokenType(r));if(t)u||(o=e.getStartOffset(r)),l=e.getEndOffset(r);else if(u&&o!==l){const e=a(h,s,o,l);if(e)return e}u=t}if(u&&o!==l){const e=a(h,s,o,l);if(e)return e}}return null}findPrevBracket(e){const t=this.validatePosition(e);let n=-1,i=null;for(let s=t.lineNumber;s>=1;s--){const e=this._getLineTokens(s),r=e.getCount(),o=this._buffer.getLineContent(s);let a=r-1,l=o.length,h=o.length;if(s===t.lineNumber){a=e.findTokenIndexAtOffset(t.column-1),l=t.column-1,h=t.column-1;const s=e.getLanguageId(a);n!==s&&(n=s,i=z.a.getBracketsSupport(n))}let u=!0;for(;a>=0;a--){const t=e.getLanguageId(a);if(n!==t){if(i&&u&&l!==h){const e=F.a.findPrevBracketInRange(i.reversedRegex,s,o,l,h);if(e)return this._toFoundBracket(i,e);u=!1}n=t,i=z.a.getBracketsSupport(n)}const r=!!i&&!Object(P.b)(e.getStandardTokenType(a));if(r)u?l=e.getStartOffset(a):(l=e.getStartOffset(a),h=e.getEndOffset(a));else if(i&&u&&l!==h){const e=F.a.findPrevBracketInRange(i.reversedRegex,s,o,l,h);if(e)return this._toFoundBracket(i,e)}u=r}if(i&&u&&l!==h){const e=F.a.findPrevBracketInRange(i.reversedRegex,s,o,l,h);if(e)return this._toFoundBracket(i,e)}}return null}findNextBracket(e){const t=this.validatePosition(e),n=this.getLineCount();let i=-1,s=null;for(let r=t.lineNumber;r<=n;r++){const e=this._getLineTokens(r),n=e.getCount(),o=this._buffer.getLineContent(r);let a=0,l=0,h=0;if(r===t.lineNumber){a=e.findTokenIndexAtOffset(t.column-1),l=t.column-1,h=t.column-1;const n=e.getLanguageId(a);i!==n&&(i=n,s=z.a.getBracketsSupport(i))}let u=!0;for(;a<n;a++){const t=e.getLanguageId(a);if(i!==t){if(s&&u&&l!==h){const e=F.a.findNextBracketInRange(s.forwardRegex,r,o,l,h);if(e)return this._toFoundBracket(s,e);u=!1}i=t,s=z.a.getBracketsSupport(i)}const n=!!s&&!Object(P.b)(e.getStandardTokenType(a));if(n)u||(l=e.getStartOffset(a)),h=e.getEndOffset(a);else if(s&&u&&l!==h){const e=F.a.findNextBracketInRange(s.forwardRegex,r,o,l,h);if(e)return this._toFoundBracket(s,e)}u=n}if(s&&u&&l!==h){const e=F.a.findNextBracketInRange(s.forwardRegex,r,o,l,h);if(e)return this._toFoundBracket(s,e)}}return null}findEnclosingBrackets(e,t){let n;if("undefined"===typeof t)n=null;else{const e=Date.now();n=()=>Date.now()-e<=t}const i=this.validatePosition(e),s=this.getLineCount(),r=new Map;let o=[];const a=(e,t)=>{if(!r.has(e)){let n=[];for(let e=0,i=t?t.brackets.length:0;e<i;e++)n[e]=0;r.set(e,n)}o=r.get(e)};let l=0;const h=(e,t,i,s,r)=>{for(;;){if(n&&++l%100===0&&!n())return q.INSTANCE;const a=F.a.findNextBracketInRange(e.forwardRegex,t,i,s,r);if(!a)break;const h=i.substring(a.startColumn-1,a.endColumn-1).toLowerCase(),u=e.textIsBracket[h];if(u&&(u.isOpen(h)?o[u.index]++:u.isClose(h)&&o[u.index]--,-1===o[u.index]))return this._matchFoundBracket(a,u,!1,n);s=a.endColumn-1}return null};let u=-1,c=null;for(let d=i.lineNumber;d<=s;d++){const e=this._getLineTokens(d),t=e.getCount(),n=this._buffer.getLineContent(d);let s=0,r=0,o=0;if(d===i.lineNumber){s=e.findTokenIndexAtOffset(i.column-1),r=i.column-1,o=i.column-1;const t=e.getLanguageId(s);u!==t&&(u=t,c=z.a.getBracketsSupport(u),a(u,c))}let l=!0;for(;s<t;s++){const t=e.getLanguageId(s);if(u!==t){if(c&&l&&r!==o){const e=h(c,d,n,r,o);if(e)return G(e);l=!1}u=t,c=z.a.getBracketsSupport(u),a(u,c)}const i=!!c&&!Object(P.b)(e.getStandardTokenType(s));if(i)l||(r=e.getStartOffset(s)),o=e.getEndOffset(s);else if(c&&l&&r!==o){const e=h(c,d,n,r,o);if(e)return G(e)}l=i}if(c&&l&&r!==o){const e=h(c,d,n,r,o);if(e)return G(e)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.getValueInRange(t);n=n.toLowerCase();let i=e.textIsBracket[n];return i?{range:t,open:i.open,close:i.close,isOpen:e.textIsOpenBracket[n]}:null}static computeIndentLevel(e,t){let n=0,i=0,s=e.length;for(;i<s;){let s=e.charCodeAt(i);if(32===s)n++;else{if(9!==s)break;n=n-n%t+t}i++}return i===s?-1:n}_computeIndentLevel(e){return Y.computeIndentLevel(this._buffer.getLineContent(e+1),this._options.tabSize)}getActiveIndentGuide(e,t,n){this._assertNotDisposed();const i=this.getLineCount();if(e<1||e>i)throw new Error("Illegal value for lineNumber");const s=z.a.getFoldingRules(this._languageIdentifier.id),r=Boolean(s&&s.offSide);let o=-2,a=-1,l=-2,h=-1;const u=e=>{if(-1!==o&&(-2===o||o>e-1)){o=-1,a=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){o=t,a=e;break}}}if(-2===l){l=-1,h=-1;for(let t=e;t<i;t++){let e=this._computeIndentLevel(t);if(e>=0){l=t,h=e;break}}}};let c=-2,d=-1,g=-2,f=-1;const _=e=>{if(-2===c){c=-1,d=-1;for(let t=e-2;t>=0;t--){let e=this._computeIndentLevel(t);if(e>=0){c=t,d=e;break}}}if(-1!==g&&(-2===g||g<e-1)){g=-1,f=-1;for(let t=e;t<i;t++){let e=this._computeIndentLevel(t);if(e>=0){g=t,f=e;break}}}};let m=0,p=!0,L=0,C=!0,b=0,k=0;for(let v=0;p||C;v++){const s=e-v,o=e+v;v>1&&(s<1||s<t)&&(p=!1),v>1&&(o>i||o>n)&&(C=!1),v>5e4&&(p=!1,C=!1);let g=-1;if(p){const e=this._computeIndentLevel(s-1);e>=0?(l=s-1,h=e,g=Math.ceil(e/this._options.indentSize)):(u(s),g=this._getIndentLevelForWhitespaceLine(r,a,h))}let w=-1;if(C){const e=this._computeIndentLevel(o-1);e>=0?(c=o-1,d=e,w=Math.ceil(e/this._options.indentSize)):(_(o),w=this._getIndentLevelForWhitespaceLine(r,d,f))}if(0!==v){if(1===v){if(o<=i&&w>=0&&k+1===w){p=!1,m=o,L=o,b=w;continue}if(s>=1&&g>=0&&g-1===k){C=!1,m=s,L=s,b=g;continue}if(m=e,L=e,b=k,0===b)return{startLineNumber:m,endLineNumber:L,indent:b}}p&&(g>=b?m=s:p=!1),C&&(w>=b?L=o:C=!1)}else k=g}return{startLineNumber:m,endLineNumber:L,indent:b}}getLinesIndentGuides(e,t){this._assertNotDisposed();const n=this.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=z.a.getFoldingRules(this._languageIdentifier.id),s=Boolean(i&&i.offSide);let r=new Array(t-e+1),o=-2,a=-1,l=-2,h=-1;for(let u=e;u<=t;u++){let t=u-e;const i=this._computeIndentLevel(u-1);if(i>=0)o=u-1,a=i,r[t]=Math.ceil(i/this._options.indentSize);else{if(-2===o){o=-1,a=-1;for(let e=u-2;e>=0;e--){let t=this._computeIndentLevel(e);if(t>=0){o=e,a=t;break}}}if(-1!==l&&(-2===l||l<u-1)){l=-1,h=-1;for(let e=u;e<n;e++){let t=this._computeIndentLevel(e);if(t>=0){l=e,h=t;break}}}r[t]=this._getIndentLevelForWhitespaceLine(s,a,h)}}return r}_getIndentLevelForWhitespaceLine(e,t,n){return-1===t||-1===n?0:t<n?1+Math.floor(t/this._options.indentSize):t===n||e?Math.ceil(n/this._options.indentSize):1+Math.floor(n/this._options.indentSize)}normalizePosition(e,t){return e}getLineIndentColumn(e){return function(e){let t=0;for(const n of e){if(" "!==n&&"\t"!==n)break;t++}return t}(this.getLineContent(e))+1}}Y.MODEL_SYNC_LIMIT=52428800,Y.LARGE_FILE_SIZE_THRESHOLD=20971520,Y.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,Y.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:l.d.tabSize,indentSize:l.d.indentSize,insertSpaces:l.d.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:l.d.trimAutoWhitespace,largeFileOptimizations:l.d.largeFileOptimizations};class J{constructor(){this._decorationsTree0=new _.b,this._decorationsTree1=new _.b}intervalSearch(e,t,n,i,s){const r=this._decorationsTree0.intervalSearch(e,t,n,i,s),o=this._decorationsTree1.intervalSearch(e,t,n,i,s);return r.concat(o)}search(e,t,n,i){if(n)return this._decorationsTree1.search(e,t,i);{const n=this._decorationsTree0.search(e,t,i),s=this._decorationsTree1.search(e,t,i);return n.concat(s)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e);return t.concat(n)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder();return e.concat(t)}insert(e){Object(_.c)(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){Object(_.c)(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}resolveNode(e,t){Object(_.c)(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i)}}function K(e){return e.replace(/[^a-z0-9\-_]/gi," ")}class Z{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class Q extends Z{constructor(e){super(e),this._resolvedColor=null,this.position="number"===typeof e.position?e.position:d.d.Center}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if("string"===typeof e)return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}}class X extends Z{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return"string"===typeof e?B.a.fromHex(e):t.getColor(e.id)}}class ee{constructor(e){this.description=e.description,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?K(e.className):null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new Q(e.overviewRuler):null,this.minimap=e.minimap?new X(e.minimap):null,this.glyphMarginClassName=e.glyphMarginClassName?K(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?K(e.linesDecorationsClassName):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?K(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?K(e.marginClassName):null,this.inlineClassName=e.inlineClassName?K(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?K(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?K(e.afterContentClassName):null}static register(e){return new ee(e)}static createDynamic(e){return new ee(e)}}ee.EMPTY=ee.register({description:"empty"});const te=[ee.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),ee.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),ee.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),ee.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function ne(e){return e instanceof ee?e:ee.createDynamic(e)}class ie extends r.a{constructor(){super(),this._actual=this._register(new s.a),this.event=this._actual.event,this._deferredCnt=0,this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){if(this._deferredCnt--,0===this._deferredCnt&&this._shouldFire){const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler};this._shouldFire=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._actual.fire(e)}}checkAffectedAndFire(e){this._affectsMinimap||(this._affectsMinimap=!(!e.minimap||!e.minimap.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!(!e.overviewRuler||!e.overviewRuler.color)),this._shouldFire=!0}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._shouldFire=!0}}class se extends r.a{constructor(){super(),this._fastEmitter=this._register(new s.a),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new s.a),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}}},2165:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a}));const i="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="(-?\\d*\\.\\d\\w*)|([^";for(const n of i)e.indexOf(n)>=0||(t+="\\"+n);return t+="\\s]+)",new RegExp(t,"g")}();function r(e){let t=s;if(e&&e instanceof RegExp)if(e.global)t=e;else{let n="g";e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.unicode&&(n+="u"),t=new RegExp(e.source,n)}return t.lastIndex=0,t}const o={maxLen:1e3,windowSize:15,timeBudget:150};function a(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o;if(n.length>s.maxLen){let r=e-s.maxLen/2;return r<0?r=0:i+=r,a(e,t,n=n.substring(r,e+s.maxLen/2),i,s)}const r=Date.now(),h=e-1-i;let u=-1,c=null;for(let o=1;!(Date.now()-r>=s.timeBudget);o++){const e=h-s.windowSize*o;t.lastIndex=Math.max(0,e);const i=l(t,n,h,u);if(!i&&c)break;if(c=i,e<=0)break;u=e}if(c){let e={word:c[0],startColumn:i+1+c.index,endColumn:i+1+c.index+c[0].length};return t.lastIndex=0,e}return null}function l(e,t,n,i){let s;for(;s=e.exec(t);){const t=s.index||0;if(t<=n&&e.lastIndex>=n)return s;if(i>0&&t>i)return null}return null}},2169:function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return L}));var i=n(1950),s=n(2085),r=n(1941),o=n(1933),a=n(1951);function l(e){let t=0,n=0,i=0,s=0;for(let r=0,o=e.length;r<o;r++){const a=e.charCodeAt(r);13===a?(0===t&&(n=r),t++,r+1<o&&10===e.charCodeAt(r+1)?(s|=2,r++):s|=3,i=r+1):10===a&&(s|=1,0===t&&(n=r),t++,i=r+1)}return 0===t&&(n=e.length),[t,n,e.length-i,s]}function h(e){return(16384|e<<0|2<<23)>>>0}const u=new Uint32Array(0).buffer;class c{constructor(){this.tokens=[]}add(e,t){if(this.tokens.length>0){const n=this.tokens[this.tokens.length-1];if(n.startLineNumber+n.tokens.length-1+1===e)return void n.tokens.push(t)}this.tokens.push(new _(e,[t]))}}class d{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){let t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(0===e)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new o.a(0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return 0===this._getTokenCount()}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const i=t+Math.floor((n-t)/2),s=this._getDeltaLine(i);if(s<e)t=i+1;else{if(!(s>e)){let s=i;for(;s>t&&this._getDeltaLine(s-1)===e;)s--;let r=i;for(;r<n&&this._getDeltaLine(r+1)===e;)r++;return new g(this._tokens.subarray(4*s,4*r+4))}n=i-1}}return this._getDeltaLine(t)===e?new g(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const s=this._tokens,r=this._tokenCount;let o=0,a=!1,l=0;for(let h=0;h<r;h++){const r=4*h,u=s[r],c=s[r+1],d=s[r+2],g=s[r+3];if((u>e||u===e&&d>=t)&&(u<n||u===n&&c<=i))a=!0;else{if(0===o&&(l=u),a){const e=4*o;s[e]=u-l,s[e+1]=c,s[e+2]=d,s[e+3]=g}o++}}return this._tokenCount=o,l}split(e,t,n,i){const s=this._tokens,r=this._tokenCount;let o=[],a=[],l=o,h=0,u=0;for(let c=0;c<r;c++){const r=4*c,o=s[r],d=s[r+1],g=s[r+2],f=s[r+3];if(o>e||o===e&&g>=t){if(o<n||o===n&&d<=i)continue;l!==a&&(l=a,h=0,u=o)}l[h++]=o-u,l[h++]=d,l[h++]=g,l[h++]=f}return[new d(new Uint32Array(o)),new d(new Uint32Array(a)),u]}acceptDeleteRange(e,t,n,i,s){const r=this._tokens,o=this._tokenCount,a=i-t;let l=0,h=!1;for(let u=0;u<o;u++){const c=4*u;let d=r[c],g=r[c+1],f=r[c+2];const _=r[c+3];if(d<t||d===t&&f<=n){l++;continue}if(d===t&&g<n)d===i&&f>s?f-=s-n:f=n;else if(d===t&&g===n){if(!(d===i&&f>s)){h=!0;continue}f-=s-n}else if(d<i||d===i&&g<s){if(!(d===i&&f>s)){h=!0;continue}d===t?(g=n,f=g+(f-s)):(g=0,f=g+(f-s))}else if(d>i){if(0===a&&!h){l=o;break}d-=a}else{if(!(d===i&&g>=s))throw new Error("Not possible!");e&&0===d&&(g+=e,f+=e),d-=a,g-=s-n,f-=s-n}const m=4*l;r[m]=d,r[m+1]=g,r[m+2]=f,r[m+3]=_,l++}this._tokenCount=l}acceptInsertText(e,t,n,i,s,r){const o=0===n&&1===i&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),a=this._tokens,l=this._tokenCount;for(let h=0;h<l;h++){const r=4*h;let l=a[r],u=a[r+1],c=a[r+2];if(!(l<e||l===e&&c<t)){if(l===e&&c===t){if(!o)continue;c+=1}else if(l===e&&u<t&&t<c)0===n?c+=i:c=t;else{if(l===e&&u===t&&o)continue;if(l===e)if(l+=n,0===n)u+=i,c+=i;else{const e=c-u;u=s+(u-t),c=u+e}else l+=n}a[r]=l,a[r+1]=u,a[r+2]=c}}}}class g{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}class f{constructor(e,t){this.startLineNumber=e,this.tokens=t,this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}toString(){return this.tokens.toString(this.startLineNumber)}_updateEndLineNumber(){this.endLineNumber=this.startLineNumber+this.tokens.getMaxDeltaLine()}isEmpty(){return this.tokens.isEmpty()}getLineTokens(e){return this.startLineNumber<=e&&e<=this.endLineNumber?this.tokens.getLineTokens(e-this.startLineNumber):null}getRange(){const e=this.tokens.getRange();return e?new o.a(this.startLineNumber+e.startLineNumber,e.startColumn,this.startLineNumber+e.endLineNumber,e.endColumn):e}removeTokens(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;this.startLineNumber+=this.tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber,[i,s,r]=this.tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new f(this.startLineNumber,i),new f(this.startLineNumber+r,s)]}applyEdit(e,t){const[n,i,s]=l(t);this.acceptEdit(e,n,i,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,i,s){this._acceptDeleteRange(e),this._acceptInsertText(new r.a(e.startLineNumber,e.startColumn),t,n,i,s),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this.startLineNumber,n=e.endLineNumber-this.startLineNumber;if(n<0){const e=n-t;return void(this.startLineNumber-=e)}const i=this.tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1)return this.startLineNumber=0,void this.tokens.clear();if(t<0){const i=-t;this.startLineNumber-=i,this.tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this.tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,s){if(0===t&&0===n)return;const r=e.lineNumber-this.startLineNumber;if(r<0)return void(this.startLineNumber+=t);r>=this.tokens.getMaxDeltaLine()+1||this.tokens.acceptInsertText(r,e.column-1,t,n,i,s)}}class _{constructor(e,t){this.startLineNumber=e,this.tokens=t}}function m(e){return e instanceof Uint32Array?e:new Uint32Array(e)}class p{constructor(){this._pieces=[],this._isComplete=!1}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return 0===this._pieces.length}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const i=t[0].getRange(),s=t[t.length-1].getRange();if(!i||!s)return e;n=e.plusRange(i).plusRange(s)}let s=null;for(let i=0,r=this._pieces.length;i<r;i++){const e=this._pieces[i];if(e.endLineNumber<n.startLineNumber)continue;if(e.startLineNumber>n.endLineNumber){s=s||{index:i};break}if(e.removeTokens(n),e.isEmpty()){this._pieces.splice(i,1),i--,r--;continue}if(e.endLineNumber<n.startLineNumber)continue;if(e.startLineNumber>n.endLineNumber){s=s||{index:i};continue}const[t,o]=e.split(n);t.isEmpty()?s=s||{index:i}:o.isEmpty()||(this._pieces.splice(i,1,t,o),i++,r++,s=s||{index:i})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=i.a(this._pieces,s.index,t)),n}isComplete(){return this._isComplete}addSemanticTokens(e,t){const n=this._pieces;if(0===n.length)return t;const i=n[p._findFirstPieceWithLine(n,e)].getLineTokens(e);if(!i)return t;const r=t.getCount(),o=i.getCount();let a=0,l=[],h=0,u=0;const c=(e,t)=>{e!==u&&(u=e,l[h++]=e,l[h++]=t)};for(let s=0;s<o;s++){const e=i.getStartCharacter(s),n=i.getEndCharacter(s),o=i.getMetadata(s),l=((1&o?2048:0)|(2&o?4096:0)|(4&o?8192:0)|(8&o?8372224:0)|(16&o?4286578688:0))>>>0,h=~l>>>0;for(;a<r&&t.getEndOffset(a)<=e;)c(t.getEndOffset(a),t.getMetadata(a)),a++;for(a<r&&t.getStartOffset(a)<e&&c(e,t.getMetadata(a));a<r&&t.getEndOffset(a)<n;)c(t.getEndOffset(a),t.getMetadata(a)&h|o&l),a++;if(a<r)c(n,t.getMetadata(a)&h|o&l),t.getEndOffset(a)===n&&a++;else{const e=Math.min(Math.max(0,a-1),r-1);c(n,t.getMetadata(e)&h|o&l)}}for(;a<r;)c(t.getEndOffset(a),t.getMetadata(a)),a++;return new s.a(new Uint32Array(l),t.getLineContent())}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let s=n+Math.floor((i-n)/2);if(e[s].endLineNumber<t)n=s+1;else{if(!(e[s].startLineNumber>t)){for(;s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}i=s-1}}return n}acceptEdit(e,t,n,i,s){for(const r of this._pieces)r.acceptEdit(e,t,n,i,s)}}class L{constructor(){this._lineTokens=[],this._len=0}flush(){this._lineTokens=[],this._len=0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),null!==i&&i!==u)return new s.a(m(i),n);let r=new Uint32Array(2);return r[0]=n.length,r[1]=h(e),new s.a(r,n)}static _massageTokens(e,t,n){const i=n?m(n):null;if(0===t){let t=!1;if(i&&i.length>1&&(t=a.C.getLanguageId(i[1])!==e),!t)return u}if(!i||0===i.length){const n=new Uint32Array(2);return n[0]=t,n[1]=h(e),n.buffer}return i[i.length-2]=t,0===i.byteOffset&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=i.a(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,s){const r=L._massageTokens(e,n,i);this._ensureLine(t);const o=this._lineTokens[t];return this._lineTokens[t]=r,!!s&&!L._equals(o,r)}static _equals(e,t){if(!e||!t)return!e&&!t;const n=m(e),i=m(t);if(n.length!==i.length)return!1;for(let s=0,r=n.length;s<r;s++)if(n[s]!==i[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new r.a(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void(this._lineTokens[t]=L._delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1))}this._lineTokens[t]=L._deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=L._deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=L._append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(0===t&&0===n)return;const i=e.lineNumber-1;i>=this._len||(0!==t?(this._lineTokens[i]=L._deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=L._insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)):this._lineTokens[i]=L._insert(this._lineTokens[i],e.column-1,n))}static _deleteBeginning(e,t){return null===e||e===u?e:L._delete(e,0,t)}static _deleteEnding(e,t){if(null===e||e===u)return e;const n=m(e),i=n[n.length-2];return L._delete(e,t,i)}static _delete(e,t,n){if(null===e||e===u||t===n)return e;const i=m(e),r=i.length>>>1;if(0===t&&i[i.length-2]===n)return u;const o=s.a.findIndexInTokensArray(i,t),a=o>0?i[o-1<<1]:0;if(n<i[o<<1]){const s=n-t;for(let e=o;e<r;e++)i[e<<1]-=s;return e}let l,h;a!==t?(i[o<<1]=t,l=o+1<<1,h=t):(l=o<<1,h=a);const c=n-t;for(let s=o+1;s<r;s++){const e=i[s<<1]-c;e>h&&(i[l++]=e,i[l++]=i[1+(s<<1)],h=e)}if(l===i.length)return e;let d=new Uint32Array(l);return d.set(i.subarray(0,l),0),d.buffer}static _append(e,t){if(t===u)return e;if(e===u)return t;if(null===e)return e;if(null===t)return null;const n=m(e),i=m(t),s=i.length>>>1;let r=new Uint32Array(n.length+i.length);r.set(n,0);let o=n.length;const a=n[n.length-2];for(let l=0;l<s;l++)r[o++]=i[l<<1]+a,r[o++]=i[1+(l<<1)];return r.buffer}static _insert(e,t,n){if(null===e||e===u)return e;const i=m(e),r=i.length>>>1;let o=s.a.findIndexInTokensArray(i,t);if(o>0){i[o-1<<1]===t&&o--}for(let s=o;s<r;s++)i[s<<1]+=n;return e}}},2404:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var i=n(2130),s=n(2059);function r(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class o{constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return 0===this.oldText.length?`(insert@${this.oldPosition} "${r(this.newText)}")`:0===this.newText.length?`(delete@${this.oldPosition} "${r(this.oldText)}")`:`(replace@${this.oldPosition} "${r(this.oldText)}" with "${r(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const s=t.length;i.f(e,s,n),n+=4;for(let r=0;r<s;r++)i.e(e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){const n=i.c(e,t);return t+=4,Object(s.b)(e,t,n)}writeSize(){return 8+o._writeStringSize(this.oldText)+o._writeStringSize(this.newText)}write(e,t){return i.f(e,this.oldPosition,t),t+=4,i.f(e,this.newPosition,t),t+=4,t=o._writeString(e,this.oldText,t),t=o._writeString(e,this.newText,t)}static read(e,t,n){const s=i.c(e,t);t+=4;const r=i.c(e,t);t+=4;const a=o._readString(e,t);t+=o._writeStringSize(a);const l=o._readString(e,t);return t+=o._writeStringSize(l),n.push(new o(s,a,r,l)),t}}function a(e,t){if(null===e||0===e.length)return t;return new l(e,t).compress()}class l{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(null===n){this._acceptCurr(i),i=this._getCurr(++t);continue}if(null===i){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[e,t]=l._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(e),i=t;continue}if(n.newPosition<i.oldPosition){const[e,t]=l._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(e),n=t;continue}let s,r;if(i.oldEnd===n.newEnd)s=n,r=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[e,o]=l._splitPrev(n,i.oldLength);s=e,r=i,n=o,i=this._getCurr(++t)}else{const[t,o]=l._splitCurr(i,n.newLength);s=n,r=t,n=this._getPrev(++e),i=o}this._result[this._resultLen++]=new o(s.oldPosition,s.oldText,r.newPosition,r.newText),this._prevDeltaOffset+=s.newLength-s.oldLength,this._currDeltaOffset+=r.newLength-r.oldLength}const s=l._merge(this._result);return l._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=l._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=l._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new o(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new o(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new o(e.oldPosition,e.oldText,e.newPosition,n),new o(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new o(e.oldPosition,n,e.newPosition,e.newText),new o(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(0===e.length)return e;let t=[],n=0,i=e[0];for(let s=1;s<e.length;s++){const r=e[s];i.oldEnd===r.oldPosition?i=new o(i.oldPosition,i.oldText+r.oldText,i.newPosition,i.newText+r.newText):(t[n++]=i,i=r)}return t[n++]=i,t}static _removeNoOps(e){if(0===e.length)return e;let t=[],n=0;for(let i=0;i<e.length;i++){const s=e[i];s.oldText!==s.newText&&(t[n++]=s)}return t}}},2405:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return g})),n.d(t,"b",(function(){return f}));var i=n(1936),s=n(2131),r=n(1941),o=n(1933),a=n(2008);class l{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(""===this.searchString)return null;let e;e=this.isRegex?function(e){if(!e||0===e.length)return!1;for(let t=0,n=e.length;t<n;t++){if(92===e.charCodeAt(t)){if(t++,t>=n)break;const i=e.charCodeAt(t);if(110===i||114===i||87===i||119===i)return!0}}return!1}(this.searchString):this.searchString.indexOf("\n")>=0;let t=null;try{t=i.p(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(r){return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new h(t,this.wordSeparators?Object(s.a)(this.wordSeparators):null,n?this.searchString:null)}}class h{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}function u(e,t,n){if(!n)return new a.b(e,null);let i=[];for(let s=0,r=t.length;s<r;s++)i[s]=t[s];return new a.b(e,i)}class c{constructor(e){let t=[],n=0;for(let i=0,s=e.length;i<s;i++)10===e.charCodeAt(i)&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(-1===i)return 0;if(e<=t[0])return 0;for(;n<i;){const s=n+((i-n)/2>>0);t[s]>=e?i=s-1:t[s+1]>=e?(n=s,i=s):n=s+1}return n+1}}class d{static findMatches(e,t,n,i,s){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,n,new f(r.wordSeparators,r.regex),i,s):this._doFindMatchesLineByLine(e,n,r,i,s):[]}static _getMultilineMatchRange(e,t,n,i,s,r){let a,l,h=0;if(i?(h=i.findLineFeedCountBeforeOffset(s),a=t+s+h):a=t+s,i){let e=i.findLineFeedCountBeforeOffset(s+r.length)-h;l=a+r.length+e}else l=a+r.length;const u=e.getPositionAt(a),c=e.getPositionAt(l);return new o.a(u.lineNumber,u.column,c.lineNumber,c.column)}static _doFindMatchesMultiline(e,t,n,i,s){const r=e.getOffsetAt(t.getStartPosition()),o=e.getValueInRange(t,1),a="\r\n"===e.getEOL()?new c(o):null,l=[];let h,d=0;for(n.reset(0);h=n.next(o);)if(l[d++]=u(this._getMultilineMatchRange(e,r,o,a,h.index,h[0]),h,i),d>=s)return l;return l}static _doFindMatchesLineByLine(e,t,n,i,s){const r=[];let o=0;if(t.startLineNumber===t.endLineNumber){const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return o=this._findMatchesInLine(n,a,t.startLineNumber,t.startColumn-1,o,r,i,s),r}const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);o=this._findMatchesInLine(n,a,t.startLineNumber,t.startColumn-1,o,r,i,s);for(let l=t.startLineNumber+1;l<t.endLineNumber&&o<s;l++)o=this._findMatchesInLine(n,e.getLineContent(l),l,0,o,r,i,s);if(o<s){const a=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);o=this._findMatchesInLine(n,a,t.endLineNumber,0,o,r,i,s)}return r}static _findMatchesInLine(e,t,n,i,s,r,l,h){const c=e.wordSeparators;if(!l&&e.simpleSearch){const l=e.simpleSearch,u=l.length,d=t.length;let f=-u;for(;-1!==(f=t.indexOf(l,f+u));)if((!c||g(c,t,d,f,u))&&(r[s++]=new a.b(new o.a(n,f+1+i,n,f+1+u+i),null),s>=h))return s;return s}const d=new f(e.wordSeparators,e.regex);let _;d.reset(0);do{if(_=d.next(t),_&&(r[s++]=u(new o.a(n,_.index+1+i,n,_.index+1+_[0].length+i),_,l),s>=h))return s}while(_);return s}static findNextMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new f(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,n,r,i):this._doFindNextMatchLineByLine(e,n,r,i)}static _doFindNextMatchMultiline(e,t,n,i){const s=new r.a(t.lineNumber,1),a=e.getOffsetAt(s),l=e.getLineCount(),h=e.getValueInRange(new o.a(s.lineNumber,s.column,l,e.getLineMaxColumn(l)),1),d="\r\n"===e.getEOL()?new c(h):null;n.reset(t.column-1);let g=n.next(h);return g?u(this._getMultilineMatchRange(e,a,h,d,g.index,g[0]),g,i):1!==t.lineNumber||1!==t.column?this._doFindNextMatchMultiline(e,new r.a(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,o=e.getLineContent(r),a=this._findFirstMatchInLine(n,o,r,t.column,i);if(a)return a;for(let l=1;l<=s;l++){const t=(r+l-1)%s,o=e.getLineContent(t+1),a=this._findFirstMatchInLine(n,o,t+1,1,i);if(a)return a}return null}static _findFirstMatchInLine(e,t,n,i,s){e.reset(i-1);const r=e.next(t);return r?u(new o.a(n,r.index+1,n,r.index+1+r[0].length),r,s):null}static findPreviousMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new f(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,n,r,i):this._doFindPreviousMatchLineByLine(e,n,r,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const s=this._doFindMatchesMultiline(e,new o.a(1,1,t.lineNumber,t.column),n,i,9990);if(s.length>0)return s[s.length-1];const a=e.getLineCount();return t.lineNumber!==a||t.column!==e.getLineMaxColumn(a)?this._doFindPreviousMatchMultiline(e,new r.a(a,e.getLineMaxColumn(a)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,o=e.getLineContent(r).substring(0,t.column-1),a=this._findLastMatchInLine(n,o,r,i);if(a)return a;for(let l=1;l<=s;l++){const t=(s+r-l-1)%s,o=e.getLineContent(t+1),a=this._findLastMatchInLine(n,o,t+1,i);if(a)return a}return null}static _findLastMatchInLine(e,t,n,i){let s,r=null;for(e.reset(0);s=e.next(t);)r=u(new o.a(n,s.index+1,n,s.index+1+s[0].length),s,i);return r}}function g(e,t,n,i,s){return function(e,t,n,i,s){if(0===i)return!0;const r=t.charCodeAt(i-1);if(0!==e.get(r))return!0;if(13===r||10===r)return!0;if(s>0){const n=t.charCodeAt(i);if(0!==e.get(n))return!0}return!1}(e,t,0,i,s)&&function(e,t,n,i,s){if(i+s===n)return!0;const r=t.charCodeAt(i+s);if(0!==e.get(r))return!0;if(13===r||10===r)return!0;if(s>0){const n=t.charCodeAt(i+s-1);if(0!==e.get(n))return!0}return!1}(e,t,n,i,s)}class f{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t)return null;if(n=this._searchRegex.exec(e),!n)return null;const s=n.index,r=n[0].length;if(s===this._prevMatchStartIndex&&r===this._prevMatchLength){if(0===r){i.z(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=r,!this._wordSeparators||g(this._wordSeparators,e,t,s,r))return n}while(n);return null}}}}]);
//# sourceMappingURL=vendors~console-monaco~ge~monaco~86ffeb1a.2966b477.chunk.js.map