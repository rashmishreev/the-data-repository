(this["webpackJsonpcampus-app-v2"]=this["webpackJsonpcampus-app-v2"]||[]).push([[17],{2038:function(e,t,i){var o;self.MonacoEnvironment=(o={editorWorkerService:"editor.worker.js"},{globalAPI:!0,getWorkerUrl:function(e,t){var s=i.p,n=(s?s.replace(/\/$/,"")+"/":"")+o[t];if(/^((http:)|(https:)|(file:)|(\/\/))/.test(n)){var r=String(window.location),d=r.substr(0,r.length-window.location.hash.length-window.location.search.length-window.location.pathname.length);if(n.substring(0,d.length)!==d){var a=new Blob(["/*"+t+'*/importScripts("'+n+'");'],{type:"application/javascript"});return URL.createObjectURL(a)}}return n}}),i(2783),i(2787),i(2789),i(3031),i(2795),i(3019),i(2171),i(2799),i(3e3),i(3010),i(2861),i(2862),i(3032),i(2865),i(2401),i(2866),i(2867),i(2868),i(2437),i(2869),e.exports=i(2870),i(2920),i(2921),i(2922),i(2923),i(2924),i(2925),i(2926),i(2927),i(2928)},2137:function(e,t,i){"use strict";i.d(t,"b",(function(){return v})),i.d(t,"g",(function(){return y})),i.d(t,"a",(function(){return C})),i.d(t,"c",(function(){return O})),i.d(t,"e",(function(){return D})),i.d(t,"d",(function(){return j})),i.d(t,"f",(function(){return R}));var o=i(1945),s=i(1951),n=i(1941),r=i(1948),d=i(1958),a=i(1933),l=i(2058),c=i(1931),h=i(1989),g=i(2136),u=i(2082),p=i(1959),m=i(1953),b=i(1955),_=i(2272),f=i(1937),w=function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{a(o.next(e))}catch(t){n(t)}}function d(e){try{a(o.throw(e))}catch(t){n(t)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,d)}a((o=o.apply(e,t||[])).next())}))};const v={Visible:new r.c("suggestWidgetVisible",!1,Object(f.a)("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new r.c("suggestWidgetDetailsVisible",!1,Object(f.a)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new r.c("suggestWidgetMultipleSuggestions",!1,Object(f.a)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new r.c("suggestionMakesTextEdit",!0,Object(f.a)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new r.c("acceptSuggestionOnEnter",!0,Object(f.a)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new r.c("suggestionHasInsertAndReplaceRange",!1,Object(f.a)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new r.c("suggestionInsertMode",void 0,{type:"string",description:Object(f.a)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new r.c("suggestionCanResolve",!1,Object(f.a)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},y=new h.b("suggestWidgetStatusBar");class S{constructor(e,t,i,o){this.position=e,this.completion=t,this.container=i,this.provider=o,this.isInvalid=!1,this.score=l.a.Default,this.distance=0,this.textLabel="string"===typeof t.label?t.label:t.label.name,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),a.a.isIRange(t.range)?(this.editStart=new n.a(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new n.a(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new n.a(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||a.a.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new n.a(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new n.a(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new n.a(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||a.a.spansMultipleLines(t.range.insert)||a.a.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),"function"!==typeof o.resolveCompletionItem&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return w(this,void 0,void 0,(function*(){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._isResolved=!1});this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(e=>{Object.assign(this.completion,e),this._isResolved=!0,t.dispose()},e=>{Object(o.d)(e)&&(this._resolveCache=void 0,this._isResolved=!1)})}return this._resolveCache}))}}class C{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.showDeprecated=o}}function O(){}C.default=new C;class x{constructor(e,t,i,o){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=o}}function D(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.default,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{triggerKind:0},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d.a.None;return w(this,void 0,void 0,(function*(){const d=new u.a(!0);t=t.clone();const l=e.getWordAtPosition(t),h=l?new a.a(t.lineNumber,l.startColumn,t.lineNumber,l.endColumn):a.a.fromPositions(t),p={replace:h,insert:h.setEndPosition(t.lineNumber,t.column)},m=[],b=new c.b,_=[];let f=!1;const v=(e,o,s)=>{var n,r,d;if(o){for(let s of o.suggestions)if(!i.kindFilter.has(s.kind)){if(!i.showDeprecated&&(null===(n=null===s||void 0===s?void 0:s.tags)||void 0===n?void 0:n.includes(1)))continue;s.range||(s.range=p),s.sortText||(s.sortText="string"===typeof s.label?s.label:s.label.name),!f&&s.insertTextRules&&4&s.insertTextRules&&(f=g.c.guessNeedsClipboard(s.insertText)),m.push(new S(t,s,o,e))}Object(c.g)(o)&&b.add(o),_.push({providerName:null!==(r=e._debugDisplayName)&&void 0!==r?r:"unkown_provider",elapsedProvider:null!==(d=o.duration)&&void 0!==d?d:-1,elapsedOverall:s.elapsed()})}},y=(()=>w(this,void 0,void 0,(function*(){})))();for(let a of s.d.orderedGroups(e)){let s=m.length;if(yield Promise.all(a.map(s=>w(this,void 0,void 0,(function*(){if(!(i.providerFilter.size>0)||i.providerFilter.has(s))try{const i=new u.a(!0),o=yield s.provideCompletionItems(e,t,n,r);v(s,o,i)}catch(d){Object(o.f)(d)}})))),s!==m.length||r.isCancellationRequested)break}return yield y,r.isCancellationRequested?(b.dispose(),Promise.reject(Object(o.a)())):new x(m.sort(j(i.snippetSortOrder)),f,{entries:_,elapsed:d.elapsed()},b)}))}function T(e,t){if(e.sortTextLow&&t.sortTextLow){if(e.sortTextLow<t.sortTextLow)return-1;if(e.sortTextLow>t.sortTextLow)return 1}return e.completion.label<t.completion.label?-1:e.completion.label>t.completion.label?1:e.completion.kind-t.completion.kind}const k=new Map;function j(e){return k.get(e)}k.set(0,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return-1;if(27===t.completion.kind)return 1}return T(e,t)})),k.set(2,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return-1}return T(e,t)})),k.set(1,T),p.a.registerCommand("_executeCompletionItemProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return w(void 0,void 0,void 0,(function*(){const[t,o,s,r]=i;Object(m.b)(b.a.isUri(t)),Object(m.b)(n.a.isIPosition(o)),Object(m.b)("string"===typeof s||!s),Object(m.b)("number"===typeof r||!r);const a=yield e.get(_.a).createModelReference(t);try{const e={incomplete:!1,suggestions:[]},t=[],i=yield D(a.object.textEditorModel,n.a.lift(o),void 0,{triggerCharacter:s,triggerKind:s?1:0});for(const o of i.items)t.length<(null!==r&&void 0!==r?r:0)&&t.push(o.resolve(d.a.None)),e.incomplete=e.incomplete||o.container.incomplete,e.suggestions.push(o.completion);try{return yield Promise.all(t),e}finally{setTimeout(()=>i.disposable.dispose(),100)}}finally{a.dispose()}}))}));const N=new class{constructor(){this.onlyOnceSuggestions=[]}provideCompletionItems(){let e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}};function R(e,t){setTimeout(()=>{N.onlyOnceSuggestions.push(...t),e.getContribution("editor.contrib.suggestController").triggerSuggest((new Set).add(N))},0)}s.d.register("*",N)},2401:function(e,t,i){"use strict";i.r(t),i.d(t,"ToggleTabFocusModeAction",(function(){return d}));var o=i(1937),s=i(2006),n=i(1952),r=i(2274);class d extends n.b{constructor(){super({id:d.ID,label:o.a({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}run(e,t){const i=!r.b.getTabFocusMode();r.b.setTabFocusMode(i),i?Object(s.a)(o.a("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):Object(s.a)(o.a("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}d.ID="editor.action.toggleTabFocusMode",Object(n.i)(d)},2437:function(e,t,i){"use strict";i.r(t),i.d(t,"MoveWordCommand",(function(){return f})),i.d(t,"WordLeftCommand",(function(){return w})),i.d(t,"WordRightCommand",(function(){return v})),i.d(t,"CursorWordStartLeft",(function(){return y})),i.d(t,"CursorWordEndLeft",(function(){return S})),i.d(t,"CursorWordLeft",(function(){return C})),i.d(t,"CursorWordStartLeftSelect",(function(){return O})),i.d(t,"CursorWordEndLeftSelect",(function(){return x})),i.d(t,"CursorWordLeftSelect",(function(){return D})),i.d(t,"CursorWordAccessibilityLeft",(function(){return T})),i.d(t,"CursorWordAccessibilityLeftSelect",(function(){return k})),i.d(t,"CursorWordStartRight",(function(){return j})),i.d(t,"CursorWordEndRight",(function(){return N})),i.d(t,"CursorWordRight",(function(){return R})),i.d(t,"CursorWordStartRightSelect",(function(){return I})),i.d(t,"CursorWordEndRightSelect",(function(){return M})),i.d(t,"CursorWordRightSelect",(function(){return L})),i.d(t,"CursorWordAccessibilityRight",(function(){return P})),i.d(t,"CursorWordAccessibilityRightSelect",(function(){return W})),i.d(t,"DeleteWordCommand",(function(){return F})),i.d(t,"DeleteWordLeftCommand",(function(){return E})),i.d(t,"DeleteWordRightCommand",(function(){return A})),i.d(t,"DeleteWordStartLeft",(function(){return H})),i.d(t,"DeleteWordEndLeft",(function(){return $})),i.d(t,"DeleteWordLeft",(function(){return z})),i.d(t,"DeleteWordStartRight",(function(){return V})),i.d(t,"DeleteWordEndRight",(function(){return q})),i.d(t,"DeleteWordRight",(function(){return B})),i.d(t,"DeleteInsideWord",(function(){return U}));var o=i(1937),s=i(1952),n=i(2134),r=i(1968),d=i(2172),a=i(2131),l=i(1941),c=i(1933),h=i(1949),g=i(1964),u=i(2011),p=i(1948),m=i(1967),b=i(1979),_=i(2438);class f extends s.c{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;const o=Object(a.a)(t.getOption(114)),s=t.getModel(),n=t.getSelections().map(e=>{const t=new l.a(e.positionLineNumber,e.positionColumn),i=this._move(o,s,t,this._wordNavigationType);return this._moveTo(e,i,this._inSelectionMode)});if(s.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,n.map(e=>r.d.fromModelSelection(e))),1===n.length){const e=new l.a(n[0].positionLineNumber,n[0].positionColumn);t.revealPosition(e,0)}}_moveTo(e,t,i){return i?new h.a(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new h.a(t.lineNumber,t.column,t.lineNumber,t.column)}}class w extends f{_move(e,t,i,o){return d.a.moveWordLeft(e,t,i,o)}}class v extends f{_move(e,t,i,o){return d.a.moveWordRight(e,t,i,o)}}class y extends w{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class S extends w{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class C extends w{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:p.a.and(g.a.textInputFocus,null===(e=p.a.and(u.a,_.b))||void 0===e?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class O extends w{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class x extends w{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class D extends w{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:p.a.and(g.a.textInputFocus,null===(e=p.a.and(u.a,_.b))||void 0===e?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class T extends w{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,i,o){return super._move(Object(a.a)(m.g.wordSeparators.defaultValue),t,i,o)}}class k extends w{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,i,o){return super._move(Object(a.a)(m.g.wordSeparators.defaultValue),t,i,o)}}class j extends v{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class N extends v{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:p.a.and(g.a.textInputFocus,null===(e=p.a.and(u.a,_.b))||void 0===e?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class R extends v{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class I extends v{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class M extends v{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:p.a.and(g.a.textInputFocus,null===(e=p.a.and(u.a,_.b))||void 0===e?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class L extends v{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class P extends v{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,i,o){return super._move(Object(a.a)(m.g.wordSeparators.defaultValue),t,i,o)}}class W extends v{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,i,o){return super._move(Object(a.a)(m.g.wordSeparators.defaultValue),t,i,o)}}class F extends s.c{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,i){if(!t.hasModel())return;const o=Object(a.a)(t.getOption(114)),s=t.getModel(),r=t.getSelections(),d=t.getOption(5),l=t.getOption(8),c=b.a.getAutoClosingPairs(s.getLanguageIdentifier().id),h=t._getViewModel(),g=r.map(e=>{const i=this._delete({wordSeparators:o,model:s,selection:e,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:d,autoClosingQuotes:l,autoClosingPairs:c,autoClosedCharacters:h.getCursorAutoClosedCharacters()},this._wordNavigationType);return new n.a(i,"")});t.pushUndoStop(),t.executeCommands(this.id,g),t.pushUndoStop()}}class E extends F{_delete(e,t){let i=d.a.deleteWordLeft(e,t);return i||new c.a(1,1,1,1)}}class A extends F{_delete(e,t){let i=d.a.deleteWordRight(e,t);if(i)return i;const o=e.model.getLineCount(),s=e.model.getLineMaxColumn(o);return new c.a(o,s,o,s)}}class H extends E{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:g.a.writable})}}class $ extends E{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:g.a.writable})}}class z extends E{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:g.a.writable,kbOpts:{kbExpr:g.a.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class V extends A{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:g.a.writable})}}class q extends A{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:g.a.writable})}}class B extends A{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:g.a.writable,kbOpts:{kbExpr:g.a.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class U extends s.b{constructor(){super({id:"deleteInsideWord",precondition:g.a.writable,label:o.a("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,i){if(!t.hasModel())return;const o=Object(a.a)(t.getOption(114)),s=t.getModel(),r=t.getSelections().map(e=>{const t=d.a.deleteInsideWord(o,s,e);return new n.a(t,"")});t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}Object(s.j)(new y),Object(s.j)(new S),Object(s.j)(new C),Object(s.j)(new O),Object(s.j)(new x),Object(s.j)(new D),Object(s.j)(new j),Object(s.j)(new N),Object(s.j)(new R),Object(s.j)(new I),Object(s.j)(new M),Object(s.j)(new L),Object(s.j)(new T),Object(s.j)(new k),Object(s.j)(new P),Object(s.j)(new W),Object(s.j)(new H),Object(s.j)(new $),Object(s.j)(new z),Object(s.j)(new V),Object(s.j)(new q),Object(s.j)(new B),Object(s.i)(U)},2867:function(e,t,i){"use strict";i.r(t);var o=i(1943),s=i(1931),n=i(1952),r=i(1951),d=i(1988),a=i(2435),l=i(1944),c=i(1994),h=i(2436),g=i(2477),u=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},p=function(e,t){return function(i,o){t(i,o,e)}};let m=class extends s.a{constructor(e,t,i,s){super(),this._modelService=t,this._themeService=i,this._configurationService=s,this._editor=e,this._tokenizeViewport=new o.e(()=>this._tokenizeViewportNow(),100),this._outstandingRequests=[],this._register(this._editor.onDidScrollChange(()=>{this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._editor.onDidChangeModelContent(e=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(r.k.onDidChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()})),this._register(this._configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(h.b)&&(this._cancelAll(),this._tokenizeViewport.schedule())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),this._tokenizeViewport.schedule()}))}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,i=this._outstandingRequests.length;t<i;t++)if(this._outstandingRequests[t]===e)return void this._outstandingRequests.splice(t,1)}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.hasCompleteSemanticTokens())return;if(!Object(h.c)(e,this._themeService,this._configurationService))return void(e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1));const t=Object(g.a)(e);if(!t)return void(e.hasSomeSemanticTokens()&&e.setSemanticTokens(null,!1));const i=this._modelService.getSemanticTokensProviderStyling(t),o=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(o.map(o=>this._requestRange(e,o,t,i)))}_requestRange(e,t,i,s){const n=e.getVersionId(),r=Object(o.h)(o=>Promise.resolve(i.provideDocumentRangeSemanticTokens(e,t,o)));return r.then(i=>{i&&!e.isDisposed()&&e.getVersionId()===n&&e.setPartialSemanticTokens(t,Object(a.b)(i,s,e.getLanguageIdentifier()))}).then(()=>this._removeOutstandingRequest(r),()=>this._removeOutstandingRequest(r)),r}};m.ID="editor.contrib.viewportSemanticTokens",m=u([p(1,d.a),p(2,l.b),p(3,c.a)],m),Object(n.k)(m.ID,m)},2868:function(e,t,i){"use strict";i.r(t),i.d(t,"getOccurrencesAtPosition",(function(){return k}));var o=i(1937),s=i(1950),n=i(1943),r=i(1958),d=i(1945),a=i(1931),l=i(1952),c=i(1933),h=i(1964),g=i(2008),u=i(2026),p=i(1951),m=i(1948),b=i(1966),_=i(1944),f=i(2006),w=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},v=function(e,t){return function(i,o){t(i,o,e)}};const y=Object(b.Sb)("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},o.a("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),S=Object(b.Sb)("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},o.a("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),C=Object(b.Sb)("editor.wordHighlightBorder",{light:null,dark:null,hc:b.b},o.a("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),O=Object(b.Sb)("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:b.b},o.a("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),x=Object(b.Sb)("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},o.a("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),D=Object(b.Sb)("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},o.a("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),T=new m.c("hasWordHighlights",!1);function k(e,t,i){const o=p.i.ordered(e);return Object(n.j)(o.map(o=>()=>Promise.resolve(o.provideDocumentHighlights(e,t,i)).then(void 0,d.f)),s.l)}class j{constructor(e,t,i){this._wordRange=this._getCurrentWordRange(e,t),this.result=Object(n.h)(o=>this._compute(e,t,i,o))}_getCurrentWordRange(e,t){const i=e.getWordAtPosition(t.getPosition());return i?new c.a(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):null}isValid(e,t,i){const o=t.startLineNumber,s=t.startColumn,n=t.endColumn,r=this._getCurrentWordRange(e,t);let d=Boolean(this._wordRange&&this._wordRange.equalsRange(r));for(let a=0,l=i.length;!d&&a<l;a++){let t=e.getDecorationRange(i[a]);t&&t.startLineNumber===o&&t.startColumn<=s&&t.endColumn>=n&&(d=!0)}return d}cancel(){this.result.cancel()}}class N extends j{_compute(e,t,i,o){return k(e,t.getPosition(),o).then(e=>e||[])}}class R extends j{constructor(e,t,i){super(e,t,i),this._selectionIsEmpty=t.isEmpty()}_compute(e,t,i,o){return Object(n.l)(250,o).then(()=>{if(!t.isEmpty())return[];const o=e.getWordAtPosition(t.getPosition());if(!o||o.word.length>1e3)return[];return e.findMatches(o.word,!0,!1,!0,i,!1).map(e=>({range:e.range,kind:p.h.Text}))})}isValid(e,t,i){const o=t.isEmpty();return this._selectionIsEmpty===o&&super.isValid(e,t,i)}}Object(l.l)("_executeDocumentHighlights",(e,t)=>k(e,t,r.a.None));class I{constructor(e,t){this.toUnhook=new a.b,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=e,this._hasWordHighlights=T.bindTo(t),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(69),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(e=>{this._ignorePositionChangeEvent||this.occurrencesHighlight&&this._onPositionChanged(e)})),this.toUnhook.add(e.onDidChangeModelContent(e=>{this._stopAll()})),this.toUnhook.add(e.onDidChangeConfiguration(e=>{let t=this.editor.getOption(69);this.occurrencesHighlight!==t&&(this.occurrencesHighlight=t,this._stopAll())})),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}hasDecorations(){return this._decorationIds.length>0}restore(){this.occurrencesHighlight&&this._run()}_getSortedHighlights(){return s.d(this._decorationIds.map(e=>this.model.getDecorationRange(e)).sort(c.a.compareRangesUsingStarts))}moveNext(){let e=this._getSortedHighlights(),t=(e.findIndex(e=>e.containsPosition(this.editor.getPosition()))+1)%e.length,i=e[t];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const o=this._getWord();if(o){const s=this.editor.getModel().getLineContent(i.startLineNumber);Object(f.a)(`${s}, ${t+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){let e=this._getSortedHighlights(),t=(e.findIndex(e=>e.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,i=e[t];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const o=this._getWord();if(o){const s=this.editor.getModel().getLineContent(i.startLineNumber);Object(f.a)(`${s}, ${t+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeDecorations(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}_stopAll(){this._removeDecorations(),-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){this.occurrencesHighlight&&3===e.reason?this._run():this._stopAll()}_getWord(){let e=this.editor.getSelection(),t=e.startLineNumber,i=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:i})}_run(){let e=this.editor.getSelection();if(e.startLineNumber!==e.endLineNumber)return void this._stopAll();let t=e.startColumn,i=e.endColumn;const o=this._getWord();if(!o||o.startColumn>t||o.endColumn<i)return void this._stopAll();const s=this.workerRequest&&this.workerRequest.isValid(this.model,e,this._decorationIds);if(this.lastCursorPositionChangeTime=(new Date).getTime(),s)this.workerRequestCompleted&&-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();let e=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=(n=this.model,r=this.editor.getSelection(),a=this.editor.getOption(114),p.i.has(n)?new N(n,r,a):new R(n,r,a)),this.workerRequest.result.then(t=>{e===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=t||[],this._beginRenderDecorations())},d.e)}var n,r,a}_beginRenderDecorations(){let e=(new Date).getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){this.renderDecorationsTimer=-1;let e=[];for(const t of this.workerRequestValue)t.range&&e.push({range:t.range,options:I._getDecorationOptions(t.kind)});this._decorationIds=this.editor.deltaDecorations(this._decorationIds,e),this._hasWordHighlights.set(this.hasDecorations())}static _getDecorationOptions(e){return e===p.h.Write?this._WRITE_OPTIONS:e===p.h.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}dispose(){this._stopAll(),this.toUnhook.dispose()}}I._WRITE_OPTIONS=u.a.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Object(_.g)(D),position:g.d.Center}}),I._TEXT_OPTIONS=u.a.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Object(_.g)(b.Jb),position:g.d.Center}}),I._REGULAR_OPTIONS=u.a.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Object(_.g)(x),position:g.d.Center}});let M=class e extends a.a{constructor(e,t){super(),this.wordHighlighter=null;const i=()=>{e.hasModel()&&(this.wordHighlighter=new I(e,t))};this._register(e.onDidChangeModel(e=>{this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),i()})),i()}static get(t){return t.getContribution(e.ID)}saveViewState(){return!(!this.wordHighlighter||!this.wordHighlighter.hasDecorations())}moveNext(){this.wordHighlighter&&this.wordHighlighter.moveNext()}moveBack(){this.wordHighlighter&&this.wordHighlighter.moveBack()}restoreViewState(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}dispose(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),super.dispose()}};M.ID="editor.contrib.wordHighlighter",M=w([v(1,m.b)],M);class L extends l.b{constructor(e,t){super(t),this._isNext=e}run(e,t){const i=M.get(t);i&&(this._isNext?i.moveNext():i.moveBack())}}class P extends l.b{constructor(){super({id:"editor.action.wordHighlight.trigger",label:o.a("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:T.toNegated(),kbOpts:{kbExpr:h.a.editorTextFocus,primary:0,weight:100}})}run(e,t,i){const o=M.get(t);o&&o.restoreViewState(!0)}}Object(l.k)(M.ID,M),Object(l.i)(class extends L{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:o.a("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:T,kbOpts:{kbExpr:h.a.editorTextFocus,primary:65,weight:100}})}}),Object(l.i)(class extends L{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:o.a("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:T,kbOpts:{kbExpr:h.a.editorTextFocus,primary:1089,weight:100}})}}),Object(l.i)(P),Object(_.f)((e,t)=>{const i=e.getColor(b.E);i&&(t.addRule(`.monaco-editor .focused .selectionHighlight { background-color: ${i}; }`),t.addRule(`.monaco-editor .selectionHighlight { background-color: ${i.transparent(.5)}; }`));const o=e.getColor(y);o&&t.addRule(`.monaco-editor .wordHighlight { background-color: ${o}; }`);const s=e.getColor(S);s&&t.addRule(`.monaco-editor .wordHighlightStrong { background-color: ${s}; }`);const n=e.getColor(b.F);n&&t.addRule(`.monaco-editor .selectionHighlight { border: 1px ${"hc"===e.type?"dotted":"solid"} ${n}; box-sizing: border-box; }`);const r=e.getColor(C);r&&t.addRule(`.monaco-editor .wordHighlight { border: 1px ${"hc"===e.type?"dashed":"solid"} ${r}; box-sizing: border-box; }`);const d=e.getColor(O);d&&t.addRule(`.monaco-editor .wordHighlightStrong { border: 1px ${"hc"===e.type?"dashed":"solid"} ${d}; box-sizing: border-box; }`)})},2869:function(e,t,i){"use strict";i.r(t),i.d(t,"DeleteWordPartLeft",(function(){return l})),i.d(t,"DeleteWordPartRight",(function(){return c})),i.d(t,"WordPartLeftCommand",(function(){return h})),i.d(t,"CursorWordPartLeft",(function(){return g})),i.d(t,"CursorWordPartLeftSelect",(function(){return u})),i.d(t,"WordPartRightCommand",(function(){return p})),i.d(t,"CursorWordPartRight",(function(){return m})),i.d(t,"CursorWordPartRightSelect",(function(){return b}));var o=i(1952),s=i(2172),n=i(1933),r=i(1964),d=i(2437),a=i(1959);class l extends d.DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:r.a.writable,kbOpts:{kbExpr:r.a.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){let i=s.b.deleteWordPartLeft(e);return i||new n.a(1,1,1,1)}}class c extends d.DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:r.a.writable,kbOpts:{kbExpr:r.a.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){let i=s.b.deleteWordPartRight(e);if(i)return i;const o=e.model.getLineCount(),r=e.model.getLineMaxColumn(o);return new n.a(o,r,o,r)}}class h extends d.MoveWordCommand{_move(e,t,i,o){return s.b.moveWordPartLeft(e,t,i)}}class g extends h{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:r.a.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}a.a.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class u extends h{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:r.a.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}a.a.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class p extends d.MoveWordCommand{_move(e,t,i,o){return s.b.moveWordPartRight(e,t,i)}}class m extends p{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:r.a.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class b extends p{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:r.a.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}Object(o.j)(new l),Object(o.j)(new c),Object(o.j)(new g),Object(o.j)(new u),Object(o.j)(new m),Object(o.j)(new b)},2870:function(e,t,i){"use strict";i.r(t),i.d(t,"CancellationTokenSource",(function(){return h})),i.d(t,"Emitter",(function(){return g})),i.d(t,"KeyCode",(function(){return u})),i.d(t,"KeyMod",(function(){return p})),i.d(t,"Position",(function(){return m})),i.d(t,"Range",(function(){return b})),i.d(t,"Selection",(function(){return _})),i.d(t,"SelectionDirection",(function(){return f})),i.d(t,"MarkerSeverity",(function(){return w})),i.d(t,"MarkerTag",(function(){return v})),i.d(t,"Uri",(function(){return y})),i.d(t,"Token",(function(){return S})),i.d(t,"editor",(function(){return C})),i.d(t,"languages",(function(){return O}));var o,s=i(1967),n=i(2439),r=i(3020),d=i(3036),a=i(1940),l=i(3037);s.g.wrappingIndent.defaultValue=0,s.g.glyphMargin.defaultValue=!1,s.g.autoIndent.defaultValue=3,s.g.overviewRulerLanes.defaultValue=2,l.a.setFormatterSelector((e,t,i)=>Promise.resolve(e[0]));const c=Object(n.a)();c.editor=Object(r.a)(),c.languages=Object(d.a)();const h=c.CancellationTokenSource,g=c.Emitter,u=c.KeyCode,p=c.KeyMod,m=c.Position,b=c.Range,_=c.Selection,f=c.SelectionDirection,w=c.MarkerSeverity,v=c.MarkerTag,y=c.Uri,S=c.Token,C=c.editor,O=c.languages;((null===(o=a.b.MonacoEnvironment)||void 0===o?void 0:o.globalAPI)||"function"===typeof define&&i(2919))&&(self.monaco=c),"undefined"!==typeof self.require&&"function"===typeof self.require.config&&self.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]})},2982:function(e,t,i){"use strict";i.d(t,"a",(function(){return qt}));var o=i(2006),s=i(1950),n=i(1945),r=i(2005),d=i(1931),a=i(2323),l=i(1952),c=i(2e3),h=i(1933),g=i(1964),u=i(2414),p=i(2136),m=i(2007),b=i(2175),_=i(1951),f=i(1943),w=i(1939),v=i(1994),y=i(2174),S=i(2087),C=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t){return function(i,o){t(i,o,e)}};class x{constructor(e){this.name=e}select(e,t,i){if(0===i.length)return 0;let o=i[0].score[0];for(let s=0;s<i.length;s++){const{score:e,completion:t}=i[s];if(e[0]!==o)break;if(t.preselect)return s}return 0}}class D extends x{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}}let T=class e{constructor(e,t,i){this._storageService=e,this._modeService=t,this._configService=i,this._disposables=new d.b,this._persistSoon=new f.e(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(e=>{e.reason===b.c.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(t,i){var o,s;const n=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:null===(o=this._modeService.getLanguageIdentifier(t.getLanguageIdAtPosition(i.lineNumber,i.column)))||void 0===o?void 0:o.language,resource:t.uri});if((null===(s=this._strategy)||void 0===s?void 0:s.name)!==n){this._saveState();const t=e._strategyCtors.get(n)||D;this._strategy=new t;try{const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=this._storageService.get(`${e._storagePrefix}/${n}`,t);i&&this._strategy.fromJSON(JSON.parse(i))}catch(r){}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${e._storagePrefix}/${this._strategy.name}`,i,t,1)}}};T._strategyCtors=new Map([["recentlyUsedByPrefix",class extends x{constructor(){super("recentlyUsedByPrefix"),this._trie=m.c.forStrings(),this._seq=0}memorize(e,t,i){const{word:o}=e.getWordUntilPosition(t),s=`${e.getLanguageIdentifier().language}/${o}`;this._trie.set(s,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){let{word:o}=e.getWordUntilPosition(t);if(!o)return super.select(e,t,i);let s=`${e.getLanguageIdentifier().language}/${o}`,n=this._trie.get(s);if(n||(n=this._trie.findSubstr(s)),n)for(let r=0;r<i.length;r++){let{kind:e,insertText:t}=i[r].completion;if(e===n.type&&t===n.insertText)return r}return super.select(e,t,i)}toJSON(){let e=[];return this._trie.forEach((t,i)=>e.push([i,t])),e.sort((e,t)=>-(e[1].touch-t[1].touch)).forEach((e,t)=>e[1].touch=t),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type="number"===typeof i.type?i.type:Object(_.F)(i.type),this._trie.set(t,i)}}}],["recentlyUsed",class extends x{constructor(){super("recentlyUsed"),this._cache=new m.a(300,.66),this._seq=0}memorize(e,t,i){const o=`${e.getLanguageIdentifier().language}/${i.textLabel}`;this._cache.set(o,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(0===i.length)return 0;const o=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(o))return super.select(e,t,i);let s=i[0].score[0],n=-1,r=-1,d=-1;for(let a=0;a<i.length&&i[a].score[0]===s;a++){const t=`${e.getLanguageIdentifier().language}/${i[a].textLabel}`,o=this._cache.peek(t);if(o&&o.touch>d&&o.type===i[a].completion.kind&&o.insertText===i[a].completion.insertText&&(d=o.touch,r=a),i[a].completion.preselect&&-1===n)return a}return-1!==r?r:-1!==n?n:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();for(const[t,i]of e)i.touch=0,i.type="number"===typeof i.type?i.type:Object(_.F)(i.type),this._cache.set(t,i);this._seq=this._cache.size}}],["first",D]]),T._storagePrefix="suggest/memories",T=C([O(0,b.a),O(1,S.a),O(2,v.a)],T);const k=Object(w.c)("ISuggestMemories");Object(y.b)(k,T,!0);var j=i(1937),N=i(1959),R=i(1948),I=i(2164),M=i(2137),L=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},P=function(e,t){return function(i,o){t(i,o,e)}};let W=class e{constructor(t,i){this._editor=t,this._index=0,this._ckOtherSuggestions=e.OtherSuggestions.bindTo(i)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),null===(e=this._listener)||void 0===e||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set(t,i){let{model:o,index:s}=t;0!==o.items.length&&e._moveIndex(!0,o,s)!==s?(this._acceptNext=i,this._model=o,this._index=s,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)):this.reset()}static _moveIndex(e,t,i){let o=i;for(;o=(o+t.items.length+(e?1:-1))%t.items.length,o!==i&&t.items[o].completion.additionalTextEdits;);return o}next(){this._move(!0)}prev(){this._move(!1)}_move(t){if(this._model)try{this._ignore=!0,this._index=e._moveIndex(t,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};W.OtherSuggestions=new R.c("hasOtherSuggestions",!1),W=L([P(1,R.b)],W);var F=i(1932),E=i(1949),A=i(2806),H=i(1958),$=i(2088),z=i(2415),V=function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{a(o.next(e))}catch(t){n(t)}}function d(e){try{a(o.throw(e))}catch(t){n(t)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,d)}a((o=o.apply(e,t||[])).next())}))};class q{static create(e,t){return V(this,void 0,void 0,(function*(){if(!t.getOption(104).localityBonus)return q.None;if(!t.hasModel())return q.None;const i=t.getModel(),o=t.getPosition();if(!e.canComputeWordRanges(i.uri))return q.None;const[n]=yield(new z.a).provideSelectionRanges(i,[o]);if(0===n.length)return q.None;const r=yield e.computeWordRanges(i.uri,n[0].range);if(!r)return q.None;const d=i.getWordUntilPosition(o);return delete r[d.word],new class extends q{distance(e,i){if(!o.equals(t.getPosition()))return 0;if(17===i.kind)return 2<<20;let d="string"===typeof i.label?i.label:i.label.name,a=r[d];if(Object(s.k)(a))return 2<<20;let l=Object(s.c)(a,h.a.fromPositions(e),h.a.compareRangesUsingStarts),c=l>=0?a[l]:a[Math.max(0,~l-1)],g=n.length;for(const t of n){if(!h.a.containsRange(t.range,c))break;g-=1}return g}}}))}}q.None=new class extends q{distance(){return 0}};var B=i(1936),U=i(2086),K=i(2084),G=i(2039),J=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},Q=function(e,t){return function(i,o){t(i,o,e)}},X=function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{a(o.next(e))}catch(t){n(t)}}function d(e){try{a(o.throw(e))}catch(t){n(t)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,d)}a((o=o.apply(e,t||[])).next())}))};class Y{constructor(e,t,i,o){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.auto=i,this.shy=o}static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),i=e.getPosition();t.tokenizeIfCheap(i.lineNumber);const o=t.getWordAtPosition(i);return!!o&&(o.endColumn===i.column&&!!isNaN(Number(o.word)))}}let Z=class e{constructor(e,t,i,o,s){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=o,this._logService=s,this._toDispose=new d.b,this._quickSuggestDelay=10,this._triggerCharacterListener=new d.b,this._triggerQuickSuggest=new f.g,this._state=0,this._completionDisposables=new d.b,this._onDidCancel=new F.a,this._onDidTrigger=new F.a,this._onDidSuggest=new F.a,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new E.a(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters(),this._updateQuickSuggest()})),this._toDispose.add(_.d.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(e=>{this._onCursorChange(e)}));let n=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{n=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{n=!1,this._refilterCompletionItems()})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{n||this._refilterCompletionItems()})),this._updateTriggerCharacters(),this._updateQuickSuggest()}dispose(){Object(d.f)(this._triggerCharacterListener),Object(d.f)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateQuickSuggest(){this._quickSuggestDelay=this._editor.getOption(77),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&0!==this._quickSuggestDelay||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(78)||!this._editor.hasModel()||!this._editor.getOption(107))return;const e=new Map;for(const i of _.d.all(this._editor.getModel()))for(const t of i.triggerCharacters||[]){let o=e.get(t);o||(o=new Set,o.add(Object(M.c)()),e.set(t,o)),o.add(i)}const t=t=>{if(!t){const e=this._editor.getPosition();t=this._editor.getModel().getLineContent(e.lineNumber).substr(0,e.column-1)}let i="";Object(B.F)(t.charCodeAt(t.length-1))?Object(B.E)(t.charCodeAt(t.length-2))&&(i=t.substr(t.length-2)):i=t.charAt(t.length-1);const o=e.get(i);if(o){const e=this._completionModel?{items:this._completionModel.adopt(o),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,triggerCharacter:i},Boolean(this._completionModel),o,e)}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(t))}get state(){return this._state}cancel(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;0!==this._state&&(this._triggerQuickSuggest.cancel(),null===(t=this._requestToken)||void 0===t||t.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){0!==this._state&&(this._editor.hasModel()&&_.d.has(this._editor.getModel())?this.trigger({auto:2===this._state,shy:!1},!0):this.cancel())}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0!==e.reason&&3!==e.reason||"keyboard"!==e.source&&"deleteLeft"!==e.source)this.cancel();else if(_.d.has(t))if(0===this._state&&0===e.reason){if(!1===this._editor.getOption(76))return;if(!i.containsRange(this._currentSelection)&&!i.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))return;if(this._editor.getOption(104).snippetsPreventQuickSuggestions&&u.a.get(this._editor).isInSnippet())return;this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(0!==this._state)return;if(!Y.shouldAutoTrigger(this._editor))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),i=this._editor.getOption(76);if(!1!==i){if(!0===i);else{e.tokenizeIfCheap(t.lineNumber);const o=e.getLineTokens(t.lineNumber),s=o.getStandardTokenType(o.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(!(i.other&&0===s||i.comments&&1===s||i.strings&&2===s))return}this.trigger({auto:!0,shy:!1})}},this._quickSuggestDelay)}else 0!==this._state&&3===e.reason&&this._refilterCompletionItems()}_refilterCompletionItems(){Promise.resolve().then(()=>{if(0===this._state)return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getPosition(),i=new Y(e,t,2===this._state,!1);this._onNewContext(i)})}trigger(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;var r;if(!this._editor.hasModel())return;const d=this._editor.getModel(),a=t.auto,l=new Y(d,this._editor.getPosition(),a,t.shy);this.cancel(i),this._state=a?2:1,this._onDidTrigger.fire({auto:a,shy:t.shy,position:this._editor.getPosition()}),this._context=l;let c={triggerKind:null!==(r=t.triggerKind)&&void 0!==r?r:0};t.triggerCharacter&&(c={triggerKind:1,triggerCharacter:t.triggerCharacter}),this._requestToken=new H.b;const h=this._editor.getOption(99);let g=1;switch(h){case"top":g=0;break;case"bottom":g=2}const{itemKind:u,showDeprecated:p}=e._createSuggestFilter(this._editor),m=q.create(this._editorWorkerService,this._editor),b=Object(M.e)(d,this._editor.getPosition(),new M.a(g,u,o,p),c,this._requestToken.token);Promise.all([b,m]).then(e=>{let[i,o]=e;return X(this,void 0,void 0,(function*(){var e;if(null===(e=this._requestToken)||void 0===e||e.dispose(),!this._editor.hasModel())return;let n=null===s||void 0===s?void 0:s.clipboardText;if(!n&&i.needsClipboard&&(n=yield this._clipboardService.readText()),0===this._state)return;const r=this._editor.getModel();let d=i.items;if(s){const e=Object(M.d)(g);d=d.concat(s.items).sort(e)}const l=new Y(r,this._editor.getPosition(),a,t.shy);this._completionModel=new A.a(d,this._context.column,{leadingLineContent:l.leadingLineContent,characterCountDelta:l.column-this._context.column},o,this._editor.getOption(104),this._editor.getOption(99),n),this._completionDisposables.add(i.disposable),this._onNewContext(l),this._reportDurationsTelemetry(i.durations)}))}).catch(n.e)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static _createSuggestFilter(e){const t=new Set;"none"===e.getOption(99)&&t.add(27);const i=e.getOption(104);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(this._context)if(e.lineNumber===this._context.lineNumber)if(Object(B.x)(e.leadingLineContent)===Object(B.x)(this._context.leadingLineContent)){if(e.column<this._context.column)e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();else if(this._completionModel)if(0!==e.leadingWord.word.length&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){const e=new Set(_.d.all(this._editor.getModel()));for(let i of this._completionModel.allProvider)e.delete(i);const t=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,e,{items:t,clipboardText:this._completionModel.clipboardText})}else if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&0!==e.leadingWord.word.length){const{incomplete:e}=this._completionModel,t=this._completionModel.adopt(e);this.trigger({auto:2===this._state,shy:!1,triggerKind:2},!0,e,{items:t,clipboardText:this._completionModel.clipboardText})}else{let t=this._completionModel.lineContext,i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},0===this._completionModel.items.length){if(Y.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn)return void this.trigger({auto:this._context.auto,shy:!1},!0);if(this._context.auto)return void this.cancel();if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&0===e.leadingWord.word.length)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:i})}}else this.cancel();else this.cancel()}};Z=J([Q(1,$.a),Q(2,U.a),Q(3,K.a),Q(4,G.b)],Z);i(2807),i(2416);var ee=i(1944),te=i(1966),ie=i(1965);const oe=Object(te.Sb)("symbolIcon.arrayForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),se=Object(te.Sb)("symbolIcon.booleanForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ne=Object(te.Sb)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},Object(j.a)("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),re=Object(te.Sb)("symbolIcon.colorForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),de=Object(te.Sb)("symbolIcon.constantForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ae=Object(te.Sb)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},Object(j.a)("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),le=Object(te.Sb)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},Object(j.a)("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ce=Object(te.Sb)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},Object(j.a)("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),he=Object(te.Sb)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},Object(j.a)("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ge=Object(te.Sb)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},Object(j.a)("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ue=Object(te.Sb)("symbolIcon.fileForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),pe=Object(te.Sb)("symbolIcon.folderForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),me=Object(te.Sb)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},Object(j.a)("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),be=Object(te.Sb)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},Object(j.a)("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),_e=Object(te.Sb)("symbolIcon.keyForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),fe=Object(te.Sb)("symbolIcon.keywordForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),we=Object(te.Sb)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},Object(j.a)("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ve=Object(te.Sb)("symbolIcon.moduleForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ye=Object(te.Sb)("symbolIcon.namespaceForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Se=Object(te.Sb)("symbolIcon.nullForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ce=Object(te.Sb)("symbolIcon.numberForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Oe=Object(te.Sb)("symbolIcon.objectForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),xe=Object(te.Sb)("symbolIcon.operatorForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),De=Object(te.Sb)("symbolIcon.packageForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Te=Object(te.Sb)("symbolIcon.propertyForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),ke=Object(te.Sb)("symbolIcon.referenceForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),je=Object(te.Sb)("symbolIcon.snippetForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ne=Object(te.Sb)("symbolIcon.stringForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Re=Object(te.Sb)("symbolIcon.structForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ie=Object(te.Sb)("symbolIcon.textForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Me=Object(te.Sb)("symbolIcon.typeParameterForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Le=Object(te.Sb)("symbolIcon.unitForeground",{dark:te.N,light:te.N,hc:te.N},Object(j.a)("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Pe=Object(te.Sb)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},Object(j.a)("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));Object(ee.f)((e,t)=>{const i=e.getColor(oe);i&&t.addRule(`${ie.b.symbolArray.cssSelector} { color: ${i}; }`);const o=e.getColor(se);o&&t.addRule(`${ie.b.symbolBoolean.cssSelector} { color: ${o}; }`);const s=e.getColor(ne);s&&t.addRule(`${ie.b.symbolClass.cssSelector} { color: ${s}; }`);const n=e.getColor(we);n&&t.addRule(`${ie.b.symbolMethod.cssSelector} { color: ${n}; }`);const r=e.getColor(re);r&&t.addRule(`${ie.b.symbolColor.cssSelector} { color: ${r}; }`);const d=e.getColor(de);d&&t.addRule(`${ie.b.symbolConstant.cssSelector} { color: ${d}; }`);const a=e.getColor(ae);a&&t.addRule(`${ie.b.symbolConstructor.cssSelector} { color: ${a}; }`);const l=e.getColor(le);l&&t.addRule(`\n\t\t\t${ie.b.symbolValue.cssSelector},${ie.b.symbolEnum.cssSelector} { color: ${l}; }`);const c=e.getColor(ce);c&&t.addRule(`${ie.b.symbolEnumMember.cssSelector} { color: ${c}; }`);const h=e.getColor(he);h&&t.addRule(`${ie.b.symbolEvent.cssSelector} { color: ${h}; }`);const g=e.getColor(ge);g&&t.addRule(`${ie.b.symbolField.cssSelector} { color: ${g}; }`);const u=e.getColor(ue);u&&t.addRule(`${ie.b.symbolFile.cssSelector} { color: ${u}; }`);const p=e.getColor(pe);p&&t.addRule(`${ie.b.symbolFolder.cssSelector} { color: ${p}; }`);const m=e.getColor(me);m&&t.addRule(`${ie.b.symbolFunction.cssSelector} { color: ${m}; }`);const b=e.getColor(be);b&&t.addRule(`${ie.b.symbolInterface.cssSelector} { color: ${b}; }`);const _=e.getColor(_e);_&&t.addRule(`${ie.b.symbolKey.cssSelector} { color: ${_}; }`);const f=e.getColor(fe);f&&t.addRule(`${ie.b.symbolKeyword.cssSelector} { color: ${f}; }`);const w=e.getColor(ve);w&&t.addRule(`${ie.b.symbolModule.cssSelector} { color: ${w}; }`);const v=e.getColor(ye);v&&t.addRule(`${ie.b.symbolNamespace.cssSelector} { color: ${v}; }`);const y=e.getColor(Se);y&&t.addRule(`${ie.b.symbolNull.cssSelector} { color: ${y}; }`);const S=e.getColor(Ce);S&&t.addRule(`${ie.b.symbolNumber.cssSelector} { color: ${S}; }`);const C=e.getColor(Oe);C&&t.addRule(`${ie.b.symbolObject.cssSelector} { color: ${C}; }`);const O=e.getColor(xe);O&&t.addRule(`${ie.b.symbolOperator.cssSelector} { color: ${O}; }`);const x=e.getColor(De);x&&t.addRule(`${ie.b.symbolPackage.cssSelector} { color: ${x}; }`);const D=e.getColor(Te);D&&t.addRule(`${ie.b.symbolProperty.cssSelector} { color: ${D}; }`);const T=e.getColor(ke);T&&t.addRule(`${ie.b.symbolReference.cssSelector} { color: ${T}; }`);const k=e.getColor(je);k&&t.addRule(`${ie.b.symbolSnippet.cssSelector} { color: ${k}; }`);const j=e.getColor(Ne);j&&t.addRule(`${ie.b.symbolString.cssSelector} { color: ${j}; }`);const N=e.getColor(Re);N&&t.addRule(`${ie.b.symbolStruct.cssSelector} { color: ${N}; }`);const R=e.getColor(Ie);R&&t.addRule(`${ie.b.symbolText.cssSelector} { color: ${R}; }`);const I=e.getColor(Me);I&&t.addRule(`${ie.b.symbolTypeParameter.cssSelector} { color: ${I}; }`);const M=e.getColor(Le);M&&t.addRule(`${ie.b.symbolUnit.cssSelector} { color: ${M}; }`);const L=e.getColor(Pe);L&&t.addRule(`${ie.b.symbolVariable.cssSelector} { color: ${L}; }`)});var We=i(1935),Fe=i(2144),Ee=i(2179),Ae=i(2064),He=i(2812),$e=i(2278),ze=i(2421),Ve=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},qe=function(e,t){return function(i,o){t(i,o,e)}};function Be(e){return!!e&&Boolean(e.completion.documentation||e.completion.detail&&e.completion.detail!==e.completion.label)}let Ue=class{constructor(e,t){this._editor=e,this._onDidClose=new F.a,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new F.a,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new d.b,this._renderDisposeable=new d.b,this._borderWidth=1,this._size=new We.b(330,0),this.domNode=We.a(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(He.a,{editor:e}),this._body=We.a(".body"),this._scrollbar=new Ae.a(this._body,{}),We.n(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=We.n(this._body,We.a(".header")),this._close=We.n(this._header,We.a("span"+ie.b.close.cssSelector)),this._close.title=j.a("details.close","Close"),this._type=We.n(this._header,We.a("p.type")),this._docs=We.n(this._body,We.a("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(e=>{e.hasChanged(40)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(40),i=t.fontFamily,o=e.get(105)||t.fontSize,s=e.get(106)||t.lineHeight,n=t.fontWeight,r=o+"px",d=s+"px";this.domNode.style.fontSize=r,this.domNode.style.lineHeight=d,this.domNode.style.fontWeight=n,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=d,this._close.style.width=d}getLayoutInfo(){const e=this._editor.getOption(106)||this._editor.getOption(40).lineHeight,t=this._borderWidth;return{lineHeight:e,borderWidth:t,borderHeight:2*t,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=j.a("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}renderItem(e,t){var i,o;this._renderDisposeable.clear();let{detail:s,documentation:n}=e.completion;if(t){let t="";t+=`score: ${e.score[0]}\n`,t+=`prefix: ${null!==(i=e.word)&&void 0!==i?i:"(no prefix)"}\n`,t+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}\n`,t+=`distance: ${e.distance} (localityBonus-setting)\n`,t+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}\n`,t+=`commit_chars: ${null===(o=e.completion.commitCharacters)||void 0===o?void 0:o.join("")}\n`,n=(new $e.a).appendCodeblock("empty",t),s="Provider: "+e.provider._debugDisplayName}if(t||Be(e)){if(this.domNode.classList.remove("no-docs","no-type"),s){const e=s.length>1e5?s.substr(0,1e5)+"\u2026":s;this._type.textContent=e,this._type.title=e,We.R(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test(e))}else We.q(this._type),this._type.title="",We.G(this._type),this.domNode.classList.add("no-type");if(We.q(this._docs),"string"===typeof n)this._docs.classList.remove("markdown-docs"),this._docs.textContent=n;else if(n){this._docs.classList.add("markdown-docs"),We.q(this._docs);const e=this._markdownRenderer.render(n);this._docs.appendChild(e.element),this._renderDisposeable.add(e),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=e=>{e.preventDefault(),e.stopPropagation()},this._close.onclick=e=>{e.preventDefault(),e.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get size(){return this._size}layout(e,t){const i=new We.b(e,t);We.b.equals(i,this._size)||(this._size=i,We.S(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;this._body.scrollTop+=e}scrollUp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};Ue=Ve([qe(1,w.a)],Ue);class Ke{constructor(e,t){let i,o;this.widget=e,this._editor=t,this._disposables=new d.b,this._added=!1,this._resizable=new ze.a,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let s=0,n=0;this._disposables.add(this._resizable.onDidWillResize(()=>{i=this._topLeft,o=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(e=>{if(i&&o){this.widget.layout(e.dimension.width,e.dimension.height);let t=!1;e.west&&(n=o.width-e.dimension.width,t=!0),e.north&&(s=o.height-e.dimension.height,t=!0),t&&this._applyTopLeft({top:i.top+s,left:i.left+n})}e.done&&(i=void 0,o=void 0,s=0,n=0,this._userSize=e.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{var e;this._anchorBox&&this._placeAtAnchor(this._anchorBox,null!==(e=this._userSize)&&void 0!==e?e:this.widget.size)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return null}show(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}hide(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e){var t;const i=We.z(e);this._anchorBox=i,this._placeAtAnchor(this._anchorBox,null!==(t=this._userSize)&&void 0!==t?t:this.widget.size)}_placeAtAnchor(e,t){const i=We.w(document.body),o=this.widget.getLayoutInfo();let s,n,r,d,a=new We.b(220,2*o.lineHeight),l=0,c=e.top,h=e.top+e.height-o.borderHeight,g=i.width-(e.left+e.width+o.borderWidth+o.horizontalPadding);l=-o.borderWidth+e.left+e.width,d=!0,s=new We.b(g,i.height-e.top-o.borderHeight-o.verticalPadding),n=s.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding),t.width>g&&(e.left>g&&(g=e.left-o.borderWidth-o.horizontalPadding,d=!1,l=Math.max(o.horizontalPadding,e.left-t.width-o.borderWidth),s=s.with(g),n=s.with(void 0,n.height)),e.width>1.3*g&&i.height-(e.top+e.height)>e.height&&(g=e.width,l=e.left,c=-o.borderWidth+e.top+e.height,s=new We.b(e.width-o.borderHeight,i.height-e.top-e.height-o.verticalPadding),n=s.with(void 0,e.top-o.verticalPadding),a=a.with(s.width)));let u,p=t.height,m=Math.max(s.height,n.height);p>m&&(p=m),p<=s.height?(r=!0,u=s):(r=!1,u=n),this._applyTopLeft({left:l,top:r?c:h-p}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!r,d,r,!d),this._resizable.minSize=a,this._resizable.maxSize=u,this._resizable.layout(p,Math.min(u.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this.getDomNode().style.left=this._topLeft.left+"px",this.getDomNode().style.top=this._topLeft.top+"px"}}var Ge=i(2089),Je=i(2817),Qe=i(1989),Xe=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},Ye=function(e,t){return function(i,o){t(i,o,e)}};class Ze extends Je.a{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id);if(!e)return super.updateLabel();this.label&&(this.label.textContent=Object(j.a)("ddd","{0} ({1})",this._action.label,Ze.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return null===(t=e.getLabel())||void 0===t?void 0:t.replace(/\benter\b/gi,"\u23ce")}}let et=class{constructor(e,t,i,o){this._menuService=i,this._contextKeyService=o,this._menuDisposables=new d.b,this.element=We.n(e,We.a(".suggest-status-bar"));const s=e=>e instanceof Qe.c?t.createInstance(Ze,e):void 0;this._leftActions=new Ge.a(this.element,{actionViewItemProvider:s}),this._rightActions=new Ge.a(this.element,{actionViewItemProvider:s}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(M.g,this._contextKeyService),t=()=>{const t=[],i=[];for(let[o,s]of e.getActions())"left"===o?t.push(...s):i.push(...s);this._leftActions.clear(),this._leftActions.push(t),this._rightActions.clear(),this._rightActions.push(i)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};et=Xe([Ye(1,w.a),Ye(2,Qe.a),Ye(3,R.b)],et);var tt,it=i(2058),ot=i(2481),st=i(2820),nt=i(1988),rt=i(1955),dt=i(2425),at=i(2183),lt=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},ct=function(e,t){return function(i,o){t(i,o,e)}};function ht(e){return"suggest-aria-id:"+e}const gt=Object(at.b)("suggest-more-info",ie.b.chevronRight,j.a("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),ut=new((tt=class e{extract(t,i){if(t.textLabel.match(e._regexStrict))return i[0]=t.textLabel,!0;if(t.completion.detail&&t.completion.detail.match(e._regexStrict))return i[0]=t.completion.detail,!0;if("string"===typeof t.completion.documentation){const o=e._regexRelaxed.exec(t.completion.documentation);if(o&&(0===o.index||o.index+o[0].length===t.completion.documentation.length))return i[0]=o[0],!0}return!1}})._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,tt._regexStrict=new RegExp(`^${tt._regexRelaxed.source}$`,"i"),tt);let pt=class{constructor(e,t,i,o){this._editor=e,this._modelService=t,this._modeService=i,this._themeService=o,this._onDidToggleDetails=new F.a,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=Object.create(null);t.disposables=new d.b,t.root=e,t.root.classList.add("show-file-icons"),t.icon=Object(We.n)(e,Object(We.a)(".icon")),t.colorspan=Object(We.n)(t.icon,Object(We.a)("span.colorspan"));const i=Object(We.n)(e,Object(We.a)(".contents")),o=Object(We.n)(i,Object(We.a)(".main"));t.iconContainer=Object(We.n)(o,Object(We.a)(".icon-label.codicon")),t.left=Object(We.n)(o,Object(We.a)("span.left")),t.right=Object(We.n)(o,Object(We.a)("span.right")),t.iconLabel=new ot.a(t.left,{supportHighlights:!0,supportIcons:!0}),t.disposables.add(t.iconLabel),t.parametersLabel=Object(We.n)(t.left,Object(We.a)("span.signature-label")),t.qualifierLabel=Object(We.n)(t.left,Object(We.a)("span.qualifier-label")),t.detailsLabel=Object(We.n)(t.right,Object(We.a)("span.details-label")),t.readMore=Object(We.n)(t.right,Object(We.a)("span.readMore"+ee.d.asCSSSelector(gt))),t.readMore.title=j.a("readMore","Read More");const s=()=>{const e=this._editor.getOptions(),i=e.get(40),s=i.fontFamily,n=i.fontFeatureSettings,r=e.get(105)||i.fontSize,d=e.get(106)||i.lineHeight,a=i.fontWeight,l=r+"px",c=d+"px";t.root.style.fontSize=l,t.root.style.fontWeight=a,o.style.fontFamily=s,o.style.fontFeatureSettings=n,o.style.lineHeight=c,t.icon.style.height=c,t.icon.style.width=c,t.readMore.style.height=c,t.readMore.style.width=c};return s(),t.disposables.add(this._editor.onDidChangeConfiguration(e=>{(e.hasChanged(40)||e.hasChanged(105)||e.hasChanged(106))&&s()})),t}renderElement(e,t,i){var o,n,r;const{completion:d}=e;i.root.id=ht(t),i.colorspan.style.backgroundColor="";const a={labelEscapeNewLines:!0,matches:Object(it.c)(e.score)};let l=[];if(19===d.kind&&ut.extract(e,l))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=l[0];else if(20===d.kind&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";const t=Object(st.a)(this._modelService,this._modeService,rt.a.from({scheme:"fake",path:e.textLabel}),dt.a.FILE),o=Object(st.a)(this._modelService,this._modeService,rt.a.from({scheme:"fake",path:d.detail}),dt.a.FILE);a.extraClasses=t.length>o.length?t:o}else 23===d.kind&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",a.extraClasses=Object(s.i)([Object(st.a)(this._modelService,this._modeService,rt.a.from({scheme:"fake",path:e.textLabel}),dt.a.FOLDER),Object(st.a)(this._modelService,this._modeService,rt.a.from({scheme:"fake",path:d.detail}),dt.a.FOLDER)])):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...Object(_.G)(d.kind).split(" ")));d.tags&&d.tags.indexOf(1)>=0&&(a.extraClasses=(a.extraClasses||[]).concat(["deprecated"]),a.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,a),"string"===typeof d.label?(i.parametersLabel.textContent="",i.qualifierLabel.textContent="",i.detailsLabel.textContent=mt(d.detail||""),i.root.classList.add("string-label"),i.root.title=""):(i.parametersLabel.textContent=mt(d.label.parameters||""),i.qualifierLabel.textContent=mt(d.label.qualifier||""),i.detailsLabel.textContent=mt(d.label.type||""),i.root.classList.remove("string-label"),i.root.title=`${e.textLabel}${null!==(o=d.label.parameters)&&void 0!==o?o:""}  ${null!==(n=d.label.qualifier)&&void 0!==n?n:""}  ${null!==(r=d.label.type)&&void 0!==r?r:""}`),this._editor.getOption(104).showInlineDetails?Object(We.R)(i.detailsLabel):Object(We.G)(i.detailsLabel),Be(e)?(i.right.classList.add("can-expand-details"),Object(We.R)(i.readMore),i.readMore.onmousedown=e=>{e.stopPropagation(),e.preventDefault()},i.readMore.onclick=e=>{e.stopPropagation(),e.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),Object(We.G)(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};function mt(e){return e.replace(/\r\n|\r|\n/g,"")}pt=lt([ct(1,nt.a),ct(2,S.a),ct(3,ee.b)],pt);var bt=i(2821),_t=i(2132),ft=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},wt=function(e,t){return function(i,o){t(i,o,e)}},vt=function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{a(o.next(e))}catch(t){n(t)}}function d(e){try{a(o.throw(e))}catch(t){n(t)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,d)}a((o=o.apply(e,t||[])).next())}))};const yt=Object(te.Sb)("editorSuggestWidget.background",{dark:te.J,light:te.J,hc:te.J},j.a("editorSuggestWidgetBackground","Background color of the suggest widget.")),St=Object(te.Sb)("editorSuggestWidget.border",{dark:te.K,light:te.K,hc:te.K},j.a("editorSuggestWidgetBorder","Border color of the suggest widget.")),Ct=Object(te.Sb)("editorSuggestWidget.foreground",{dark:te.v,light:te.v,hc:te.v},j.a("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),Ot=Object(te.Sb)("editorSuggestWidget.selectedForeground",{dark:te.Qb,light:te.Qb,hc:te.Qb},j.a("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),xt=Object(te.Sb)("editorSuggestWidget.selectedBackground",{dark:te.Pb,light:te.Pb,hc:te.Pb},j.a("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),Dt=Object(te.Sb)("editorSuggestWidget.highlightForeground",{dark:te.ob,light:te.ob,hc:te.ob},j.a("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),Tt=Object(te.Sb)("editorSuggestWidget.focusHighlightForeground",{dark:te.mb,light:te.mb,hc:te.mb},j.a("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));class kt{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof bt.a}`}restore(){var e;const t=null!==(e=this._service.get(this._key,0))&&void 0!==e?e:"";try{const e=JSON.parse(t);if(We.b.is(e))return We.b.lift(e)}catch(i){}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let jt=class e{constructor(e,t,i,o,s){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new f.g,this._disposables=new d.b,this._onDidSelect=new F.a,this._onDidFocus=new F.a,this._onDidHide=new F.a,this._onDidShow=new F.a,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new F.a,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new ze.a,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new Nt(this,e),this._persistedSize=new kt(t,e);class n{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.persistedSize=e,this.currentSize=t,this.persistHeight=i,this.persistWidth=o}}let r;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),r=new n(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(e=>{var t,i,o,s;if(this._resize(e.dimension.width,e.dimension.height),r&&(r.persistHeight=r.persistHeight||!!e.north||!!e.south,r.persistWidth=r.persistWidth||!!e.east||!!e.west),e.done){if(r){const{itemHeight:e,defaultSize:n}=this.getLayoutInfo(),d=Math.round(e/2);let{width:a,height:l}=this.element.size;(!r.persistHeight||Math.abs(r.currentSize.height-l)<=d)&&(l=null!==(i=null===(t=r.persistedSize)||void 0===t?void 0:t.height)&&void 0!==i?i:n.height),(!r.persistWidth||Math.abs(r.currentSize.width-a)<=d)&&(a=null!==(s=null===(o=r.persistedSize)||void 0===o?void 0:o.width)&&void 0!==s?s:n.width),this._persistedSize.store(new We.b(a,l))}this._contentWidget.unlockPreference(),r=void 0}})),this._messageElement=We.n(this.element.domNode,We.a(".message")),this._listElement=We.n(this.element.domNode,We.a(".tree"));const a=s.createInstance(Ue,this.editor);a.onDidClose(this.toggleDetails,this,this._disposables),this._details=new Ke(a,this.editor);const l=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(104).showIcons);l();const c=s.createInstance(pt,this.editor);this._disposables.add(c),this._disposables.add(c.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Fe.c("SuggestWidget",this._listElement,{getHeight:e=>this.getLayoutInfo().itemHeight,getTemplateId:e=>"suggestion"},[c],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:()=>"option",getAriaLabel:e=>{if(e.isResolved&&this._isDetailsVisible()){const{documentation:t,detail:i}=e.completion,o=B.v("{0}{1}",i||"",t?"string"===typeof t?t:t.value:"");return j.a("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",e.textLabel,o)}return e.textLabel},getWidgetAriaLabel:()=>j.a("suggest","Suggest"),getWidgetRole:()=>"listbox"}}),this._status=s.createInstance(et,this.element.domNode);const h=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(104).showStatusBar);h(),this._disposables.add(Object(Ee.a)(this._list,o,{listInactiveFocusBackground:xt,listInactiveFocusOutline:te.b})),this._disposables.add(o.onDidColorThemeChange(e=>this._onThemeChange(e))),this._onThemeChange(o.getColorTheme()),this._disposables.add(this._list.onMouseDown(e=>this._onListMouseDownOrTap(e))),this._disposables.add(this._list.onTap(e=>this._onListMouseDownOrTap(e))),this._disposables.add(this._list.onDidChangeSelection(e=>this._onListSelection(e))),this._disposables.add(this._list.onDidChangeFocus(e=>this._onListFocus(e))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(e=>{e.hasChanged(104)&&(h(),l())})),this._ctxSuggestWidgetVisible=M.b.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=M.b.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=M.b.MultipleSuggestions.bindTo(i),this._disposables.add(We.l(this._details.widget.domNode,"keydown",e=>{this._onDetailsKeydown.fire(e)})),this._disposables.add(this.editor.onMouseDown(e=>this._onEditorMouseDown(e)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){0!==this._state&&this._contentWidget.layout()}_onListMouseDownOrTap(e){"undefined"!==typeof e.element&&"undefined"!==typeof e.index&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){const t=e.getColor(yt);t&&(this.element.domNode.style.backgroundColor=t.toString(),this._messageElement.style.backgroundColor=t.toString(),this._details.widget.domNode.style.backgroundColor=t.toString());const i=e.getColor(St);i&&(this.element.domNode.style.borderColor=i.toString(),this._messageElement.style.borderColor=i.toString(),this._status.element.style.borderTopColor=i.toString(),this._details.widget.domNode.style.borderColor=i.toString(),this._detailsBorderColor=i.toString());const o=e.getColor(te.M);o&&(this._detailsFocusBorderColor=o.toString()),this._details.widget.borderWidth="hc"===e.type?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),void this.editor.setAriaOptions({activeDescendant:void 0});if(!this._completionModel)return;const i=e.elements[0],o=e.indexes[0];i!==this._focusedItem&&(null===(t=this._currentSuggestionDetails)||void 0===t||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=i,this._list.reveal(o),this._currentSuggestionDetails=Object(f.h)(e=>vt(this,void 0,void 0,(function*(){const t=Object(f.i)(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250);e.onCancellationRequested(()=>t.dispose());const o=yield i.resolve(e);return t.dispose(),o}))),this._currentSuggestionDetails.then(()=>{o>=this._list.length||i!==this._list.element(o)||(this._ignoreFocusEvents=!0,this._list.splice(o,1,[i]),this._list.setFocus([o]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:ht(o)}))}).catch(n.e)),this._onDidFocus.fire({item:i,index:o,model:this._completionModel})}_setState(t){if(this._state!==t)switch(this._state=t,this.element.domNode.classList.toggle("frozen",4===t),this.element.domNode.classList.remove("message"),t){case 0:We.G(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.LOADING_MESSAGE,We.G(this._listElement,this._status.element),We.R(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.NO_SUGGESTIONS_MESSAGE,We.G(this._listElement,this._status.element),We.R(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:case 4:We.G(this._messageElement),We.R(this._listElement,this._status.element),this._show();break;case 5:We.G(this._messageElement),We.R(this._listElement,this._status.element),this._details.show(),this._show()}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){0===this._state&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Object(f.i)(()=>this._setState(1),t)))}showSuggestions(e,t,i,o){var s,n;if(this._contentWidget.setPosition(this.editor.getPosition()),null===(s=this._loadingTimeout)||void 0===s||s.dispose(),null===(n=this._currentSuggestionDetails)||void 0===n||n.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&2!==this._state&&0!==this._state)return void this._setState(4);const r=this._completionModel.items.length,d=0===r;if(this._ctxSuggestWidgetMultipleSuggestions.set(r>1),d)return this._setState(o?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(0!==this._state&&2!==this._state&&1!==this._state&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){5===this._state?(this._setState(3),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)):3===this._state&&this._isDetailsVisible()&&(this._setState(5),this._detailsFocusBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsFocusBorderColor))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!Be(this._list.getFocusedElements()[0])&&!this._explainMode||3!==this._state&&5!==this._state&&4!==this._state||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),i=Math.ceil(4.3*this.getLayoutInfo().itemHeight);t&&t.height<i&&this._persistedSize.store(t.with(void 0,i))}isFrozen(){return 4===this._state}_afterRender(e){null!==e?2!==this._state&&1!==this._state&&(this._isDetailsVisible()&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}_layout(e){var t,i,o;if(!this.editor.hasModel())return;if(!this.editor.getDomNode())return;const s=We.w(document.body),n=this.getLayoutInfo();e||(e=n.defaultSize);let r=e.height,d=e.width;if(this._status.element.style.lineHeight=n.itemHeight+"px",2===this._state||1===this._state)r=n.itemHeight+n.borderHeight,d=n.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new We.b(d,r),this._contentWidget.setPreference(2);else{const a=s.width-n.borderHeight-2*n.horizontalPadding;d>a&&(d=a);const l=this._completionModel?this._completionModel.stats.pLabelLen*n.typicalHalfwidthCharacterWidth:d,c=n.statusBarHeight+this._list.contentHeight+n.borderHeight,h=n.itemHeight+n.statusBarHeight,g=We.z(this.editor.getDomNode()),u=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),p=g.top+u.top+u.height,m=Math.min(s.height-p-n.verticalPadding,c),b=Math.min(g.top+u.top-n.verticalPadding,c);let _=Math.min(Math.max(b,m)+n.borderHeight,c);r===(null===(t=this._cappedHeight)||void 0===t?void 0:t.capped)&&(r=this._cappedHeight.wanted),r<h&&(r=h),r>_&&(r=_),r>m||this._forceRenderingAbove?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),_=b):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),_=m),this.element.preferredSize=new We.b(l,n.defaultSize.height),this.element.maxSize=new We.b(a,_),this.element.minSize=new We.b(220,h),this._cappedHeight=r===c?{wanted:null!==(o=null===(i=this._cappedHeight)||void 0===i?void 0:i.wanted)&&void 0!==o?o:e.height,capped:r}:void 0}this._resize(d,r)}_resize(e,t){const{width:i,height:o}=this.element.maxSize;e=Math.min(i,e),t=Math.min(o,t);const{statusBarHeight:s}=this.getLayoutInfo();this._list.layout(t-s,e),this._listElement.style.height=t-s+"px",this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode)}getLayoutInfo(){const e=this.editor.getOption(40),t=Object(_t.b)(this.editor.getOption(106)||e.lineHeight,8,1e3),i=this.editor.getOption(104).showStatusBar&&2!==this._state&&1!==this._state?t:0,o=this._details.widget.borderWidth,s=2*o;return{itemHeight:t,statusBarHeight:i,borderWidth:o,borderHeight:s,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new We.b(430,i+12*t+s)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};jt.LOADING_MESSAGE=j.a("suggestWidget.loading","Loading..."),jt.NO_SUGGESTIONS_MESSAGE=j.a("suggestWidget.noSuggestions","No suggestions."),jt=ft([wt(1,b.a),wt(2,R.b),wt(3,ee.b),wt(4,w.a)],jt);class Nt{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:o}=this._widget.getLayoutInfo();return new We.b(t+2*i+o,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}Object(ee.f)((e,t)=>{const i=e.getColor(Dt);i&&t.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: ${i}; }`);const o=e.getColor(Tt);i&&t.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight { color: ${o}; }`);const s=e.getColor(Ct);s&&t.addRule(`.monaco-editor .suggest-widget, .monaco-editor .suggest-details { color: ${s}; }`);const n=e.getColor(Ot);n&&t.addRule(`.monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused { color: ${n}; }`);const r=e.getColor(te.ec);r&&t.addRule(`.monaco-editor .suggest-details a { color: ${r}; }`);const d=e.getColor(te.dc);d&&t.addRule(`.monaco-editor .suggest-details code { background-color: ${d}; }`)});var Rt=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},It=function(e,t){return function(i,o){t(i,o,e)}};let Mt=class e{constructor(t,i){this._editor=t,this._enabled=!1,this._ckAtEnd=e.AtEnd.bindTo(i),this._configListener=this._editor.onDidChangeConfiguration(e=>e.hasChanged(109)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),null===(e=this._selectionListener)||void 0===e||e.dispose(),this._ckAtEnd.reset()}_update(){const e="on"===this._editor.getOption(109);if(this._enabled!==e)if(this._enabled=e,this._enabled){const e=()=>{if(!this._editor.hasModel())return void this._ckAtEnd.set(!1);const e=this._editor.getModel(),t=this._editor.getSelection(),i=e.getWordAtPosition(t.getStartPosition());i?this._ckAtEnd.set(i.endColumn===t.getStartPosition().column):this._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(e),e()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};Mt.AtEnd=new R.c("atEndOfWord",!1),Mt=Rt([It(1,R.b)],Mt);var Lt=i(1953),Pt=i(2167);class Wt{constructor(e,t,i){this._disposables=new d.b,this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(o=>{if(this._active&&!t.isFrozen()){const t=o.charCodeAt(o.length-1);this._active.acceptCharacters.has(t)&&e.getOption(0)&&i(this._active.item)}}))}_onItem(e){if(!e||!Object(s.l)(e.item.completion.commitCharacters))return void this.reset();if(this._active&&this._active.item.item===e.item)return;const t=new Pt.b;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}class Ft{constructor(e,t){this._disposables=new d.b,this._lastOvertyped=[],this._empty=!0,this._disposables.add(e.onWillType(()=>{if(!this._empty)return;if(!e.hasModel())return;const t=e.getSelections(),i=t.length;let o=!1;for(let e=0;e<i;e++)if(!t[e].isEmpty()){o=!0;break}if(!o)return;this._lastOvertyped=[];const s=e.getModel();for(let e=0;e<i;e++){const i=t[e];if(s.getValueLengthInRange(i)>Ft._maxSelectionLength)return;this._lastOvertyped[e]={value:s.getValueInRange(i),multiline:i.startLineNumber!==i.endLineNumber}}this._empty=!1})),this._disposables.add(t.onDidCancel(e=>{this._empty||e.retrigger||(this._empty=!0)}))}getLastOvertypedInfo(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}Ft._maxSelectionLength=51200;var Et=i(1941),At=i(1940),Ht=i(2082),$t=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},zt=function(e,t){return function(i,o){t(i,o,e)}};class Vt{constructor(e,t){this._model=e,this._position=t;if(e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),o=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:h.a.fromPositions(t,o),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let qt=class e{constructor(e,t,i,o,s,n){this._memoryService=t,this._commandService=i,this._contextKeyService=o,this._instantiationService=s,this._logService=n,this._lineSuffix=new d.d,this._toDispose=new d.b,this.editor=e,this.model=s.createInstance(Z,this.editor);const a=M.b.InsertMode.bindTo(o);a.set(e.getOption(104).insertMode),this.model.onDidTrigger(()=>a.set(e.getOption(104).insertMode)),this.widget=this._toDispose.add(new f.b(()=>{const e=this._instantiationService.createInstance(jt,this.editor);this._toDispose.add(e),this._toDispose.add(e.onDidSelect(e=>this._insertSuggestion(e,0),this));const t=new Wt(this.editor,e,e=>this._insertSuggestion(e,2));this._toDispose.add(t),this._toDispose.add(this.model.onDidSuggest(e=>{0===e.completionModel.items.length&&t.reset()}));const i=M.b.MakesTextEdit.bindTo(this._contextKeyService),o=M.b.HasInsertAndReplaceRange.bindTo(this._contextKeyService),s=M.b.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(Object(d.h)(()=>{i.reset(),o.reset(),s.reset()})),this._toDispose.add(e.onDidFocus(e=>{let{item:t}=e;const n=this.editor.getPosition(),r=t.editStart.column,d=n.column;let a=!0;if("smart"===this.editor.getOption(1)&&2===this.model.state&&!t.completion.command&&!t.completion.additionalTextEdits&&!(4&t.completion.insertTextRules)&&d-r===t.completion.insertText.length){a=this.editor.getModel().getValueInRange({startLineNumber:n.lineNumber,startColumn:r,endLineNumber:n.lineNumber,endColumn:d})!==t.completion.insertText}i.set(a),o.set(!Et.a.equals(t.editInsertEnd,t.editReplaceEnd)),s.set(Boolean(t.provider.resolveCompletionItem)||Boolean(t.completion.documentation)||t.completion.detail!==t.completion.label)})),this._toDispose.add(e.onDetailsKeyDown(e=>{e.toKeybinding().equals(new r.e(!0,!1,!1,!1,33))||At.f&&e.toKeybinding().equals(new r.e(!1,!1,!1,!0,33))?e.stopPropagation():e.toKeybinding().isModifierKey()||this.editor.focus()})),e})),this._overtypingCapturer=this._toDispose.add(new f.b(()=>this._toDispose.add(new Ft(this.editor,this.model)))),this._alternatives=this._toDispose.add(new f.b(()=>this._toDispose.add(new W(this.editor,this._contextKeyService)))),this._toDispose.add(s.createInstance(Mt,e)),this._toDispose.add(this.model.onDidTrigger(e=>{this.widget.value.showTriggered(e.auto,e.shy?250:50),this._lineSuffix.value=new Vt(this.editor.getModel(),e.position)})),this._toDispose.add(this.model.onDidSuggest(e=>{if(!e.shy){let t=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items);this.widget.value.showSuggestions(e.completionModel,t,e.isFrozen,e.auto)}})),this._toDispose.add(this.model.onDidCancel(e=>{e.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));let l=M.b.AcceptSuggestionsOnEnter.bindTo(o),c=()=>{const e=this.editor.getOption(1);l.set("on"===e||"smart"===e)};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>c())),c()}static get(t){return t.getContribution(e.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(!this.editor.hasModel())return;const i=this.editor.getModel(),o=i.getAlternativeVersionId(),{item:s}=e,r=[],d=new H.b;1&t||this.editor.pushUndoStop();const l=this.getOverwriteInfo(s,Boolean(8&t));if(this._memoryService.memorize(i,this.editor.getPosition(),s),Array.isArray(s.completion.additionalTextEdits)){const e=a.b.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",s.completion.additionalTextEdits.map(e=>c.a.replace(h.a.lift(e.range),e.text))),e.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!s.isResolved){const e=new Ht.a(!0);let o;const n=i.onDidChangeContent(e=>{if(e.isFlush)return d.cancel(),void n.dispose();for(let t of e.changes){const e=h.a.getEndPosition(t.range);o&&!Et.a.isBefore(e,o)||(o=e)}});let l=t;t|=2;let g=!1,u=this.editor.onWillType(()=>{u.dispose(),g=!0,2&l||this.editor.pushUndoStop()});r.push(s.resolve(d.token).then(()=>{if(!s.completion.additionalTextEdits||d.token.isCancellationRequested)return!1;if(o&&s.completion.additionalTextEdits.some(e=>Et.a.isBefore(o,h.a.getStartPosition(e.range))))return!1;g&&this.editor.pushUndoStop();const e=a.b.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",s.completion.additionalTextEdits.map(e=>c.a.replace(h.a.lift(e.range),e.text))),e.restoreRelativeVerticalPositionOfCursor(this.editor),!g&&2&l||this.editor.pushUndoStop(),!0}).then(t=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",e.elapsed(),t),n.dispose(),u.dispose()}))}let{insertText:g}=s.completion;4&s.completion.insertTextRules||(g=p.c.escape(g)),u.a.get(this.editor).insert(g,{overwriteBefore:l.overwriteBefore,overwriteAfter:l.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&s.completion.insertTextRules),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&t||this.editor.pushUndoStop(),s.completion.command?s.completion.command.id===Bt.id?this.model.trigger({auto:!0,shy:!1},!0):(r.push(this._commandService.executeCommand(s.completion.command.id,...s.completion.command.arguments?[...s.completion.command.arguments]:[]).catch(n.e)),this.model.cancel()):this.model.cancel(),4&t&&this._alternatives.value.set(e,e=>{for(d.cancel();i.canUndo();){o!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(e,3|(8&t?8:0));break}}),this._alertCompletionItem(s),Promise.all(r).finally(()=>{this.model.clear(),d.dispose()})}getOverwriteInfo(e,t){Object(Lt.b)(this.editor.hasModel());let i="replace"===this.editor.getOption(104).insertMode;t&&(i=!i);const o=e.position.column-e.editStart.column,s=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column;return{overwriteBefore:o+(this.editor.getPosition().column-e.position.column),overwriteAfter:s+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}}_alertCompletionItem(e){if(Object(s.l)(e.completion.additionalTextEdits)){let t=j.a("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Object(o.a)(t)}}triggerSuggest(e){this.editor.hasModel()&&(this.model.trigger({auto:!1,shy:!1},!1,e),this.editor.revealLine(this.editor.getPosition().lineNumber,0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},o=e=>{if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;const t=this.editor.getPosition(),i=e.editStart.column,o=t.column;if(o-i!==e.completion.insertText.length)return!0;return this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:i,endLineNumber:t.lineNumber,endColumn:o})!==e.completion.insertText};F.b.once(this.model.onDidTrigger)(e=>{let t=[];F.b.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{Object(d.f)(t),i()},void 0,t),this.model.onDidSuggest(e=>{let{completionModel:s}=e;if(Object(d.f)(t),0===s.items.length)return void i();const n=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),s.items),r=s.items[n];o(r)?(this.editor.pushUndoStop(),this._insertSuggestion({index:n,item:r,model:s},7)):i()},void 0,t)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealLine(t.lineNumber,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let o=0;e&&(o|=4),t&&(o|=8),this._insertSuggestion(i,o)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.value.stopForceRenderingAbove()}};qt.ID="editor.contrib.suggestController",qt=$t([zt(1,k),zt(2,N.b),zt(3,R.b),zt(4,w.a),zt(5,G.b)],qt);class Bt extends l.b{constructor(){super({id:Bt.id,label:j.a("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:R.a.and(g.a.writable,g.a.hasCompletionItemProvider),kbOpts:{kbExpr:g.a.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t){const i=qt.get(t);i&&i.triggerSuggest()}}Bt.id="editor.action.triggerSuggest",Object(l.k)(qt.ID,qt),Object(l.i)(Bt);const Ut=l.c.bindToContribution(qt.get);Object(l.j)(new Ut({id:"acceptSelectedSuggestion",precondition:M.b.Visible,handler(e){e.acceptSelectedSuggestion(!0,!1)}})),I.a.registerKeybindingRule({id:"acceptSelectedSuggestion",when:R.a.and(M.b.Visible,g.a.textInputFocus),primary:2,weight:190}),I.a.registerKeybindingRule({id:"acceptSelectedSuggestion",when:R.a.and(M.b.Visible,g.a.textInputFocus,M.b.AcceptSuggestionsOnEnter,M.b.MakesTextEdit),primary:3,weight:190}),Qe.d.appendMenuItem(M.g,{command:{id:"acceptSelectedSuggestion",title:j.a("accept.insert","Insert")},group:"left",order:1,when:M.b.HasInsertAndReplaceRange.toNegated()}),Qe.d.appendMenuItem(M.g,{command:{id:"acceptSelectedSuggestion",title:j.a("accept.insert","Insert")},group:"left",order:1,when:R.a.and(M.b.HasInsertAndReplaceRange,M.b.InsertMode.isEqualTo("insert"))}),Qe.d.appendMenuItem(M.g,{command:{id:"acceptSelectedSuggestion",title:j.a("accept.replace","Replace")},group:"left",order:1,when:R.a.and(M.b.HasInsertAndReplaceRange,M.b.InsertMode.isEqualTo("replace"))}),Object(l.j)(new Ut({id:"acceptAlternativeSelectedSuggestion",precondition:R.a.and(M.b.Visible,g.a.textInputFocus),kbOpts:{weight:190,kbExpr:g.a.textInputFocus,primary:1027,secondary:[1026]},handler(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:M.g,group:"left",order:2,when:R.a.and(M.b.HasInsertAndReplaceRange,M.b.InsertMode.isEqualTo("insert")),title:j.a("accept.replace","Replace")},{menuId:M.g,group:"left",order:2,when:R.a.and(M.b.HasInsertAndReplaceRange,M.b.InsertMode.isEqualTo("replace")),title:j.a("accept.insert","Insert")}]})),N.a.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),Object(l.j)(new Ut({id:"hideSuggestWidget",precondition:M.b.Visible,handler:e=>e.cancelSuggestWidget(),kbOpts:{weight:190,kbExpr:g.a.textInputFocus,primary:9,secondary:[1033]}})),Object(l.j)(new Ut({id:"selectNextSuggestion",precondition:R.a.and(M.b.Visible,M.b.MultipleSuggestions),handler:e=>e.selectNextSuggestion(),kbOpts:{weight:190,kbExpr:g.a.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),Object(l.j)(new Ut({id:"selectNextPageSuggestion",precondition:R.a.and(M.b.Visible,M.b.MultipleSuggestions),handler:e=>e.selectNextPageSuggestion(),kbOpts:{weight:190,kbExpr:g.a.textInputFocus,primary:12,secondary:[2060]}})),Object(l.j)(new Ut({id:"selectLastSuggestion",precondition:R.a.and(M.b.Visible,M.b.MultipleSuggestions),handler:e=>e.selectLastSuggestion()})),Object(l.j)(new Ut({id:"selectPrevSuggestion",precondition:R.a.and(M.b.Visible,M.b.MultipleSuggestions),handler:e=>e.selectPrevSuggestion(),kbOpts:{weight:190,kbExpr:g.a.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),Object(l.j)(new Ut({id:"selectPrevPageSuggestion",precondition:R.a.and(M.b.Visible,M.b.MultipleSuggestions),handler:e=>e.selectPrevPageSuggestion(),kbOpts:{weight:190,kbExpr:g.a.textInputFocus,primary:11,secondary:[2059]}})),Object(l.j)(new Ut({id:"selectFirstSuggestion",precondition:R.a.and(M.b.Visible,M.b.MultipleSuggestions),handler:e=>e.selectFirstSuggestion()})),Object(l.j)(new Ut({id:"toggleSuggestionDetails",precondition:M.b.Visible,handler:e=>e.toggleSuggestionDetails(),kbOpts:{weight:190,kbExpr:g.a.textInputFocus,primary:2058,mac:{primary:266}},menuOpts:[{menuId:M.g,group:"right",order:1,when:R.a.and(M.b.DetailsVisible,M.b.CanResolve),title:j.a("detail.more","show less")},{menuId:M.g,group:"right",order:1,when:R.a.and(M.b.DetailsVisible.toNegated(),M.b.CanResolve),title:j.a("detail.less","show more")}]})),Object(l.j)(new Ut({id:"toggleExplainMode",precondition:M.b.Visible,handler:e=>e.toggleExplainMode(),kbOpts:{weight:100,primary:2133}})),Object(l.j)(new Ut({id:"toggleSuggestionFocus",precondition:M.b.Visible,handler:e=>e.toggleSuggestionFocus(),kbOpts:{weight:190,kbExpr:g.a.textInputFocus,primary:2570,mac:{primary:778}}})),Object(l.j)(new Ut({id:"insertBestCompletion",precondition:R.a.and(g.a.textInputFocus,R.a.equals("config.editor.tabCompletion","on"),Mt.AtEnd,M.b.Visible.toNegated(),W.OtherSuggestions.toNegated(),u.a.InSnippetMode.toNegated()),handler:(e,t)=>{e.triggerSuggestAndAcceptBest(Object(Lt.i)(t)?Object.assign({fallback:"tab"},t):{fallback:"tab"})},kbOpts:{weight:190,primary:2}})),Object(l.j)(new Ut({id:"insertNextSuggestion",precondition:R.a.and(g.a.textInputFocus,R.a.equals("config.editor.tabCompletion","on"),W.OtherSuggestions,M.b.Visible.toNegated(),u.a.InSnippetMode.toNegated()),handler:e=>e.acceptNextSuggestion(),kbOpts:{weight:190,kbExpr:g.a.textInputFocus,primary:2}})),Object(l.j)(new Ut({id:"insertPrevSuggestion",precondition:R.a.and(g.a.textInputFocus,R.a.equals("config.editor.tabCompletion","on"),W.OtherSuggestions,M.b.Visible.toNegated(),u.a.InSnippetMode.toNegated()),handler:e=>e.acceptPrevSuggestion(),kbOpts:{weight:190,kbExpr:g.a.textInputFocus,primary:1026}})),Object(l.i)(class extends l.b{constructor(){super({id:"editor.action.resetSuggestSize",label:j.a("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(e,t){qt.get(t).resetWidgetSize()}})}}]);
//# sourceMappingURL=vendors~console-monaco~ge~monaco~85a20469.e4d1ed98.chunk.js.map